{"version":3,"sources":["../../bower_components/closestColor/closestColor.js","../../src/js/methods/ajaxCall.js","../../src/js/app.js","../../src/js/plugins/URI.min.js","../../src/js/plugins/modernizr-custom.js","../../src/js/plugins/safeConsole.js","../../src/js/utils/addClass.js","../../src/js/utils/checkBrowser.js","../../src/js/utils/cloneObj.js","../../src/js/utils/createCSSClass.js","../../src/js/utils/debounce.js","../../src/js/utils/detectFullscreen.js","../../src/js/utils/editCSSRule.js","../../src/js/utils/getAverage.js","../../src/js/utils/getAverageRGB.js","../../src/js/utils/getBrowserPrefix.js","../../src/js/utils/hasClass.js","../../src/js/utils/isArray.js","../../src/js/utils/listenTo.js","../../src/js/utils/removeClass.js","../../src/js/utils/roundTo.js","../../src/js/utils/stopListeningTo.js","../../src/js/utils/throttle.js","../../src/js/utils/trim.js","../../src/js/config.js","../../src/js/config/easings.js","../../src/js/config/keyCodes.js","../../src/js/config/labels.js","../../src/js/config/toolbarButtons.js","../../src/js/methods/animate.js","../../src/js/methods/canMove.js","../../src/js/methods/canPush.js","../../src/js/methods/changeBg.js","../../src/js/methods/checkFeatures.js","../../src/js/methods/countMove.js","../../src/js/methods/createBoard.js","../../src/js/methods/deselectTile.js","../../src/js/methods/dragTile.js","../../src/js/methods/getMovableTiles.js","../../src/js/methods/getTile.js","../../src/js/methods/init.js","../../src/js/methods/initListeners.js","../../src/js/methods/isTile.js","../../src/js/methods/layoutChange.js","../../src/js/methods/loadGame.js","../../src/js/methods/metricsUpdate.js","../../src/js/methods/moveAnyTile.js","../../src/js/methods/moveTile.js","../../src/js/methods/newGame.js","../../src/js/methods/optimizeRedraws.js","../../src/js/methods/refresh.js","../../src/js/methods/reqAnimFrame.js","../../src/js/methods/saveGame.js","../../src/js/methods/selectTile.js","../../src/js/methods/setBg.js","../../src/js/methods/shuffle.js","../../src/js/methods/start.js","../../src/js/methods/stop.js","../../src/js/methods/vibrate.js"],"names":["getClosestColor","inputColor","palette","isValidColor","color","test","normalizedColor","length","toUpperCase","isValidPalette","Array","i","normalizedPalette","hex2dec","hex","parseInt","getComponents","rgbToXyz","r","g","b","_r","_g","_b","Math","pow","xyzToLab","x","y","z","ref_X","ref_Y","ref_Z","_X","_Y","_Z","rgbToLab","xyz","substr","rgb","lab","colorDifference","color1","color2","lab1","lab2","sqrt","closestColor","jsonpCall","url","callback","callbackName","round","random","window","data","document","body","removeChild","jsonpCallScript","createElement","src","indexOf","appendChild","game","utils","config","metrics","f","n","module","exports","define","amd","IPv6","this","best","h","toLowerCase","split","k","shift","pop","q","splice","join","p","noConflict","RangeError","w","e","replace","C","a","charCodeAt","push","t","u","c","d","l","lastIndexOf","m","A","D","nodeType","B","global","self","E","overflow","not-basic","invalid-input","floor","String","fromCharCode","v","version","ucs2","decode","encode","toASCII","toUnicode","slice","hasOwnProperty","punycode","SecondLevelDomains","list","ac","ae","af","al","ao","ar","at","au","ba","bb","bh","bn","bo","br","bs","bz","ca","ck","cn","co","cr","cy","do","dz","ec","eg","er","es","et","fj","fk","fr","gg","gh","gn","gr","gt","gu","hk","hu","id","il","in","iq","ir","it","je","jo","jp","ke","kh","ki","km","kn","kr","kw","ky","kz","lb","lk","lr","lv","ly","ma","mc","me","mg","mk","ml","mn","mo","mt","mv","mw","mx","my","nf","ng","ni","np","nr","om","pe","ph","pk","pl","pr","ps","pw","ro","rs","sb","sc","sh","sl","st","sv","sz","tr","tt","tw","mu","mz","na","nz","pa","pt","py","qa","re","ru","rw","sa","sd","se","sg","sn","sy","th","tj","tn","tz","ua","ug","uk","us","uy","ve","vi","vn","ye","yu","za","zm","com","net","org","de","has","is","get","require","URI","arguments","TypeError","location","href","absoluteTo","Object","prototype","toString","call","match","sort","escape","encodeURIComponent","_parts","build","charAt","substring","protocol","username","password","hostname","urn","port","path","query","fragment","preventInvalidHostname","duplicateQueryParameters","escapeQuerySpace","protocol_expression","idn_expression","punycode_expression","ip4_expression","ip6_expression","find_uri_expression","findUri","start","end","trim","parens","defaultPorts","http","https","ftp","gopher","ws","wss","hostProtocols","invalid_hostname_characters","domAttributes","blockquote","link","base","script","form","img","area","iframe","embed","source","track","input","audio","video","getDomAttribute","nodeName","type","decodeURIComponent","iso8859","unescape","unicode","characters","pathname","expression","map","%24","%26","%2B","%2C","%3B","%3D","%3A","%40","/","?","#","reserved","%2F","%3F","%23","%5B","%5D","%21","%27","%28","%29","%2A","urnpath",":","encodeQuery","decodeQuery","F","decodePath","decodeUrnPath","recodePath","recodeUrnPath","encodeReserved","parse","parseAuthority","parseHost","ensureValidHostname","ensureValidPort","parseUserinfo","parseQuery","buildAuthority","buildHost","buildUserinfo","buildQuery","buildQueryParameter","addQuery","concat","setQuery","removeQuery","hasQuery","joinPaths","segment","normalize","commonPath","min","withinString","lastIndex","exec","index","ignoreHtml","max","search","ignore","Number","URITemplate","_deferred_build","_string","clone","valueOf","hash","G","H","I","scheme","origin","authority","host","userinfo","resource","subdomain","domain","RegExp","tld","ReferenceError","directory","filename","decodePathSegment","normalizePath","suffix","Error","unshift","segmentCoded","J","setSearch","addSearch","removeSearch","hasSearch","normalizeProtocol","normalizeQuery","normalizeFragment","normalizeHostname","normalizePort","normalizePathname","normalizeSearch","normalizeHash","readable","relativeTo","equals","_cache","cache","","prefix","separator","named","empty_name_separator","+",".",";","&","EXPRESSION_PATTERN","VARIABLE_PATTERN","VARIABLE_NAME_PATTERN","LITERAL_PATTERN","expand","operator","variables","name","strict","val","maxlength","explode","expandNamed","expandUnnamed","parts","Modernizr","cssText","L","O","M","s","bind","_","N","o","documentElement","style","S","innerHTML","background","parentNode","matchMedia","msMatchMedia","matches","getComputedStyle","currentStyle","T","constructor","Function","apply","touch","DocumentTouch","offsetTop","cssanimations","csstransforms3d","offsetLeft","offsetHeight","csstransitions","localstorage","localStorage","setItem","removeItem","addTest","className","_version","_prefixes","_domPrefixes","_cssomPrefixes","mq","testProp","testAllProps","testStyles","method","noop","methods","console","addClass","element","cls","checkBrowser","navigator","userAgent","parseFloat","appVersion","cloneObj","obj","copy","attr","createCSSClass","selector","styleSheets","getElementsByTagName","styleSheet","mediaType","media","disabled","mediaText","styleSheetElement","rules","selectorText","addRule","cssRules","insertRule","debounce","func","wait","immediate","timeout","context","args","later","callNow","clearTimeout","setTimeout","detectFullscreen","standalone","editCSSRule","ruleClass","property","newValue","sheet","getAverage","arr","reduce","getAverageRGB","imageData","canvas","ctx","getContext","width","naturalWidth","height","naturalHeight","defaultRGB","drawImage","getImageData","log","getBrowserPrefix","styles","pre","OLink","dom","lowercase","css","js","hasClass","isArray","listenTo","eventType","fn","listenersList","addEventListener","fnWrapper","event","preventDefault","touches","timeStamp","multiTouchEvent","attachEvent","removeClass","regexp","roundTo","num","resto","stopListeningTo","removeEventListener","undefined","throttle","options","result","_now","Date","now","getTime","previous","leading","remaining","trailing","str","size","margin","borderSize","pushMultiple","minDistanceToMoveTile","clickToMove","vibration","maxTimeForClickMove","touchTolerance","transitionDuration","generic","byKeyboard","useKeyboard","useOptimizeRedraws","easings","EASING_TILES_MOVEMENT","keycodes","KEY_ARROW_LEFT","KEY_ARROW_UP","KEY_ARROW_RIGHT","KEY_ARROW_DOWN","KEY_ESCAPE","KEY_RETURN","labels","WRAPPER_ID","GAME_ID","BOARD_ID","TOOLBAR_ID","BACKGROUND_CONTAINER_ID","BACKGROUND_IMAGE_ID","TILE_PREFIX","TILE_CLASS","TILE_INNER_CLASS","TILE_NUMBER_CLASS","TBUTTON_PREFIX","SELECTED_LABEL","PRESSED_LABEL","ANIMATED_LABEL","USETOUCH_LABEL","NO_TOUCH_LABEL","UP","RIGHT","DOWN","LEFT","LANDSCAPE","PORTRAIT","SAVEDGAMES_LABEL","AUTOSAVE_LABEL","USERSAVE_LABEL","SORTEDSAVE_LABEL","SHUFFLEDSAVE_LABEL","toolbarButtons","description","handler","confirm","newGame","saveGame","getElementById","loadGame","animate","animation","duration","ajaxCall","xmlhttp","XMLHttpRequest","onreadystatechange","status","readyState","responseText","open","send","params","CSSstyleDeclaration","browserPrefixes","iterations","iteration","delay","easing","runtime","eventListeners","target","canMove","tile","isTile","hole","tiles","HOLE_INDEX","holePosition","col","row","canPush","tilesToPush","pushableTiles","abs","direction","changeBg","setBgImage","imgUrl","checkFeatures","browserOK","alert","useTouch","useCSStransitions","use3Dtransforms","useLstorage","useVibration","useCssAnimations","launchedAsApp","useReqAnimFrame","requestAnimationFrame","countMove","movesCount","createBoard","boardHTML","setAttribute","correctCol","correctRow","even","evenCol","evenRow","htmlElement","deselectTile","selectedTile","tileMoved","tilesMoved","dragging","vibrate","newPosition","left","pixels","revert","moveTile","transitions","force","refresh","oldPosition","tileWidth","top","tileHeight","dragTile","running","newPosX","newPosY","otherTile","otherTileNewPos","offset","pageX","pageY","percent","transforms3Dsupport","addMovingTile","renderMovingTiles","getMovableTiles","pushing","moving","movableTiles","getTile","param","maxLevels","srcElement","isNaN","elementFromPoint","init","started","ended","timePlaying","resizeTimer","latestSelection","metricsUpdate","initListeners","selectTile","from","relatedTarget","toElement","which","moveAnyTile","ctrlKey","Event","dispatchEvent","optimizeRedraws","layoutChange","tileID","loadedGames","JSON","getItem","loadedGame","saveDate","UTC","startedDate","wrapperHTML","gameHTML","wrapperWidth","offsetWidth","wrapperHeight","cssPrefix","wrapperOrientation","wrapperRatio","pixelRatio","devicePixelRatio","wrapperSize","boardLayout","boardRatio","fontSize","marginH","marginV","backgroundImage","averageRGB_brighter","tileWpc","tileHpc","bgSize","t1","t2","temp","redraw","animationDuration","stop","shuffle","state","elements","visibility","win","movingTiles","childNodes","backgroundPosition","offse","tileObj","cssString","tileId","savedGames","savedGame","toUTCString","stringify","crossOrigin","handleBgImageLoaded","averageRGB","applyBgColor","applyBgImage","tileName","adjustColor","mode","amount","limit","rgbVal","hexVal","rgbDark","rgbDarkVal","hexDarkVal","rgbBright","rgbBrightVal","hexBrightVal","averageRGB_darker","averageHEX","averageHEX_darker","averageHEX_brighter","blackish","whiteish","backgroundColor","currentBoxShadow","boxShadowProps","directions","reasonToVibrate","pattern"],"mappings":"AAYA,QAASA,iBAAgBC,WAAYC,SAEjC,YAiBA,SAASC,cAAaC,OAElB,MAAqB,gBAAVA,UAIR,qCAAuCC,KAAKD,OAOnD,QAASE,iBAAgBF,OAOrB,MALID,cAAaC,QAA2B,IAAjBA,MAAMG,SAE7BH,MAAQA,MAAM,GAAKA,MAAM,GAAKA,MAAM,GAAKA,MAAM,GAAKA,MAAM,GAAKA,MAAM,GAAKA,MAAM,IAG7EA,MAAMI,cAGjB,QAASC,gBAAeP,SAEpB,GAA0B,gBAAZA,YAA2BA,kBAAmBQ,QACxD,OAAO,CAGX,IAAuB,IAAnBR,QAAQK,OACR,OAAO,CAGX,KAAK,GAAII,GAAI,EAAGA,EAAIT,QAAQK,OAAQI,IAAK,CAErC,IAAKR,aAAaD,QAAQS,IACtB,OAAO,CAGXT,SAAQS,GAAKL,gBAAgBJ,QAAQS,IAIzC,OAAO,EAGX,QAASC,mBAAkBV,SAEvB,GAAIO,eAAeP,SACf,IAAK,GAAIS,GAAI,EAAGA,EAAIT,QAAQK,OAAQI,IAChCT,QAAQS,GAAKL,gBAAgBJ,QAAQS,GAI7C,OAAOT,SAGX,QAASW,SAAQC,KACb,MAAOC,UAASD,IAAK,IAGzB,QAASE,eAAcZ,OAMnB,QAASa,UAASC,EAAGC,EAAGC,GAIpB,GAAIC,IAAMH,EAAI,IACVI,GAAMH,EAAI,IACVI,GAAMH,EAAI,GA4Bd,OA1BIC,IAAK,OACLA,GAAKG,KAAKC,KAAMJ,GAAK,MAAS,MAAQ,KAEtCA,IAAU,MAGVC,GAAK,OACLA,GAAKE,KAAKC,KAAMH,GAAK,MAAS,MAAQ,KAEtCA,IAAU,MAGVC,GAAK,OACLA,GAAKC,KAAKC,KAAMF,GAAK,MAAS,MAAQ,KAEtCA,IAAU,MAGdF,IAAU,IACVC,IAAU,IACVC,IAAU,KAEG,MAALF,GAAmB,MAALC,GAAmB,MAALC,GACvB,MAALF,GAAmB,MAALC,GAAmB,MAALC,GACvB,MAALF,GAAmB,MAALC,GAAmB,MAALC,IAKxC,QAASG,UAASC,EAAGC,EAAGC,GAIpB,GAAIC,OAAQ,OACRC,MAAQ,IACRC,MAAQ,QAERC,GAAKN,EAAIG,MACTI,GAAKN,EAAIG,MACTI,GAAKN,EAAIG,KAwBb,OArBIC,IADAA,GAAK,QACAT,KAAKC,IAAIQ,GAAK,EAAI,GAEjB,MAAQA,GAAO,GAAK,IAI1BC,GADAA,GAAK,QACAV,KAAKC,IAAIS,GAAK,EAAI,GAEjB,MAAQA,GAAO,GAAK,IAI1BC,GADAA,GAAK,QACAX,KAAKC,IAAIU,GAAK,EAAI,GAEjB,MAAQA,GAAO,GAAK,KAGjB,IAAMD,GAAM,GACb,KAAOD,GAAKC,IACZ,KAAOA,GAAKC,KAK5B,QAASC,UAASlB,EAAGC,EAAGC,GAEpB,GAAIiB,KAAMpB,SAASC,EAAGC,EAAGC,EAGzB,OAFUM,UAASW,IAAI,GAAIA,IAAI,GAAIA,IAAI,IAjF3C,GAAInB,GAAIL,QAAQT,MAAMkC,OAAO,EAAG,IAC5BnB,EAAIN,QAAQT,MAAMkC,OAAO,EAAG,IAC5BlB,EAAIP,QAAQT,MAAMkC,OAAO,EAAG,GAoFhC,QACIxB,IAAKV,MACLmC,KAAMrB,EAAGC,EAAGC,GACZoB,IAAKJ,SAASlB,EAAGC,EAAGC,IAI5B,QAASqB,iBAAgBC,OAAQC,QAE7B,GAAIC,MAAO5B,cAAc0B,QAAQF,IAC7BK,KAAO7B,cAAc2B,QAAQH,GAQjC,OANahB,MAAKsB,KACdtB,KAAKC,IAAIoB,KAAK,GAAKD,KAAK,GAAI,GAC5BpB,KAAKC,IAAIoB,KAAK,GAAKD,KAAK,GAAI,GAC5BpB,KAAKC,IAAIoB,KAAK,GAAKD,KAAK,GAAI,IA5KpC,GAHA1C,QAAUU,kBAAkBV,WAC5BD,WAAaK,gBAAgBL,aAGzB,KAAM,4BAGV,KAAKC,QACD,KAAM,8BAoLV,KAAK,GAFD6C,cAAe7C,QAAQ,GAElBS,EAAI,EAAGA,EAAIT,QAAQK,OAAQI,IAE5B8B,gBAAgBxC,WAAYC,QAAQS,IAAM8B,gBAAgBxC,WAAY8C,gBACtEA,aAAe7C,QAAQS,GAK/B,OAAOoC,cC7LX,QAASC,WAAUC,IAAKC,UAEtB,YAEA,IAAIC,cAAe,kBAAoB3B,KAAK4B,MAAM,IAAS5B,KAAK6B,SAEhEC,QAAOH,cAAgB,SAASI,YACvBD,QAAOH,cACdK,SAASC,KAAKC,YAAYC,iBAC1BT,SAASK,MAGX,IAAII,iBAAkBH,SAASI,cAAa,SAC5CD,iBAAgBE,IAAMZ,KAAOA,IAAIa,QAAO,MAAS,EAAI,IAAM,KAAO,YAAcX,aAChFK,SAASC,KAAKM,YAAYJ,iBCzC5B,GAAIK,OACFC,SACAC,UACAC,aCDF,SAAUC,EAAGC,GACX,gBAAoBC,SAAUA,OAAOC,QAAUD,OAAOC,QAAUF,IAAM,kBAAsBG,SAAUA,OAAOC,IAAMD,OAAOH,GAAKD,EAAEM,KAAOL,EAAED,IACzIO,KAAM,SAASP,GAChB,GAAIC,GAAID,GAAKA,EAAEM,IACf,QACEE,KAAM,SAASC,GACbA,EAAIA,EAAEC,cAAcC,MAAK,IACzB,IAAIC,GAAIH,EAAEtE,OACRa,EAAI,CACN,MAAOyD,EAAE,IAAM,KAAOA,EAAE,IAAM,KAAOA,EAAE,IAAMA,EAAEI,QAASJ,EAAEI,SAAW,KAAOJ,EAAE,IAAM,KAAOA,EAAE,GAAKA,EAAEI,QAAU,KAAOJ,EAAEG,EAAI,IAAM,KAAOH,EAAEG,EAAI,IAAMH,EAAEK,MACtJF,EAAIH,EAAEtE,QAAU,IAAMsE,EAAEG,EAAI,GAAGlB,QAAO,OAAU1C,EAAI,EACpD,IAAI+D,EACJ,KAAKA,EAAI,EAAGA,EAAIH,GAAK,KAAOH,EAAEM,GAAIA,KAClC,GAAIA,EAAI/D,EACN,IAAKyD,EAAEO,OAAOD,EAAG,EAAG,QAASN,EAAEtE,OAASa,GAAIyD,EAAEO,OAAOD,EAAG,EAAG,OAC7D,KAAKA,EAAI,EAAGA,EAAI/D,EAAG+D,IAAK,CACtBH,EAAIH,EAAEM,GAAGJ,MAAK,GACd,KAAK,GAAIX,GAAI,EAAG,EAAIA,IACf,MAASY,EAAE,IAAM,EAAIA,EAAEzE,QADL6D,IACaY,EAAEI,OAAO,EAAG,EAEhDP,GAAEM,GAAKH,EAAEK,KAAI,IAEfL,GAAK,CACL,IAAIX,GAAID,EAAI,EACVjD,GAAK,EACLmE,GAAI,CACN,KAAKH,EAAI,EAAGA,EAAI/D,EAAG+D,IAAKG,EAAI,MAAQT,EAAEM,GAAKd,GAAK,GAAKiB,GAAI,EAAIjB,EAAID,IAAMY,EAAI7D,EAAGiD,EAAIC,IAAM,MAAQQ,EAAEM,KAAOG,GAAI,EAAInE,EAAIgE,EAAGd,EAAI,EAM5H,KALAA,EAAID,IAAMY,EAAI7D,EAAGiD,EAAIC,GACrB,EAAID,GAAKS,EAAEO,OAAOJ,EAAGZ,EAAG,IACxBY,EAAIH,EAAEtE,OACNa,EAAI,GACJ,KAAOyD,EAAE,KAAOzD,EAAI,KACf+D,EAAI,EAAGA,EAAIH,IACd5D,GAAKyD,EAAEM,GACHA,IAAMH,EAAI,GAFGG,IAGjB/D,GAAK,GAGP,OADA,KAAOyD,EAAEG,EAAI,KAAO5D,GAAK,KAClBA,GAETmE,WAAY,WAEV,MADAnB,GAAEM,OAASC,OAASP,EAAEM,KAAOL,GACtBM,SAIb,SAAUP,GACR,QAASC,GAAEjD,GACT,KAAM,IAAIoE,YAAWC,EAAErE,IAGzB,QAASyD,GAAEzD,EAAGsE,GACZ,IAAK,GAAIvE,GAAIC,EAAEb,OAAQsE,KAAQ1D,KAAM0D,EAAE1D,GAAKuE,EAAEtE,EAAED,GAChD,OAAO0D,GAGT,QAASG,GAAE5D,EAAGsE,GACZ,GAAIvE,GAAIC,EAAE2D,MAAK,KACbX,EAAI,EAKN,OAJA,GAAIjD,EAAEZ,SAAW6D,EAAIjD,EAAE,GAAK,IAAKC,EAAID,EAAE,IACvCC,EAAIA,EAAEuE,QAAQC,EAAG,KACjBzE,EAAIC,EAAE2D,MAAK,KACX5D,EAAI0D,EAAE1D,EAAGuE,GAAGL,KAAI,KACTjB,EAAIjD,EAGb,QAASC,GAAEA,GACT,IAAK,GAAiCgD,GAAGyB,EAAhCH,KAAQvE,EAAI,EAAG0D,EAAIzD,EAAEb,OAAcY,EAAI0D,GAAIT,EAAIhD,EAAE0E,WAAW3E,KAAM,OAASiD,GAAK,OAASA,GAAKjD,EAAI0D,GAAKgB,EAAIzE,EAAE0E,WAAW3E,KAAM,QAAc,MAAJ0E,GAAaH,EAAEK,OAAW,KAAJ3B,IAAa,KAAW,KAAJyB,GAAY,QAAUH,EAAEK,KAAK3B,GAAIjD,MAAQuE,EAAEK,KAAK3B,EAC3O,OAAOsB,GAGT,QAASP,GAAE/D,GACT,MAAOyD,GAAEzD,EAAG,SAASA,GACnB,GAAIsE,GACF,EAEF,OADA,OAAQtE,IAAMA,GAAK,MAAOsE,GAAKM,EAAE5E,IAAM,GAAK,KAAO,OAAQA,EAAI,MAAY,KAAJA,GAChEsE,GAAKM,EAAE5E,KACbiE,KAAI,IAGT,QAASxD,GAAET,EAAGsE,GACZ,MAAOtE,GAAI,GAAK,IAAM,GAAKA,KAAO,GAAKsE,IAAM,GAG/C,QAASO,GAAE7E,EAAGD,EAAG0D,GACf,GAAIT,GAAI,CAER,KADAhD,EAAIyD,EAAIa,EAAEtE,EAAI,KAAOA,GAAK,EACrBA,GAAKsE,EAAEtE,EAAID,GAAI,IAAMC,EAAGgD,GAAK,GAAIhD,EAAIsE,EAAEtE,EAAI,GAChD,OAAOsE,GAAEtB,EAAI,GAAKhD,GAAKA,EAAI,KAG7B,QAASD,GAAEC,GACT,GAKE8E,GAAGC,EALDhF,KACF0D,EAAIzD,EAAEb,OACN6D,EAAI,EACJY,EAAI,IACJa,EAAI,GAEFO,EAAIhF,EAAEiF,YAAW,IAErB,KADA,EAAID,IAAMA,EAAI,GACTF,EAAI,EAAGA,EAAIE,IAAKF,EAAG,KAAO9E,EAAE0E,WAAWI,IAAM7B,EAAC,aAAelD,EAAE4E,KAAK3E,EAAE0E,WAAWI,GACtF,KAAKE,EAAI,EAAIA,EAAIA,EAAI,EAAI,EAAGA,EAAIvB,GAAI,CAClCqB,EAAI9B,CACJ,IAAIkC,GAAI,CACR,KAAKH,EAAI,IAAKA,GAAK,GAAI,CACrBC,GAAKvB,GAAKR,EAAC,gBACX,IAAI1C,GAAIP,EAAE0E,WAAWM,IACrBzE,GAAI,GAAKA,EAAI,GAAKA,EAAI,GAAK,GAAKA,EAAI,GAAKA,EAAI,GAAK,GAAKA,EAAI,GAAKA,EAAI,GAAK,IACxE,IAAMA,GAAKA,EAAI+D,GAAG,WAAatB,GAAKkC,KAAOjC,EAAC,YAC7CD,GAAKzC,EAAI2E,CACT,IAAIhB,GAAIa,GAAKN,EAAI,EAAIM,GAAKN,EAAI,GAAK,GAAKM,EAAIN,CAC5C,IAAIlE,EAAI2D,EAAG,KACX3D,GAAI,GAAK2D,EACTgB,EAAIZ,EAAE,WAAa/D,IAAM0C,EAAC,YAC1BiC,GAAK3E,EAEP2E,EAAInF,EAAEZ,OAAS,EACfsF,EAAII,EAAE7B,EAAI8B,EAAGI,EAAG,GAAKJ,GACrBR,EAAEtB,EAAIkC,GAAK,WAAatB,GAAKX,EAAC,YAC9BW,GAAKU,EAAEtB,EAAIkC,GACXlC,GAAKkC,EACLnF,EAAEiE,OAAOhB,IAAK,EAAGY,GAEnB,MAAOG,GAAEhE,GAGX,QAASmE,GAAEnE,GACT,GAAI0D,GAAGT,EAAGY,EAAGM,IACbnE,GAAIC,EAAED,EACN,IAAI0E,GAAI1E,EAAEZ,OACN2F,EAAI,IACJC,EAAI,EACJC,EAAI,EACR,KAAKpB,EAAI,EAAGA,EAAIa,IAAKb,EAAG,CACtB,GAAIsB,GAAInF,EAAE6D,EACV,KAAMsB,GAAKhB,EAAES,KAAKC,EAAEM,IAEtB,KAAMzB,EAAIT,EAAIkB,EAAE/E,SAAW+E,EAAES,KAAI,KAAOlB,EAAIgB,GAAI,CAC9C,GAAIlE,GAAI,UACR,KAAKqD,EAAI,EAAGA,EAAIa,IAAKb,GAAGsB,EAAInF,EAAE6D,KAASkB,GACrCI,EAAI3E,IAAMA,EAAI2E,EAChB,IAAInB,GAAIN,EAAI,CAIZ,KAHAlD,EAAIuE,EAAIR,GAAG,WAAaS,GAAKhB,IAAMd,EAAC,YACpC8B,IAAMxE,EAAIuE,GAAKf,EACfe,EAAIvE,EACCqD,EAAI,EAAGA,EAAIa,IAAKb,EACnB,GAAIsB,EAAInF,EAAE6D,GAAIsB,EAAIJ,GAAK,aAAeC,GAAK9B,EAAC,YAAciC,GAAKJ,EAAG,CAChE,GAAIhF,GAAIiF,CACR,KAAKxE,EAAI,GACP2E,EAAI3E,GAAKyE,EAAI,EAAIzE,GAAKyE,EAAI,GAAK,GAAKzE,EAAIyE,IACpClF,EAAIoF,GAFI3E,GAAK,GAAI,CAGrB,GAAI4E,GAAIrF,EAAIoF,CACZpF,GAAI,GAAKoF,EACThB,EAAES,KAAKC,EAAEnE,EAAEyE,EAAIC,EAAIrF,EAAG,KACtBA,EAAIwE,EAAEa,EAAIrF,GAEZoE,EAAES,KAAKC,EAAEnE,EAAEX,EAAG,KACdkF,EAAIH,EAAEE,EAAGhB,EAAGN,GAAKT,GACjB+B,EAAI,IACFtB,IACDsB,IACHD,EAEJ,MAAOZ,GAAED,KAAI,IAEf,GAAImB,GAAI,gBAAmBjC,UAAWA,UAAYA,QAAQkC,UAAYlC,QACpEgC,EAAI,gBAAmBjC,SAAUA,SAAWA,OAAOmC,UAAYnC,OAC/DoC,EAAI,gBAAmBC,SAAUA,MAC/BD,GAAEC,SAAWD,GAAKA,EAAEpD,SACtBoD,GAAKA,EAAEE,OAASF,IAAGtC,EAAIsC,EACzB,IAUE9E,GAVEiF,EAAI,QACN3F,EAAI,eACJ0E,EAAI,4BACJH,GACEqB,SAAU,kDACVC,YAAa,iDACbC,gBAAiB,iBAEnBtB,EAAIlE,KAAKyF,MACTjB,EAAIkB,OAAOC,aAETC,GACFC,QAAS,QACTC,MACEC,OAAQnG,EACRoG,OAAQrC,GAEVoC,OAAQpG,EACRqG,OAAQlC,EACRmC,QAAS,SAASrG,GAChB,MAAO4D,GAAE5D,EAAG,SAASA,GACnB,MAAOF,GAAEb,KAAKe,GAAK,OAASkE,EAAElE,GAAKA,KAGvCsG,UAAW,SAAStG,GAClB,MAAO4D,GAAE5D,EAAG,SAASA,GACnB,MAAOyF,GAAExG,KAAKe,GAAKD,EAAEC,EAAEuG,MAAM,GAAG7C,eAC9B1D,KAIR,IAAG,kBAAsBoD,SAAU,gBAAmBA,QAAOC,KAAOD,OAAOC,IAAKD,OAAM,WAAa,WACjG,MAAO4C,SAEJ,IAAIZ,GAAKD,EACZ,GAAIjC,OAAOC,SAAWiC,EAAGD,EAAEhC,QAAU6C,MAEnC,KAAKxF,IAAKwF,GAAGA,EAAEQ,eAAehG,KAAO4E,EAAE5E,GAAKwF,EAAExF,QAC7CwC,GAAEyD,SAAWT,GACjBzC,MACH,SAAUP,EAAGC,GACX,gBAAoBC,SAAUA,OAAOC,QAAUD,OAAOC,QAAUF,IAAM,kBAAsBG,SAAUA,OAAOC,IAAMD,OAAOH,GAAKD,EAAE0D,mBAAqBzD,EAAED,IACvJO,KAAM,SAASP,GAChB,GAAIC,GAAID,GAAKA,EAAE0D,mBACbjD,GACEkD,MACEC,GAAI,wBACJC,GAAI,uCACJC,GAAI,wBACJC,GAAI,4BACJC,GAAI,sBACJC,GAAI,wCACJC,GAAI,gBACJC,GAAI,qCACJC,GAAI,2DACJC,GAAI,6CACJC,GAAI,oCACJC,GAAI,wBACJC,GAAI,uCACJC,GAAI,gQACJC,GAAI,wBACJC,GAAI,mBACJC,GAAI,8CACJC,GAAI,oCACJC,GAAI,+HACJC,GAAI,gCACJC,GAAI,2BACJC,GAAI,oEACJC,GAAM,4CACNC,GAAI,qCACJC,GAAI,6CACJC,GAAI,yCACJC,GAAI,0CACJC,GAAI,wBACJC,GAAI,sCACJC,GAAI,yCACJC,GAAI,0BACJC,GAAI,sCACJC,GAAI,eACJC,GAAI,wBACJC,GAAI,uBACJC,GAAI,4BACJC,GAAI,gCACJC,GAAI,wBACJC,GAAI,4BACJC,GAAI,yLACJC,GAAI,gCACJC,GAAI,mCACJC,GAAM,2DACNC,GAAI,8BACJC,GAAI,sCACJC,GAAI,YACJC,GAAI,eACJC,GAAI,qCACJC,GAAI,+BACJC,GAAI,mCACJC,GAAI,gCACJC,GAAI,4CACJC,GAAI,wFACJC,GAAI,oBACJC,GAAI,0KACJC,GAAI,wBACJC,GAAI,wBACJC,GAAI,4BACJC,GAAI,wBACJC,GAAI,+DACJC,GAAI,wBACJC,GAAI,wCACJC,GAAI,uCACJC,GAAI,8BACJC,GAAI,YACJC,GAAI,mCACJC,GAAI,mCACJC,GAAI,qCACJC,GAAI,+BACJC,GAAI,gBACJC,GAAI,wBACJC,GAAI,wBACJC,GAAI,mEACJC,GAAI,8CACJC,GAAI,wBACJC,GAAI,qCACJC,GAAI,mDACJC,GAAI,8CACJC,GAAI,sCACJC,GAAI,4BACJC,GAAI,iCACJC,GAAI,yDACJC,GAAI,oCACJC,GAAI,kCACJC,GAAI,wDACJC,GAAI,oLACJC,GAAI,2DACJC,GAAI,gCACJC,GAAI,yBACJC,GAAI,mDACJC,GAAI,yBACJC,GAAI,wBACJC,GAAI,wBACJC,GAAI,+BACJC,GAAI,wBACJC,GAAI,0EACJC,GAAI,wBACJC,GAAI,cACJC,GAAI,+EACJC,GAAI,+FACJC,GAAI,+CACJC,GAAI,6BACJC,GAAI,sBACJC,GAAI,WACJC,GAAI,2EACJC,GAAI,+CACJC,GAAI,sCACJC,GAAI,4BACJC,GAAI,4BACJC,GAAI,iBACJC,GAAI,+wBACJC,GAAI,uCACJC,GAAI,oCACJC,GAAI,oCACJC,GAAI,8EACJC,GAAI,gCACJC,GAAI,oCACJC,GAAI,iCACJC,GAAI,0BACJC,GAAI,oEACJC,GAAI,uGACJC,GAAI,mBACJC,GAAI,8UACJC,GAAI,0BACJC,GAAI,iKACJC,GAAI,yBACJC,GAAI,4BACJC,GAAI,wCACJC,GAAI,uBACJC,GAAI,wDACJC,GAAI,kCACJC,GAAI,sBACJC,GAAI,8IACJC,GAAI,kCACJC,IAAK,6DACLC,IAAK,eACLC,IAAK,KACLC,GAAI,QAENC,IAAK,SAAStM,GACZ,GAAIhD,GAAIgD,EAAEiC,YAAW,IACrB,IAAI,GAAKjF,GAAKA,GAAKgD,EAAE7D,OAAS,EAAG,OAAO,CACxC,IAAIyE,GAAIZ,EAAEiC,YAAW,IAAMjF,EAAI,EAC/B,IAAI,GAAK4D,GAAKA,GAAK5D,EAAI,EAAG,OAAO,CACjC,IAAIiD,GAAIQ,EAAEkD,KAAK3D,EAAEuD,MAAMvG,EAAI,GAC3B,SAAOiD,GAAI,GAAKA,EAAEP,QAAO,IAAOM,EAAEuD,MAAM3C,EAAI,EAAG5D,GAAK,MAEtDuP,GAAI,SAASvM,GACX,GAAIhD,GAAIgD,EAAEiC,YAAW,IACrB,IAAI,GAAKjF,GAAKA,GAAKgD,EAAE7D,OAAS,GAAK,GAAK6D,EAAEiC,YAAW,IAAMjF,EAAI,GAAI,OAAO,CAC1E,IAAI4D,GAAIH,EAAEkD,KAAK3D,EAAEuD,MAAMvG,EAAI,GAC3B,SAAO4D,GAAI,GAAKA,EAAElB,QAAO,IAAOM,EAAEuD,MAAM,EAAGvG,GAAK,MAElDwP,IAAK,SAASxM,GACZ,GAAIhD,GAAIgD,EAAEiC,YAAW,IACrB,IAAI,GAAKjF,GAAKA,GAAKgD,EAAE7D,OAAS,EAAG,MAAO,KACxC,IAAIyE,GAAIZ,EAAEiC,YAAW,IAAMjF,EAAI,EAC/B,IAAI,GAAK4D,GAAKA,GAAK5D,EAAI,EAAG,MAAO,KACjC,IAAIiD,GAAIQ,EAAEkD,KAAK3D,EAAEuD,MAAMvG,EAAI,GAC3B,QAAQiD,GAAK,EAAIA,EAAEP,QAAO,IAAOM,EAAEuD,MAAM3C,EAAI,EAAG5D,GAAK,KAAO,KAAOgD,EAAEuD,MAAM3C,EAAI,IAEjFO,WAAY,WAEV,MADAnB,GAAE0D,qBAAuBnD,OAASP,EAAE0D,mBAAqBzD,GAClDM,MAGb,OAAOE,KAET,SAAUT,EAAGC,GACX,gBAAoBC,SAAUA,OAAOC,QAAUD,OAAOC,QAAUF,EAAEwM,QAAO,cAAgBA,QAAO,UAAYA,QAAO,yBAA4B,kBAAsBrM,SAAUA,OAAOC,IAAMD,QAAM,aAAgB,SAAU,wBAAyBH,GAAKD,EAAE0M,IAAMzM,EAAED,EAAEyD,SAAUzD,EAAEM,KAAMN,EAAE0D,mBAAoB1D,IAC7SO,KAAM,SAASP,EAAGC,EAAGQ,EAAGG,GACzB,QAAS5D,GAAEyE,EAAGK,GACZ,GAAIC,GAAI,GAAK4K,UAAUxQ,OACrB6F,EAAI,GAAK2K,UAAUxQ,MACrB,MAAMoE,eAAgBvD,IAAI,MAAO+E,GAAIC,EAAI,GAAIhF,GAAEyE,EAAGK,GAAK,GAAI9E,GAAEyE,GAAK,GAAIzE,EACtE,QAAI,KAAWyE,EAAG,CAChB,GAAIM,EAAG,KAAM,IAAI6K,WAAS,4CAC1BnL,GAAI,mBAAuBoL,UAAWA,SAASC,KAAO,GAAK,GAE7D,GAAI,OAASrL,GAAKM,EAAG,KAAM,IAAI6K,WAAS,uCAExC,OADArM,MAAKuM,KAAKrL,OACH,KAAWK,EAAIvB,KAAKwM,WAAWjL,GAAKvB,KAG7C,QAASQ,GAAEU,GACT,MAAOA,GAAEF,QAAO,6BAA+B,QAGjD,QAAS9D,GAAEgE,GACT,WAAO,KAAWA,EAAI,YAAcqB,OAAOkK,OAAOC,UAAUC,SAASC,KAAK1L,IAAI8B,MAAM,GAAI,GAG1F,QAAS1B,GAAEJ,GACT,MAAO,UAAYhE,EAAEgE,GAGvB,QAAS1E,GAAE0E,EAAGK,GACZ,GACE9E,GADE+E,IAEJ,IAAG,WAActE,EAAEqE,GAAIC,EAAI,SACtB,IAAIF,EAAEC,GAAI,CACb,GAAII,GAAI,CACR,KAAKlF,EAAI8E,EAAE3F,OAAQ+F,EAAIlF,EAAGkF,IAAKH,EAAED,EAAEI,KAAM,MACpCH,GAAED,IAAK,CAEd,KADAI,EAAI,EACClF,EAAIyE,EAAEtF,OAAQ+F,EAAIlF,EAAGkF,KACpBH,OAAK,KAAWA,EAAEN,EAAES,MAAQH,GAAKD,EAAE7F,KAAKwF,EAAES,OAAKT,EAAET,OAAOkB,EAAG,GAAIlF,IAAKkF,IAC1E,OAAOT,GAGT,QAASP,GAAEO,EAAGK,GACZ,GAAIC,EACJ,IAAIF,EAAEC,GAAI,CACR,GAAI9E,GAAI,CACR,KAAK+E,EAAID,EAAE3F,OAAQa,EAAI+E,EAAG/E,IACxB,IAAKkE,EAAEO,EAAGK,EAAE9E,IAAK,OAAO,CAC1B,QAAO,EAET,GAAIkF,GAAIzE,EAAEqE,EAEV,KADA9E,EAAI,EACC+E,EAAIN,EAAEtF,OAAQa,EAAI+E,EAAG/E,IACxB,GAAG,WAAckF,GACf,GAAG,gBAAqBT,GAAEzE,IAAMyE,EAAEzE,GAAGoQ,MAAMtL,GAAI,OAAO,MACjD,IAAIL,EAAEzE,KAAO8E,EAAG,OAAO,CAChC,QAAO,EAGT,QAASM,GAAEX,EAAGK,GACZ,IAAKD,EAAEJ,KAAOI,EAAEC,IAAML,EAAEtF,SAAW2F,EAAE3F,OAAQ,OAAO,CACpDsF,GAAE4L,OACFvL,EAAEuL,MACF,KAAK,GAAItL,GAAI,EAAG/E,EAAIyE,EAAEtF,OAAQ4F,EAAI/E,EAAG+E,IACnC,GAAIN,EAAEM,KAAOD,EAAEC,GAAI,OAAO,CAC5B,QAAO,EAGT,QAASI,GAAEV,GACT,MAAOA,GAAEF,QAAO,aACd,IAGJ,QAASe,GAAEb,GACT,MAAO6L,QAAO7L,GAGhB,QAASgB,GAAEhB,GACT,MAAO8L,oBAAmB9L,GAAGF,QAAO,WAAae,GAAGf,QAAO,MAAQ,OAGrE,QAASzE,GAAE2E,GACT,MAAO,UAASK,EAAGC,GACjB,WAAI,KAAWD,EAAUvB,KAAKiN,OAAO/L,IAAM,IAC3ClB,KAAKiN,OAAO/L,GAAKK,GAAK,KACtBvB,KAAKkN,OAAO1L,GACLxB,OAIX,QAASiB,GAAEC,EAAGK,GACZ,MAAO,UAASC,EAAG/E,GACjB,WAAI,KAAW+E,EAAUxB,KAAKiN,OAAO/L,IAAM,IAC3C,OAASM,IAAMA,GAAK,GAAIA,EAAE2L,OAAO,KAAO5L,IAAMC,EAAIA,EAAE4L,UAAU,KAC9DpN,KAAKiN,OAAO/L,GAAKM,EACjBxB,KAAKkN,OAAOzQ,GACLuD,OAGX,GAAIc,GAAIT,GAAKA,EAAE8L,GACf1P,GAAEiG,QAAU,QACZ,IAAI3B,GAAItE,EAAEiQ,UACRrL,EAAIoL,OAAOC,UAAUzJ,cACvBxG,GAAEwQ,OAAS,WACT,OACEI,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,IAAK,KACLC,KAAM,KACNC,KAAM,KACNC,MAAO,KACPC,SAAU,KACVC,uBAAwBrR,EAAEqR,uBAC1BC,yBAA0BtR,EAAEsR,yBAC5BC,iBAAkBvR,EAAEuR,mBAGxBvR,EAAEqR,wBAAyB,EAC3BrR,EAAEsR,0BAA2B,EAC7BtR,EAAEuR,kBAAmB,EACrBvR,EAAEwR,oBAAsB,uBACxBxR,EAAEyR,eAAiB,iBACnBzR,EAAE0R,oBAAsB,UACxB1R,EAAE2R,eAAiB,uCACnB3R,EAAE4R,eAAiB,0jCACnB5R,EAAE6R,oBAAsB,6OACxB7R,EAAE8R,SACAC,MAAO,yCACPC,IAAK,aACLC,KAAM,oEACNC,OAAQ,8CAEVlS,EAAEmS,cACAC,KAAM,KACNC,MAAO,MACPC,IAAK,KACLC,OAAQ,KACRC,GAAI,KACJC,IAAK,OAEPzS,EAAE0S,eAAgB,OAAS,SAC3B1S,EAAE2S,4BAA8B,qBAChC3S,EAAE4S,eACAnO,EAAG,OACHoO,WAAY,OACZC,KAAM,OACNC,KAAM,OACNC,OAAQ,MACRC,KAAM,SACNC,IAAK,MACLC,KAAM,OACNC,OAAQ,MACRC,MAAO,MACPC,OAAQ,MACRC,MAAO,MACPC,MAAO,MACPC,MAAO,MACPC,MAAO,OAET1T,EAAE2T,gBAAkB,SAASlP,GAC3B,GAAIA,GAAKA,EAAEmP,SAAU,CACnB,GAAI9O,GAAIL,EAAEmP,SAASlQ,aACnB,IAAG,UAAaoB,GAAK,UAAYL,EAAEoP,KAAM,MAAO7T,GAAE4S,cAAc9N,KAGpE9E,EAAEoG,OAASX,EACXzF,EAAEmG,OAAS2N,mBACX9T,EAAE+T,QACA,WACE/T,EAAEoG,OAASkK,OACXtQ,EAAEmG,OAAS6N,UAEfhU,EAAEiU,QAAU,WACVjU,EAAEoG,OAASX,EACXzF,EAAEmG,OAAS2N,oBAEb9T,EAAEkU,YACAC,UACE/N,QACEgO,WAAY,+BACZC,KACEC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,MAGX1O,QACEiO,WAAY,WACZC,KACES,IAAK,MACLC,IAAK,MACLC,IAAK,SAIXC,UACE7O,QACEgO,WAAY,6DACZC,KACEO,MAAO,IACPM,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPT,MAAO,IACPU,MAAO,IACPjB,MAAO,IACPC,MAAO,IACPiB,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPnB,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,OAIbiB,SACExP,QACEgO,WAAY,wCACZC,KACEkB,MAAO,IACPjB,MAAO,IACPkB,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPnB,MAAO,IACPC,MAAO,IACPC,MAAO,IACPC,MAAO,IACPE,MAAO,MAGX1O,QACEiO,WAAY,YACZC,KACES,IAAK,MACLC,IAAK,MACLC,IAAK,MACLa,IAAK,UAKb7V,EAAE8V,YAAc,SAASrR,EAAGK,GAC1B,GAAIC,GAAI/E,EAAEoG,OAAO3B,EAAI,GAErB,YADA,KAAWK,IAAMA,EAAI9E,EAAEuR,kBAChBzM,EAAIC,EAAER,QAAO,OAAS,KAAOQ,GAEtC/E,EAAE+V,YACA,SAAStR,EAAGK,GACVL,GAAK,OACL,KAAWK,IAAMA,EAAI9E,EAAEuR,iBACvB,KACE,MAAOvR,GAAEmG,OAAOrB,EAAIL,EAAEF,QAAO,MAAQ,OAASE,GAC9C,MAAOM,GACP,MAAON,IAGb,IAIEuB,GAJExF,GACA4F,OAAQ,SACRD,OAAQ,UAEP6P,EAAI,SAASvR,EAAGK,GACjB,MAAO,UAASC,GACd,IACE,MAAO/E,GAAE8E,GAAGC,EAAI,IAAIR,QAAQvE,EAAEkU,WAAWzP,GAAGK,GAAGsP,WAAY,SAASrP,GAClE,MAAO/E,GAAEkU,WAAWzP,GAAGK,GAAGuP,IAAItP,KAEhC,MAAOC,GACP,MAAOD,KAIf,KAAKiB,IAAKxF,GAAGR,EAAEgG,EAAI,eAAiBgQ,EAAC,WAAaxV,EAAEwF,IAAKhG,EAAEgG,EAAI,kBAAoBgQ,EAAC,UAAYxV,EAAEwF,GAClGxF,GAAI,SAASiE,EAAGK,EAAGC,GACjB,MAAO,UAASC,GACd,GAAIE,GAAIH,EAAI,SAASN,GACnB,MAAOzE,GAAE8E,GAAG9E,EAAE+E,GAAGN,KACfzE,EAAE8E,EACNE,IAAKA,EAAI,IAAIrB,MAAMc,EACnB,KAAK,GAAIH,GAAI,EAAGvE,EAAIiF,EAAE7F,OAAQmF,EAAIvE,EAAGuE,IAAKU,EAAEV,GAAKY,EAAEF,EAAEV,GACrD,OAAOU,GAAEf,KAAKQ,KAGlBzE,EAAEiW,WAAazV,EAAC,IAAM,qBACtBR,EAAEkW,cAAgB1V,EAAC,IAAM,wBACzBR,EAAEmW,WAAa3V,EAAC,IAAM,oBAAqB,UAC3CR,EAAEoW,cAAgB5V,EAAC,IAAM,uBAAwB,UACjDR,EAAEqW,eAAiBL,EAAC,WAAa,UACjChW,EAAEsW,MAAQ,SAAS7R,EAAGK,GACpBA,IAAMA,GACJuM,uBAAwBrR,EAAEqR,wBAE5B,IAAItM,GAAIN,EAAE/B,QAAO,IAKjB,QAL0B,EAAIqC,IAAMD,EAAEsM,SAAW3M,EAAEkM,UAAU5L,EAAI,IAAM,KAAMN,EAAIA,EAAEkM,UAAU,EAAG5L,IAChGA,EAAIN,EAAE/B,QAAO,MAAS,EAAIqC,IAAMD,EAAEqM,MAChC1M,EAAEkM,UAAU5L,EAAI,IAAM,KAAMN,EAAIA,EAAEkM,UAAU,EAAG5L,IACjD,OAASN,EAAEkM,UAAU,EAAG,IAAM7L,EAAE8L,SAAW,KAAMnM,EAAIA,EAAEkM,UAAU,GAAIlM,EAAIzE,EAAEuW,eAAe9R,EAAGK,KAA4B,GAArBC,EAAIN,EAAE/B,QAAO,QAAkBoC,EAAE8L,SAAWnM,EAAEkM,UAAU,EAAG5L,IAAM,KAAMD,EAAE8L,WAAa9L,EAAE8L,SAASR,MAAMpQ,EAAEwR,qBAAuB1M,EAAE8L,aAAW,GAAS,OAASnM,EAAEkM,UAAU5L,EAAI,EAAGA,EAAI,IAAMN,EAAIA,EAAEkM,UAAU5L,EAAI,GAAIN,EAAIzE,EAAEuW,eAAe9R,EAAGK,KAAOL,EAAIA,EAAEkM,UAAU5L,EAAI,GAAID,EAAEkM,KAAM,IACvXlM,EAAEoM,KAAOzM,EACFK,GAET9E,EAAEwW,UAAY,SAAS/R,EAAGK,GACxBL,IAAMA,EAAI,IACVA,EAAIA,EAAEF,QAAO,MAAQ,IACrB,IAAIQ,GAAIN,EAAE/B,QAAO,IACjB,KAD0B,IAAMqC,IAAMA,EAAIN,EAAEtF,QACzC,MAASsF,EAAEiM,OAAO,GAAI,CACvB,GAAI1L,GACFP,EAAE/B,QAAO,IACXoC,GAAEiM,SAAWtM,EAAEkM,UAAU,EAAG3L,IAAM,KAClCF,EAAEmM,KAAOxM,EAAEkM,UAAU3L,EAAI,EAAGD,IAAM,KAClC,MAAQD,EAAEmM,OAASnM,EAAEmM,KAAO,UACvB,CACL,GAAI/L,GAAIT,EAAE/B,QAAO,IACjBsC,GAAIP,EAAE/B,QAAO,KACbwC,EAAIT,EAAE/B,QAAO,IAAMwC,EAAI,IAAM,IAAMA,KAAO,IAAMF,GAAKE,EAAIF,IAAMF,EAAEiM,SAAWtM,EAAEkM,UAAU,EAAG5L,IAAM,KAAMD,EAAEmM,KAAO,OAASjM,EAAIP,EAAEkM,UAAU,EAAG5L,GAAGpB,MAAK,KAAOmB,EAAEiM,SAAW/L,EAAE,IAAM,KAAMF,EAAEmM,KAAOjM,EAAE,IAAM,MAKzM,MAHAF,GAAEiM,UAAY,MAAQtM,EAAEkM,UAAU5L,GAAG2L,OAAO,KAAO3L,IAAKN,EAAI,IAAMA,GAClEK,EAAEuM,wBAA0BrR,EAAEyW,oBAAoB3R,EAAEiM,SAAUjM,EAAE8L,UAChE9L,EAAEmM,MAAQjR,EAAE0W,gBAAgB5R,EAAEmM,MACvBxM,EAAEkM,UAAU5L,IACjB,KAEJ/E,EAAEuW,eAAiB,SAAS9R,EAAGK,GAE7B,MADAL,GAAIzE,EAAE2W,cAAclS,EAAGK,GAChB9E,EAAEwW,UAAU/R,EAAGK,IAExB9E,EAAE2W,cAAgB,SAASlS,EAAGK,GAC5B,GAAIC,GAAIN,EAAE/B,QAAO,KACfsC,EAAIP,EAAEQ,YAAW,KAAO,EAAIF,EAAIA,EAAIN,EAAEtF,OAAS,EACjD,QADuD,EAAI6F,KAAO,IAAMD,GAAKC,EAAID,IAAMA,EAAIN,EAAEkM,UAAU,EAAG3L,GAAGrB,MAAK,KAAOmB,EAAE+L,SAAW9L,EAAE,GAAK/E,EAAEmG,OAAOpB,EAAE,IAAM,KAAMA,EAAElB,QAASiB,EAAEgM,SAAW/L,EAAE,GAAK/E,EAAEmG,OAAOpB,EAAEd,KAAI,MAAS,KAAMQ,EAAIA,EAAEkM,UAAU3L,EAAI,KAAOF,EAAE+L,SAAW,KAAM/L,EAAEgM,SAAW,MACrRrM,GAETzE,EAAE4W,WAAa,SAASnS,EAAGK,GACzB,IAAKL,EAAG,QAER,MADAA,EAAIA,EAAEF,QAAO,MAAQ,KAAKA,QAAO,cAAgB,KACzC,QACR,KAAK,GACaD,GAAGvE,EADZgF,KAAQC,EAAIP,EAAEd,MAAK,KACxBuB,EAAIF,EAAE7F,OAAc6D,EAAI,EAAGA,EAAIkC,EAAGlC,IAChCsB,EAAIU,EAAEhC,GAAGW,MAAK,KAAO5D,EAAIC,EAAE+V,YAAYzR,EAAET,QAASiB,GAAIR,EAAIA,EAAEnF,OAASa,EAAE+V,YAAYzR,EAAEL,KAAI,KAAOa,GAAK,KAAMF,EAAEuL,KAAKpL,EAAGhF,IACpH,gBAAqBgF,GAAEhF,IAAM,OAASgF,EAAEhF,KAAIgF,EAAEhF,IAAMgF,EAAEhF,KACzDgF,EAAEhF,GAAG4E,KAAKL,IACLS,EAAEhF,GAAKuE,CAChB,OAAOS,IAET/E,EAAEyQ,MAAQ,SAAShM,GACjB,GAAIK,GAAI,EAQR,OAPAL,GAAEmM,WAAa9L,GAAKL,EAAEmM,SAAW,KACjCnM,EAAEuM,MAAQlM,IAAML,EAAEsM,WAAajM,GAAK,MACpCA,GAAK9E,EAAE6W,eAAepS,IAAM,GAC5B,gBAAoBA,GAAEyM,OAAQ,MAASzM,EAAEyM,KAAKR,OAAO,IAAM,gBAAoBjM,GAAEsM,WAAajM,GAAK,KAAMA,GAAKL,EAAEyM,MAChH,gBAAoBzM,GAAE0M,OAAS1M,EAAE0M,QAAUrM,GAAK,IAAML,EAAE0M,OACxD,gBACO1M,GAAE2M,UAAY3M,EAAE2M,WAAatM,GAAK,IAAML,EAAE2M,UAC1CtM,GAET9E,EAAE8W,UAAY,SAASrS,GACrB,GAAIK,GAAI,EACR,OAAIL,GAAEsM,UAAUjM,EAAI9E,EAAE4R,eAAe3S,KAAKwF,EAAEsM,UAAYjM,EAAI,IAAOL,EAAEsM,SAAW,IAAOjM,EAAIL,EAAEsM,SAE7FtM,EAAEwM,OAASnM,GAAK,IAAML,EAAEwM,MACjBnM,GAFK,IAId9E,EAAE6W,eAAiB,SAASpS,GAC1B,MAAOzE,GAAE+W,cAActS,GAAKzE,EAAE8W,UAAUrS,IAE1CzE,EAAE+W,cAAgB,SAAStS,GACzB,GAAIK,GAAI,EAIR,OAHAL,GAAEoM,WAAa/L,GAAK9E,EAAEoG,OAAO3B,EAAEoM,WAC/BpM,EAAEqM,WAAahM,GAAK,IAAM9E,EAAEoG,OAAO3B,EAAEqM,WACrChM,IAAMA,GAAK,KACJA,GAET9E,EAAEgX,WAAa,SAASvS,EAAGK,EAAGC,GAC5B,GACEG,GAAGZ,EADDU,EAAI,EAER,KAAKE,IAAKT,GACR,GAAIG,EAAEuL,KAAK1L,EACPS,IAAMA,EACR,GAAIL,EAAEJ,EAAES,IAAK,CACX,GAAInF,MACAiD,EAAI,CACR,KAAKsB,EAAIG,EAAES,GAAG/F,OAAQ6D,EAAIsB,EAAGtB,QAAK,KAAWyB,EAAES,GAAGlC,QAAM,KAAWjD,EAAE0E,EAAES,GAAGlC,GAAK,MAAQgC,GAAK,IAAMhF,EAAEiX,oBAAoB/R,EAAGT,EAAES,GAAGlC,GAAI+B,IAAI,IAAOD,IAAM/E,EAAE0E,EAAES,GAAGlC,GAAK,KAAM,aAClK,KAAWyB,EAAES,KAAOF,GAAK,IAAMhF,EAAEiX,oBAAoB/R,EAAGT,EAAES,GAAIH,GACzE,OAAOC,GAAE2L,UAAU,IAErB3Q,EAAEiX,oBAAsB,SAASxS,EAAGK,EAAGC,GACrC,MAAO/E,GAAE8V,YAAYrR,EAAGM,IAAM,OAASD,EAAI,IAAM9E,EAAE8V,YAAYhR,EAAGC,GAAK,KAEzE/E,EAAEkX,SAAW,SAASzS,EAAGK,EAAGC,GAC1B,GAAG,gBAAqBD,GACtB,IAAK,GAAIE,KAAKF,GAAGF,EAAEuL,KAAKrL,EAAGE,IAAMhF,EAAEkX,SAASzS,EAAGO,EAAGF,EAAEE,QACjD,CAAA,GAAG,gBAAqBF,GAExB,KAAM,IAAI8K,WAAS,sEAFQ,KAAWnL,EAAEK,GAC3CL,EAAEK,GAAKC,GAAI,gBAAqBN,GAAEK,KAAOL,EAAEK,IAAML,EAAEK,KAAMD,EAAEE,KAAOA,GAAKA,IAAKN,EAAEK,IAAML,EAAEK,QAAUqS,OAAOpS,MAG3G/E,EAAEoX,SAAW,SAAS3S,EAAGK,EAAGC,GAC1B,GAAG,gBAAqBD,GACtB,IAAK,GAAIE,KAAKF,GAAGF,EAAEuL,KAAKrL,EAAGE,IAAMhF,EAAEoX,SAAS3S,EAAGO,EAAGF,EAAEE,QACjD,CAAA,GAAG,gBAAqBF,GACxB,KAAM,IAAI8K,WAAS,iEADQnL,GAAEK,OAAK,KAAWC,EAAI,KAAOA,IAG/D/E,EAAEqX,YAAc,SAAS5S,EAAGK,EAAGC,GAC7B,GAAIC,EACJ,IAAIH,EAAEC,GACJ,IAAKC,EAAI,EAAGC,EAAIF,EAAE3F,OAAQ4F,EAAIC,EAAGD,IAAKN,EAAEK,EAAEC,QACxC,OACC,IAAG,WAActE,EAAEqE,GACtB,IAAKE,IAAKP,GAAGK,EAAE7F,KAAK+F,KAAOP,EAAEO,OAAK,QAC/B,IAAG,gBAAqBF,GAC3B,IAAKE,IAAKF,GAAGF,EAAEuL,KAAKrL,EAAGE,IAAMhF,EAAEqX,YAAY5S,EAAGO,EAAGF,EAAEE,QAChD,CAAA,GAAG,gBAAqBF,GACxB,KAAM,IAAI8K,WAAS,kFADQ,KAAW7K,EAAI,WAAatE,EAAEsE,IAAMF,EAAEJ,EAAEK,KAAOC,EAAE9F,KAAKwF,EAAEK,IAAML,EAAEK,OAAK,GAASL,EAAEK,GAAK/E,EAAE0E,EAAEK,GAAIC,GAAKN,EAAEK,KAAOgB,OAAOf,IAAMF,EAAEE,IAAM,IAAMA,EAAE5F,OAAS0F,EAAEJ,EAAEK,MAAQL,EAAEK,GAAK/E,EAAE0E,EAAEK,GAAIC,IAAMN,EAAEK,OAAK,GAASL,EAAEK,OAAK,KAG3O9E,EAAEsX,SAAW,SAAS7S,EAAGK,EAAGC,EAAGC,GAC7B,OAAQvE,EAAEqE,IACR,IAAK,SACH,KACF,KAAK,SACH,IAAK,GAAII,KAAKT,GACZ,GAAIG,EAAEuL,KAAK1L,EAAGS,IAAMJ,EAAE7F,KAAKiG,SAAO,KAAWH,GAAK/E,EAAEsX,SAAS7S,EAAGS,EAAGH,IAAK,OAAO,CACjF,QAAO,CACT,KAAK,SACH,IAAK,GAAIT,KAAKQ,GACZ,GAAIF,EAAEuL,KAAKrL,EAAGR,KAAOtE,EAAEsX,SAAS7S,EAAGH,EAAGQ,EAAER,IAAK,OAAO,CACtD,QAAO,CACT,SACE,KAAM,IAAIsL,WAAS,uFAEvB,OAAQnP,EAAEsE,IACR,IAAK,YACH,MAAOD,KAAKL,EACd,KAAK,UACH,MAAOA,KAAMI,EAAEJ,EAAEK,KAAOL,EAAEK,GAAG3F,QAAUsF,EAAEK,IAAKC,IAAMN,CACtD,KAAK,WACH,QAASM,EAAEN,EAAEK,GAAIA,EAAGL,EACtB,KAAK,QACH,QAAOI,EAAEJ,EAAEK,MAAOE,EAAId,EAAIkB,GAAGX,EAAEK,GAAIC,EACrC,KAAK,SACH,MAAOF,GAAEJ,EAAEK,MACTE,GAAId,EAAEO,EAAEK,GAAIC,MAAaN,EAAEK,KAAOL,EAAEK,GAAGsL,MAAMrL,GACjD,KAAK,SACHA,EAAIe,OAAOf,EACb,KAAK,SACH,MAAOF,GAAEJ,EAAEK,MAAME,GAAId,EAAEO,EAAEK,GAAIC,GAAUN,EAAEK,KAAOC,CAClD,SACE,KAAM,IAAI6K,WAAS,wGAGzB5P,EAAEuX,UAAY,WACZ,IAAK,GAAI9S,MAAQK,KAAQC,EAAI,EAAGC,EAAI,EAAGA,EAAI2K,UAAUxQ,OAAQ6F,IAAK,CAChE,GAAIE,GAAI,GAAIlF,GAAE2P,UAAU3K,GACxBP,GAAEE,KAAKO,GACPA,EAAIA,EAAEsS,SACN,KAAK,GAAIlT,GAAI,EAAGA,EAAIY,EAAE/F,OAAQmF,IAAK,gBAAoBY,GAAEZ,IAAMQ,EAAEH,KAAKO,EAAEZ,IAAKY,EAAEZ,IAAMS,IAEvF,MAAKD,GAAE3F,QAAW4F,GAClBD,EAAI,GAAK9E,GAAC,IAAMwX,QAAQ1S,GACxB,KAAOL,EAAE,GAAGyM,QAAU,MAAQzM,EAAE,GAAGyM,OAAO3K,MAAM,EAAG,IAAMzB,EAAEoM,KAAI,IAAOpM,EAAEoM,QACjEpM,EAAE2S,aAHmB,GAAIzX,GAAC,KAKnCA,EAAE0X,WAAa,SAASjT,EAAGK,GACzB,GACE9E,GADE+E,EAAI3E,KAAKuX,IAAIlT,EAAEtF,OAAQ2F,EAAE3F,OAE7B,KAAKa,EAAI,EAAGA,EAAI+E,EAAG/E,IACjB,GAAIyE,EAAEiM,OAAO1Q,KAAO8E,EAAE4L,OAAO1Q,GAAI,CAC/BA,GACA,OAEJ,MAAI,GAAIA,EAAUyE,EAAEiM,OAAO,KAAO5L,EAAE4L,OAAO,IAAM,MAAQjM,EAAEiM,OAAO,GAAK,IAAM,IAC1E,MAASjM,EAAEiM,OAAO1Q,IAAM,MAAQ8E,EAAE4L,OAAO1Q,KAAIA,EAAIyE,EAAEkM,UAAU,EAAG3Q,GAAGiF,YAAW,MAC1ER,EAAEkM,UAAU,EAAG3Q,EAAI,KAE5BA,EAAE4X,aAAe,SAASnT,EAAGK,EAAGC,GAC9BA,IAAMA,KACN,IAAIC,GAAID,EAAEgN,OAAS/R,EAAE8R,QAAQC,MAC3B7M,EAAIH,EAAEiN,KAAOhS,EAAE8R,QAAQE,IACvB1N,EAAIS,EAAEkN,MAAQjS,EAAE8R,QAAQG,KACxBlS,EACAgF,EAAEmN,QAAUlS,EAAE8R,QAAQI,OACtBlP,EAAI,mBACN,KAAKgC,EAAE6S,UAAY,IAAK,CACtB,GAAIpU,GAAIuB,EAAE8S,KAAKrT,EACf,KAAKhB,EAAG,KACR,IAAIG,GAAIH,EAAEsU,KACV,IAAIhT,EAAEiT,WAAY,CAChB,GAAI9T,GAAIO,EAAE8B,MAAMnG,KAAK6X,IAAIrU,EAAI,EAAG,GAAIA,EACpC,IAAIM,GAAKlB,EAAE/D,KAAKiF,GAAI,SAEtB,GAAIjB,GAAIW,EAAIa,EAAE8B,MAAM3C,GAAGsU,OAAOhT,EAE9B,KADAhB,EAAIO,EAAE8B,MAAM3C,EAAGX,GACVA,GAAK,IAAK,CACb,GAAInD,GAAIC,EAAE+X,KAAK5T,EACf,KAAKpE,EAAG,KACRmD,GAAI7C,KAAK6X,IAAIhV,EAAGnD,EAAEiY,MAAQjY,EAAE,GAAGX,QAEjC+E,GAAK,EAAIjB,EAAIiB,EAAEqC,MAAM,EAAGtD,GAAKiB,EAAEqC,MAAMtD,GAAGsB,QAAQD,EAAG,IAAMJ,EAAEK,QAAQD,EAAG,IACtEJ,EAAE/E,QAAUsE,EAAE,GAAGtE,QAAU4F,EAAEoT,QAAUpT,EAAEoT,OAAOlZ,KAAKiF,KAAOjB,EAAIW,EAAIM,EAAE/E,OAAQsE,EAAIqB,EAAEZ,EAAGN,EAAGX,EAAGwB,OAAI,KAAWhB,EAAIuB,EAAE6S,UAAY5U,GAAKQ,EAAIqC,OAAOrC,GAAIgB,EAAIA,EAAE8B,MAAM,EAAG3C,GAAKH,EAAIgB,EAAE8B,MAAMtD,GAChL+B,EAAE6S,UAAYjU,EAAIH,EAAEtE,SAGxB,MADA6F,GAAE6S,UAAY,EACPpT,GAETzE,EAAEyW,oBAAsB,SAAShS,EAAGK,GAClC,GAAIC,KAAMN,EACRO,GAAI,CAEN,IADAF,IAAME,EAAId,EAAElE,EAAE0S,cAAe5N,IACzBE,IAAMD,EAAG,KAAM,IAAI6K,WAAS,4CAA+C9K,EAC/E,IAAIL,GAAKA,EAAE2L,MAAMpQ,EAAE2S,6BAA8B,CAC/C,IAAK3P,EAAG,KAAM,IAAI4M,WAAS,aAAgBnL,EAAI,iFAC/C,IAAIzB,EAAEqD,QAAQ5B,GAAG2L,MAAMpQ,EAAE2S,6BAA8B,KAAM,IAAI/C,WAAS,aAAgBnL,EAAI,mDAGlGzE,EAAE0W,gBAAkB,SAASjS,GAC3B,GAAIA,EAAG,CACL,GAAIK,GAAIsT,OAAO3T,EACf,MAAG,WAAcxF,KAAK6F,IAAM,EAAIA,GAAK,MAAQA,GAAI,KAAM,IAAI8K,WAAS,SAAYnL,EAAI,2BAGxFzE,EAAEmE,WAAa,SAASM,GACtB,MAAIA,IAAUA,GACViL,IAAKnM,KAAKY,cACTP,EAAEyU,aAAe,kBAAsBzU,GAAEyU,YAAYlU,aAAeM,EAAE4T,YAAczU,EAAEyU,YAAYlU,cAAeP,EAAEN,MAAQ,kBAAsBM,GAAEN,KAAKa,aAAeM,EAAEnB,KAAOM,EAAEN,KAAKa,cAAeP,EAAE8C,oBAAsB,kBAAsB9C,GAAE8C,mBAAmBvC,aAAeM,EAAEiC,mBAAqB9C,EAAE8C,mBAAmBvC,cACvUM,IACFb,EAAE8L,MAAQnM,OAASK,EAAE8L,IAAMrL,GACpBd,OAETe,EAAEmM,MAAQ,SAAShM,GAGjB,OAFG,IAAQA,EAAGlB,KAAK+U,iBAAkB,OAC5B,KAAW7T,GAAKlB,KAAK+U,mBAAiB/U,KAAKgV,QAAUvY,EAAEyQ,MAAMlN,KAAKiN,QAASjN,KAAK+U,iBAAkB,GACpG/U,MAETe,EAAEkU,MAAQ,WACR,MAAO,IAAIxY,GAAEuD,OAEfe,EAAEmU,QAAUnU,EAAE4L,SAAW,WACvB,MAAO3M,MAAKkN,OAAK,GAAK8H,SAExBjU,EAAEsM,SAAW9Q,EAAC,YACdwE,EAAEuM,SAAW/Q,EAAC,YACdwE,EAAEwM,SAAWhR,EAAC,YACdwE,EAAEyM,SAAWjR,EAAC,YACdwE,EAAE2M,KAAOnR,EAAC,QACVwE,EAAE6M,MAAQ3M,EAAC,QAAU,KACrBF,EAAE8M,SAAW5M,EAAC,WAAa,KAC3BF,EAAE4T,OAAS,SAASzT,EAAGK,GACrB,GAAI9E,GACFuD,KAAK4N,MAAM1M,EAAGK,EAChB,OAAO,gBAAoB9E,IAAKA,EAAEb,OAAS,IAAMa,EAAIA,GAEvDsE,EAAEoU,KAAO,SAASjU,EAAGK,GACnB,GAAI9E,GAAIuD,KAAK6N,SAAS3M,EAAGK,EACzB,OAAO,gBAAoB9E,IAAKA,EAAEb,OAAS,IAAMa,EAAIA,GAEvDsE,EAAE6P,SAAW,SAAS1P,EAAGK,GACvB,OAAI,KAAWL,IAAK,IAAOA,EAAG,CAC5B,GAAIM,GAAIxB,KAAKiN,OAAOU,OAAS3N,KAAKiN,OAAOO,SAAW,IAAM,GAC1D,OAAOtM,IAAKlB,KAAKiN,OAAOQ,IAAMhR,EAAEkW,cAAgBlW,EAAEiW,YAAYlR,GAAKA,EAIrE,MAFAxB,MAAKiN,OAAOU,KAAO3N,KAAKiN,OAAOQ,IAAMvM,EAAIzE,EAAEoW,cAAc3R,GAAK,GAAKA,EAAIzE,EAAEmW,WAAW1R,GAAK,IACzFlB,KAAKkN,OAAO3L,GACLvB,MAETe,EAAE4M,KAAO5M,EAAE6P,SACX7P,EAAEwL,KAAO,SAASrL,EAAGK,GACnB,GAAIC,EACJ,QAAI,KAAWN,EAAG,MAAOlB,MAAK2M,UAC9B3M,MAAKgV,QAAU,GACfhV,KAAKiN,OAASxQ,EAAEwQ,QAChB,IAAIxL,GAAIP,YAAazE,GACnBsE,EAAI,gBAAoBG,KAAMA,EAAEsM,UAAYtM,EAAEyM,MAAQzM,EAAE0P,SAG1D,IAFA1P,EAAEmP,WAAatP,EAAItE,EAAE2T,gBAAgBlP,GAAIA,EAAIA,EAAEH,IAAM,GAAIA,GAAI,IAC5DU,GAAKV,OAAK,KAAWG,EAAE0P,WAAa1P,EAAIA,EAAEyL,YACxC,gBAAqBzL,IAAKA,YAAaqB,QAAQvC,KAAKiN,OAASxQ,EAAEsW,MAAMxQ,OAAOrB,GAAIlB,KAAKiN,YACnF,CAAA,IAAIxL,IAAKV,EAIP,KAAM,IAAIsL,WAAS,gBAHxB5K,GAAIA,EAAIP,EAAE+L,OAAS/L,CACnB,KAAKM,IAAKC,GAAG,UAAYD,GAAKH,EAAEuL,KAAK5M,KAAKiN,OAAQzL,KAAOxB,KAAKiN,OAAOzL,GAAKC,EAAED,GAC5EC,GAAEmM,OAAS5N,KAAK4N,MAAMnM,EAAEmM,OAAO,GAGjC,MADA5N,MAAKkN,OAAO3L,GACLvB,MAETe,EAAEiL,GAAK,SAAS9K,GACd,GAAIK,IAAI,EACNC,GAAI,EACJT,GAAI,EACJY,GAAI,EACJnF,GAAI,EACJiD,GAAI,EACJY,GAAI,EACJM,GAAKX,KAAKiN,OAAOQ,GAEnB,QADAzN,KAAKiN,OAAOO,WAAa7M,GAAI,EAAIa,EAAI/E,EAAE2R,eAAe1S,KAAKsE,KAAKiN,OAAOO,UAAWzM,EAAItE,EAAE4R,eAAe3S,KAAKsE,KAAKiN,OAAOO,UAAWjM,EAAIC,GAAKT,EAAGvE,GAAKmF,GAAKJ,IAAMrB,GAAKA,EAAE6L,IAAI/L,KAAKiN,OAAOO,UAAW/N,EAAIkC,GAAKlF,EAAEyR,eAAexS,KAAKsE,KAAKiN,OAAOO,UAAWnN,EAAIsB,GAAKlF,EAAE0R,oBAAoBzS,KAAKsE,KAAKiN,OAAOO,WAC/RtM,EAAEf,eACR,IAAK,WACH,MAAOQ,EACT,KAAK,WACH,OAAQA,CACV,KAAK,SACL,IAAK,OACH,MAAOgB,EACT,KAAK,MACH,MAAOnF,EACT,KAAK,KACH,MAAO+E,EACT,KAAK,MACL,IAAK,OACL,IAAK,QACH,MAAOC,EACT,KAAK,MACL,IAAK,OACL,IAAK,QACH,MAAOT,EACT,KAAK,MACH,MAAOtB,EACT,KAAK,MACH,OAAQO,KAAKiN,OAAOQ,GACtB,KAAK,MACH,QAASzN,KAAKiN,OAAOQ,GACvB,KAAK,WACH,MAAOpN,GAEX,MAAO,MAET,IAAI+U,GAAIrU,EAAEsM,SACRgI,EAAItU,EAAE2M,KACN4H,EAAIvU,EAAEyM,QACRzM,GAAEsM,SAAW,SAASnM,EAAGK,GACvB,GAAIL,IAAMA,EAAIA,EAAEF,QAAO,YAAc,KAAME,EAAE2L,MAAMpQ,EAAEwR,sBAAuB,KAAM,IAAI5B,WAAS,aAAgBnL,EAAI,4EACnH,OAAOkU,GAAExI,KAAK5M,KAAMkB,EAAGK,IAEzBR,EAAEwU,OAASxU,EAAEsM,SACbtM,EAAE2M,KAAO,SAASxM,EAAGK,GACnB,MAAIvB,MAAKiN,OAAOQ,QAAY,KAC1BvM,EAAI,GAAKlB,UACX,KAAWkB,IAAM,IAAMA,IAAMA,EAAI,MAAOA,IAAMA,GAAK,GAAI,MAAQA,EAAEiM,OAAO,KAAOjM,EAAIA,EAAEkM,UAAU,IAAK3Q,EAAE0W,gBAAgBjS,KAC/GmU,EAAEzI,KAAK5M,KAAMkB,EAAGK,KAEzBR,EAAEyM,SAAW,SAAStM,EAAGK,GACvB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,QAAI,KAAWkB,EAAG,CAChB,GAAIM,IACFsM,uBAAwB9N,KAAKiN,OAAOa,uBAEtC,IAAG,MAASrR,EAAEwW,UAAU/R,EAAGM,GAAI,KAAM,IAAI6K,WAAS,aAAgBnL,EAAI,8CACtEA,GAAIM,EAAEgM,SACNxN,KAAKiN,OAAOa,wBAA0BrR,EAAEyW,oBAAoBhS,EAAGlB,KAAKiN,OAAOI,UAE7E,MAAOiI,GAAE1I,KAAK5M,KACZkB,EAAGK,IAEPR,EAAEyU,OAAS,SAAStU,EAAGK,GACrB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,QAAI,KAAWkB,EAAG,CAChB,GAAIM,GAAIxB,KAAKqN,UACb,OAAOrN,MAAKyV,aAAejU,EAAIA,EAAI,MAAQ,IAAMxB,KAAKyV,YAAc,GAItE,MAFAjU,GAAI/E,EAAEyE,GACNlB,KAAKqN,SAAS7L,EAAE6L,YAAYoI,UAAUjU,EAAEiU,aAAavI,OAAO3L,GACrDvB,MAETe,EAAE2U,KAAO,SAASxU,EAAGK,GACnB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,QAAI,KAAWkB,EAAG,MAAOlB,MAAKiN,OAAOO,SAAW/Q,EAAE8W,UAAUvT,KAAKiN,QAAU,EAC3E,IAAG,MAASxQ,EAAEwW,UAAU/R,EAAGlB,KAAKiN,QAAS,KAAM,IAAIZ,WAAS,aAAgBnL,EAAI,8CAEhF,OADAlB,MAAKkN,OAAO3L,GACLvB,MAETe,EAAE0U,UAAY,SAASvU,EAAGK,GACxB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,QAAI,KAAWkB,EAAG,MAAOlB,MAAKiN,OAAOO,SAAW/Q,EAAE6W,eAAetT,KAAKiN,QAAU;2EAChF,IAAG,MAASxQ,EAAEuW,eAAe9R,EAAGlB,KAAKiN,QAAS,KAAM,IAAIZ,WAAS,aAAgBnL,EAAI,8CAErF,OADAlB,MAAKkN,OAAO3L,GACLvB,MAETe,EAAE4U,SAAW,SAASzU,EAAGK,GACvB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,QAAI,KAAWkB,EAAG,CAChB,GAAIM,GAAI/E,EAAE+W,cAAcxT,KAAKiN,OAC7B,OAAOzL,GAAIA,EAAE4L,UAAU,EAAG5L,EAAE5F,OAAS,GAAK4F,EAM5C,MAJA,MAAQN,EAAEA,EAAEtF,OAAS,KAClBsF,GAAK,KACRzE,EAAE2W,cAAclS,EAAGlB,KAAKiN,QACxBjN,KAAKkN,OAAO3L,GACLvB,MAETe,EAAE6U,SAAW,SAAS1U,EAAGK,GACvB,OAAI,KAAWL,EAAG,MAAOlB,MAAK2N,OAAS3N,KAAK2U,SAAW3U,KAAKmV,MAC5D,IAAI3T,GAAI/E,EAAEsW,MAAM7R,EAKhB,OAJAlB,MAAKiN,OAAOU,KAAOnM,EAAEmM,KACrB3N,KAAKiN,OAAOW,MAAQpM,EAAEoM,MACtB5N,KAAKiN,OAAOY,SAAWrM,EAAEqM,SACzB7N,KAAKkN,OAAO3L,GACLvB,MAETe,EAAE8U,UAAY,SAAS3U,EAAGK,GACxB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,QAAI,KAAWkB,EAAG,CAChB,IAAKlB,KAAKiN,OAAOO,UAAYxN,KAAKgM,GAAE,MAAQ,MAAO,EACnD,IAAIxK,GAAIxB,KAAKiN,OAAOO,SAAS5R,OAASoE,KAAK8V,SAASla,OAAS,CAC7D,OAAOoE,MAAKiN,OAAOO,SAASJ,UAAU,EACpC5L,IAAM,GAMV,GAJAA,EAAIxB,KAAKiN,OAAOO,SAAS5R,OAASoE,KAAK8V,SAASla,OAChD4F,EAAIxB,KAAKiN,OAAOO,SAASJ,UAAU,EAAG5L,GACtCA,EAAI,GAAIuU,QAAM,IAAOvV,EAAEgB,IACvBN,GAAK,MAAQA,EAAEiM,OAAOjM,EAAEtF,OAAS,KAAOsF,GAAK,MACxC,IAAMA,EAAE/B,QAAO,KAAO,KAAM,IAAIkN,WAAS,gCAI9C,OAHAnL,IAAKzE,EAAEyW,oBAAoBhS,EAAGlB,KAAKiN,OAAOI,UAC1CrN,KAAKiN,OAAOO,SAAWxN,KAAKiN,OAAOO,SAASxM,QAAQQ,EAAGN,GACvDlB,KAAKkN,OAAO3L,GACLvB,MAETe,EAAE+U,OAAS,SAAS5U,EAAGK,GACrB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAEhD,IADA,iBAAqBkB,KAAMK,EAAIL,EAAGA,MAAI,QAClC,KAAWA,EAAG,CAChB,IAAKlB,KAAKiN,OAAOO,UACfxN,KAAKgM,GAAE,MAAQ,MAAO,EACxB,IAAIxK,GAAIxB,KAAKiN,OAAOO,SAASX,MAAK,MAClC,OAAIrL,IAAK,EAAIA,EAAE5F,OAAeoE,KAAKiN,OAAOO,UAC1ChM,EAAIxB,KAAKiN,OAAOO,SAAS5R,OAASoE,KAAKgW,IAAIzU,GAAG3F,OAAS,EACvD4F,EAAIxB,KAAKiN,OAAOO,SAAS9L,YAAW,IAAMF,EAAI,GAAK,EAC5CxB,KAAKiN,OAAOO,SAASJ,UAAU5L,IAAM,IAE9C,IAAKN,EAAG,KAAM,IAAImL,WAAS,0BAC3B,KAAK,IAAMnL,EAAE/B,QAAO,KAAO,KAAM,IAAIkN,WAAS,gCAK9C,OAJA5P,GAAEyW,oBAAoBhS,EAAGlB,KAAKiN,OAAOI,WACpCrN,KAAKiN,OAAOO,UAAYxN,KAAKgM,GAAE,MAAShM,KAAKiN,OAAOO,SAAWtM,GAAKM,EAAI,GAAIuU,QAAOvV,EAAER,KAAK8V,UACzF,KAAM9V,KAAKiN,OAAOO,SAAWxN,KAAKiN,OAAOO,SAASxM,QAAQQ,EAAGN,IAC/DlB,KAAKkN,OAAO3L,GACLvB,MAETe,EAAEiV,IAAM,SAAS9U,EAAGK,GAClB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAEhD,IADA,iBAAqBkB,KAAMK,EAAIL,EAAGA,MAAI,QAClC,KAAWA,EAAG,CAChB,IAAKlB,KAAKiN,OAAOO,UAAYxN,KAAKgM,GAAE,MAAQ,MAAO,EACnD,IAAIvP,GAAIuD,KAAKiN,OAAOO,SAAS9L,YAAW,IAExC,OADAjF,GAAIuD,KAAKiN,OAAOO,SAASJ,UAAU3Q,EAAI,IAChC,IAAO8E,GAAKrB,GAAKA,EAAEkD,KAAK3G,EAAE0D,eAAiBD,EAAE+L,IAAIjM,KAAKiN,OAAOO,WAAa/Q,EAAIA,EAEvF,IAAIyE,EASG,KAAM,IAAImL,WAAS,uBARxB,IAAInL,EAAE2L,MAAK,iBACT,CAAA,IAAI3M,IAAKA,EAAE8L,GAAG9K,GAET,KAAM,IAAImL,WAAS,QAAWnL,EAAI,4CAFrBzE,GAAI,GAAIsZ,QAAOvV,EAAER,KAAKgW,OAAS,KAAMhW,KAAKiN,OAAOO,SACjExN,KAAKiN,OAAOO,SAASxM,QAAQvE,EAAGyE,OAEjC,CACH,IAAKlB,KAAKiN,OAAOO,UAAYxN,KAAKgM,GAAE,MAAQ,KAAM,IAAIiK,gBAAc,oCACpExZ,GAAI,GAAIsZ,QAAOvV,EAAER,KAAKgW,OAAS,KAC/BhW,KAAKiN,OAAOO,SAAWxN,KAAKiN,OAAOO,SAASxM,QAAQvE,EAAGyE,GAGzD,MADAlB,MAAKkN,OAAO3L,GACLvB,MAETe,EAAEmV,UAAY,SAAShV,EAAGK,GACxB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,QAAI,KAAWkB,IAAK,IAAOA,EAAG,CAC5B,IAAKlB,KAAKiN,OAAOU,OACd3N,KAAKiN,OAAOO,SAAU,MAAO,EAChC,IAAG,MAASxN,KAAKiN,OAAOU,KAAM,MAAO,GACrC,IAAInM,GAAIxB,KAAKiN,OAAOU,KAAK/R,OAASoE,KAAKmW,WAAWva,OAAS,CAE3D,OADA4F,GAAIxB,KAAKiN,OAAOU,KAAKP,UAAU,EAAG5L,KAAOxB,KAAKiN,OAAOO,SAAW,IAAM,IAC/DtM,EAAIzE,EAAEiW,WAAWlR,GAAKA,EAU/B,MARAA,GAAIxB,KAAKiN,OAAOU,KAAK/R,OAASoE,KAAKmW,WAAWva,OAC9C4F,EAAIxB,KAAKiN,OAAOU,KAAKP,UAAU,EAAG5L,GAClCA,EAAI,GAAIuU,QAAM,IAAOvV,EAAEgB,IACvBxB,KAAKgM,GAAE,cAAiB9K,IAAMA,EAAI,KAAM,MAAQA,EAAEiM,OAAO,KAAOjM,EAAI,IAAMA,IAC1EA,GAAK,MAAQA,EAAEiM,OAAOjM,EAAEtF,OAAS,KAAOsF,GAAK,KAC7CA,EAAIzE,EAAEmW,WAAW1R,GACjBlB,KAAKiN,OAAOU,KAAO3N,KAAKiN,OAAOU,KAAK3M,QAAQQ,EAAGN,GAC/ClB,KAAKkN,OAAO3L,GACLvB,MAETe,EAAEoV,SAAW,SAASjV,EAAGK,GACvB,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,IAAG,gBAAqBkB,GAAG,CACzB,IAAKlB,KAAKiN,OAAOU,MAAQ,MAAQ3N,KAAKiN,OAAOU,KAAM,MAAO,EAC1D,IAAInM,GAAIxB,KAAKiN,OAAOU,KAAKjM,YAAW,IAEpC,OADAF,GAAIxB,KAAKiN,OAAOU,KAAKP,UAAU5L,EAAI,GAC5BN,EAAIzE,EAAE2Z,kBAAkB5U,GAAKA,EAEtCA,GAAI,EACJ,MAAQN,EAAEiM,OAAO,KAAOjM,EAAIA,EAAEkM,UAAU,IACxClM,EAAE2L,MAAK,WAAcrL,GAAI,EACzB,IAAIT,GAAI,GAAIgV,QAAOvV,EAAER,KAAKmW,YAAc,IAIxC,OAHAjV,GAAIzE,EAAEmW,WAAW1R,GACjBlB,KAAKiN,OAAOU,KAAO3N,KAAKiN,OAAOU,KAAK3M,QAAQD,EAAGG,GAC/CM,EAAIxB,KAAKqW,cAAc9U,GAAKvB,KAAKkN,OAAO3L,GACjCvB,MAETe,EAAEuV,OACA,SAASpV,EAAGK,GACV,GAAIvB,KAAKiN,OAAOQ,IAAK,WAAO,KAAWvM,EAAI,GAAKlB,IAChD,QAAI,KAAWkB,IAAK,IAAOA,EAAG,CAC5B,IAAKlB,KAAKiN,OAAOU,MAAQ,MAAQ3N,KAAKiN,OAAOU,KAAM,MAAO,EAC1D,IAAInM,GAAIxB,KAAKmW,WACXpV,EAAIS,EAAEE,YAAW,IACnB,QAAK,IAAMX,EAAU,IACrBS,EAAIA,EAAE4L,UAAUrM,EAAI,GACpBS,EAAI,gBAAgB9F,KAAK8F,GAAKA,EAAI,GAC3BN,EAAIzE,EAAE2Z,kBAAkB5U,GAAKA,GAGtC,GADA,MAAQN,EAAEiM,OAAO,KAAOjM,EAAIA,EAAEkM,UAAU,IACpC5L,EAAIxB,KAAKsW,SAAUvV,EAAIG,EAAI,GAAI6U,QAAOvV,EAAEgB,GAAK,KAAO,GAAIuU,QAAOvV,EAAC,IAAOgB,GAAK,SAC3E,CACH,IAAKN,EAAG,MAAOlB,KACfA,MAAKiN,OAAOU,MAAQ,IAAMlR,EAAEmW,WAAW1R,GAKzC,MAHAH,KAAMG,EAAIzE,EAAEmW,WAAW1R,GAAIlB,KAAKiN,OAAOU,KAAO3N,KAAKiN,OAAOU,KAAK3M,QAAQD,EACrEG,IACFlB,KAAKkN,OAAO3L,GACLvB,MAEXe,EAAEkT,QAAU,SAAS/S,EAAGK,EAAG9E,GACzB,GAAI+E,GAAIxB,KAAKiN,OAAOQ,IAAM,IAAM,IAC9B1M,EAAIf,KAAK2N,OACTnR,EAAI,MAAQuE,EAAEqM,UAAU,EAAG,EAG7B,IAFArM,EAAIA,EAAEX,MAAMoB,OACZ,KAAWN,GAAK,gBAAoBA,KAAMzE,EAAI8E,EAAGA,EAAIL,EAAGA,MAAI,QACxD,KAAWA,GAAK,gBAAoBA,GAAG,KAAMqV,OAAK,gBAAmBrV,EAAI,6BAG7E,IAFA1E,GAAKuE,EAAET,QACP,EAAIY,IAAMA,EAAIrE,KAAK6X,IAAI3T,EAAEnF,OAASsF,EAAG,QACjC,KAAWK,EAAG,WAAO,KAAWL,EAAIH,EAAIA,EAAEG,EAC9C,IAAI,OAASA,OAAK,KAAWH,EAAEG,GAC7B,GAAII,EAAEC,GAAI,CACRR,KACAG,EAAI,CACJ,KAAK,GAAIzB,GAAI8B,EAAE3F,OAAQsF,EAAIzB,EAAGyB,KACxBK,EAAEL,GAAGtF,QAAUmF,EAAEnF,QAAUmF,EAAEA,EAAEnF,OAAS,GAAGA,UAAQmF,EAAEnF,SAAWmF,EAAEA,EAAEnF,OACtE,GAAGA,QAAUmF,EAAER,MAAOQ,EAAEK,KAAKQ,EAAEL,EAAEL,WAEjCK,GAAK,gBAAoBA,MAAGA,EAAIK,EAAEL,GAAI,KAAOR,EAAEA,EAAEnF,OAAS,GAAKmF,EAAEA,EAAEnF,OAAS,GAAK2F,EAAIR,EAAEK,KAAKG,QAE/FA,GAAIR,EAAEG,GAAKU,EAAEL,GAAKR,EAAEN,OAAOS,EAAG,EAEnC,OADA1E,IAAKuE,EAAEyV,QAAO,IACPxW,KAAK2N,KAAK5M,EAAEL,KAAKc,GAAI/E,IAE9BsE,EAAE0V,aAAe,SAASvV,EAAGK,EAAGC,GAC9B,GAAIT,EAEJ,IADA,gBAAoBG,KAAMM,EAAID,EAAGA,EAAIL,EAAGA,MAAI,QACxC,KAAWK,EAAG,CAEhB,GADAL,EAAIlB,KAAKiU,QAAQ/S,EAAGK,EAAGC,GACnBF,EAAEJ,GAAI,CACR,GAAI1E,GAAI,CACR,KAAKuE,EAAIG,EAAEtF,OAAQY,EAAIuE,EAAGvE,IAAK0E,EAAE1E,GAAKC,EAAEmG,OAAO1B,EAAE1E,QAC5C0E,OAAI,KAAWA,EAAIzE,EAAEmG,OAAO1B,OAAK,EACxC,OAAOA,GAET,GAAII,EAAEC,GACJ,IAAK/E,EAAI,EAAGuE,EAAIQ,EAAE3F,OAAQY,EAAIuE,EAAGvE,IAAK+E,EAAE/E,GAAKC,EAAEoG,OAAOtB,EAAE/E,QACrD+E,GAAI,gBAAoBA,IAAKA,YAClCgB,QAAS9F,EAAEoG,OAAOtB,GAAKA,CACvB,OAAOvB,MAAKiU,QAAQ/S,EAAGK,EAAGC,GAE5B,IAAIkV,GAAI3V,EAAE6M,KAkOV,OAjOA7M,GAAE6M,MAAQ,SAAS1M,EAAGK,GACpB,IAAG,IAAQL,EAAG,MAAOzE,GAAE4W,WAAWrT,KAAKiN,OAAOW,MAAO5N,KAAKiN,OAAOe,iBACjE,IAAG,kBAAuB9M,GAAG,CAC3B,GAAIM,GAAI/E,EAAE4W,WAAWrT,KAAKiN,OAAOW,MAAO5N,KAAKiN,OAAOe,kBAClDjN,EAAIG,EAAE0L,KAAK5M,KAAMwB,EAGnB,OAFAxB,MAAKiN,OAAOW,MAAQnR,EAAEgX,WAAW1S,GAAKS,EAAGxB,KAAKiN,OAAOc,yBAA0B/N,KAAKiN,OAAOe,kBAC3FhO,KAAKkN,OAAO3L,GACLvB,KAET,WAAO,KAAWkB,GAAK,gBAAoBA,IAAKlB,KAAKiN,OAAOW,MAAQnR,EAAEgX,WAAWvS,EAAGlB,KAAKiN,OAAOc,yBAC9F/N,KAAKiN,OAAOe,kBAAmBhO,KAAKkN,OAAO3L,GAAIvB,MAAQ0W,EAAE9J,KAAK5M,KAAMkB,EAAGK,IAE3ER,EAAE8S,SAAW,SAAS3S,EAAGK,EAAGC,GAC1B,GAAIT,GAAItE,EAAE4W,WAAWrT,KAAKiN,OAAOW,MAAO5N,KAAKiN,OAAOe,iBACpD,IAAG,gBAAqB9M,IAAKA,YAAaqB,QAAQxB,EAAEG,OAAK,KAAWK,EAAIA,EAAI,SACvE,CAAA,GAAG,gBAAqBL,GAExB,KAAM,IAAImL,WAAS,iEADtB,KAAK,GAAI7P,KAAK0E,GAAGG,EAAEuL,KAAK1L,EAAG1E,KAAOuE,EAAEvE,GAAK0E,EAAE1E,IAM7C,MAJAwD,MAAKiN,OAAOW,MAAQnR,EAAEgX,WAAW1S,EAAGf,KAAKiN,OAAOc,yBAA0B/N,KAAKiN,OAAOe,kBACtF,gBAAoB9M,KACjBM,EAAID,GACPvB,KAAKkN,OAAO1L,GACLxB,MAETe,EAAE4S,SAAW,SAASzS,EAAGK,EAAGC,GAC1B,GAAIT,GAAItE,EAAE4W,WAAWrT,KAAKiN,OAAOW,MAAO5N,KAAKiN,OAAOe,iBAKpD,OAJAvR,GAAEkX,SAAS5S,EAAGG,MAAG,KAAWK,EAAI,KAAOA,GACvCvB,KAAKiN,OAAOW,MAAQnR,EAAEgX,WAAW1S,EAAGf,KAAKiN,OAAOc,yBAA0B/N,KAAKiN,OAAOe,kBACtF,gBAAoB9M,KAAMM,EAAID,GAC9BvB,KAAKkN,OAAO1L,GACLxB,MAETe,EAAE+S,YAAc,SAAS5S,EAAGK,EAAGC,GAC7B,GAAIT,GAAItE,EAAE4W,WAAWrT,KAAKiN,OAAOW,MAAO5N,KAAKiN,OAAOe,iBAMpD,OALAvR,GAAEqX,YAAY/S,EAAGG,EAAGK,GACpBvB,KAAKiN,OAAOW,MAAQnR,EAAEgX,WAAW1S,EAAGf,KAAKiN,OAAOc,yBAC9C/N,KAAKiN,OAAOe,kBACd,gBAAoB9M,KAAMM,EAAID,GAC9BvB,KAAKkN,OAAO1L,GACLxB,MAETe,EAAEgT,SAAW,SAAS7S,EAAGK,EAAGC,GAC1B,GAAIT,GAAItE,EAAE4W,WAAWrT,KAAKiN,OAAOW,MAAO5N,KAAKiN,OAAOe,iBACpD,OAAOvR,GAAEsX,SAAShT,EAAGG,EAAGK,EAAGC,IAE7BT,EAAE4V,UAAY5V,EAAE8S,SAChB9S,EAAE6V,UAAY7V,EAAE4S,SAChB5S,EAAE8V,aAAe9V,EAAE+S,YACnB/S,EAAE+V,UAAY/V,EAAEgT,SAChBhT,EAAEmT,UAAY,WACZ,MAAOlU,MAAKiN,OAAOQ,IAAMzN,KAAK+W,mBAAiB,GAAKV,eAAa,GAAKW,gBAAc,GAAKC,mBAAiB,GAAK/J,QAAUlN,KAAK+W,mBAAiB,GAAKG,mBAAiB,GAAKC,eAAa,GAAKd,eAAa,GAAKW,gBAAc,GAAKC,mBAAiB,GAAK/J,SAEzPnM,EAAEgW,kBAAoB,SAAS7V,GAE7B,MADA,gBAAoBlB,MAAKiN,OAAOI,WAAarN,KAAKiN,OAAOI,SAAWrN,KAAKiN,OAAOI,SAASlN,cAAeH,KAAKkN,OAAOhM,IAC7GlB,MAETe,EAAEmW,kBAAoB,SAAShW,GAE7B,MADAlB,MAAKiN,OAAOO,WAAaxN,KAAKgM,GAAE,QAAWvM,EAAIO,KAAKiN,OAAOO,SAAW/N,EAAEqD,QAAQ9C,KAAKiN,OAAOO,UAAYxN,KAAKgM,GAAE,SAAYtM,IAAMM,KAAKiN,OAAOO,SAAW9N,EAAEO,KAAKD,KAAKiN,OAAOO,WAAYxN,KAAKiN,OAAOO,SAAWxN,KAAKiN,OAAOO,SAASrN,cAAeH,KAAKkN,OAAOhM,IACvPlB,MAETe,EAAEoW,cAAgB,SAASjW,GAGzB,MAFA,gBAAoBlB,MAAKiN,OAAOI,UAC9BrN,KAAKiN,OAAOS,OAASjR,EAAEmS,aAAa5O,KAAKiN,OAAOI,YAAcrN,KAAKiN,OAAOS,KAAO,KAAM1N,KAAKkN,OAAOhM,IAC9FlB,MAETe,EAAEsV,cAAgB,SAASnV,GACzB,GAAIK,GAAIvB,KAAKiN,OAAOU,IACpB,KAAKpM,EAAG,MAAOvB,KACf,IAAIA,KAAKiN,OAAOQ,IAAK,MAAOzN,MAAKiN,OAAOU,KAAOlR,EAAEoW,cAAc7S,KAAKiN,OAAOU,MAAO3N,KAAKkN,OAAOhM,GAAIlB,IAClG,IAAG,MAASA,KAAKiN,OAAOU,KAAM,MAAO3N,KACrCuB,GAAI9E,EAAEmW,WAAWrR,EACjB,IAAIC,GAAI,EACR,IAAG,MAASD,EAAE4L,OAAO,GAAI,CACvB,GAAIpM,IAAI,CACRQ,GAAI,IAAMA,EAMZ,IAJG,QAAWA,EAAEyB,OAAO,IAAM,OAASzB,EAAEyB,OAAO,KAAIzB,GAAK,KACxDA,EAAIA,EAAEP,QAAO,uBAAyB,KAAKA,QAAO,UAAY,KAC9DD,IAAMS,EAAID,EAAE6L,UAAU,GAAGP,MAAK,eAC5B,MAAQrL,EAAIA,EAAE,MACP,CACP,GAAIhF,GAAI+E,EAAEoT,OAAM,eAChB,KAAK,IAAMnY,EAAG,KACT,IAAI,IAAMA,EAAV,CAIL,GAAIiD,GAAI8B,EAAE6L,UAAU,EAAG5Q,GAAGkF,YAAW,MAAS,IAAMjC,IAAMA,EAAIjD,GAC9D+E,EAAIA,EAAE6L,UAAU,EAAG3N,GAAK8B,EAAE6L,UAAU5Q,EAAI,OAJtC+E,GAAIA,EAAE6L,UAAU,GASpB,MAHArM,IAAKf,KAAKgM,GAAE,cAAiBzK,EAAIC,EAAID,EAAE6L,UAAU,IACjDpN,KAAKiN,OAAOU,KAAOpM,EACnBvB,KAAKkN,OAAOhM,GACLlB,MAETe,EAAEqW,kBAAoBrW,EAAEsV,cACxBtV,EAAEiW,eAAiB,SAAS9V,GAG1B,MAFA,gBAAoBlB,MAAKiN,OAAOW,QAAU5N,KAAKiN,OAAOW,MAAMhS,OAASoE,KAAK4N,MAAMnR,EAAE4W,WAAWrT,KAAKiN,OAAOW,MAAO5N,KAAKiN,OAAOe,mBAAqBhO,KAAKiN,OAAOW,MAC3J,KAAM5N,KAAKkN,OAAOhM,IACblB,MAETe,EAAEkW,kBAAoB,SAAS/V,GAE7B,MADAlB,MAAKiN,OAAOY,WAAa7N,KAAKiN,OAAOY,SAAW,KAAM7N,KAAKkN,OAAOhM,IAC3DlB,MAETe,EAAEsW,gBAAkBtW,EAAEiW,eACtBjW,EAAEuW,cAAgBvW,EAAEkW,kBACpBlW,EAAEyP,QAAU,WACV,GAAItP,GAAIzE,EAAEoG,OACRtB,EAAI9E,EAAEmG,MACRnG,GAAEoG,OAASkK,OACXtQ,EAAEmG,OAAS2N,kBACX,KACEvQ,KAAKkU,YACL,QACAzX,EAAEoG,OAAS3B,EAAGzE,EAAEmG,OAASrB,EAE3B,MAAOvB,OAETe,EAAE2P,QAAU,WACV,GAAIxP,GAAIzE,EAAEoG,OACRtB,EAAI9E,EAAEmG,MACRnG,GAAEoG,OAASX,EACXzF,EAAEmG,OAAS6N,QACX,KACEzQ,KAAKkU,YACL,QACAzX,EAAEoG,OAAS3B,EAAGzE,EAAEmG,OAASrB,EAE3B,MAAOvB,OAETe,EAAEwW,SAAW,WACX,GAAIrW,GAAIlB,KAAKiV,OACb/T,GAAEoM,SAAQ,IAAKC,SAAQ,IAAK2G,WAC5B,IAAI3S,GAAI,EAKR,IAJAL,EAAE+L,OAAOI,WAAa9L,GAAKL,EAAE+L,OAAOI,SAAW,OAC/CnM,EAAE+L,OAAOO,WAAatM,EAAE8K,GAAE,aAAgBvM,GAAK8B,GAAK9B,EAAEsD,UAAU7B,EAAE+L,OAAOO,UAAWtM,EAAE+L,OAAOS,OAASnM,GAAK,IAAML,EAAE+L,OAAOS,OAASnM,GAAKL,EAAEwU,QAC1IxU,EAAE+L,OAAOO,UAAYtM,EAAE+L,OAAOU,MAAQ,MAAQzM,EAAE+L,OAAOU,KAAKR,OAAO,KAAO5L,GAAK,KAC/EA,GAAKL,EAAEyM,MAAI,GACPzM,EAAE+L,OAAOW,MAAO,CAClB,IAAK,GAAIpM,GAAI,GAAIT,EAAI,EAAGvE,EAAI0E,EAAE+L,OAAOW,MAAMxN,MAAK,KAAOF,EAAI1D,EAAEZ,OAAQmF,EAAIb,EAAGa,IAAK,CAC/E,GAAIV,IAAK7D,EAAEuE,IAAM,IAAIX,MAAK,IAC1BoB,IAAK,IAAM/E,EAAE+V,YAAYnS,EAAE,GAAIL,KAAKiN,OAAOe,kBAAkBhN,QAAO,KAClE,WACF,KAAWX,EAAE,KAAOmB,GAAK,IAAM/E,EAAE+V,YAAYnS,EAAE,GAAIL,KAAKiN,OAAOe,kBAAkBhN,QAAO,KAAO,QAEjGO,GAAK,IAAMC,EAAE4L,UAAU,GAEzB,MAAO7L,IAAK9E,EAAE+V,YAAYtR,EAAEiU,QAAQ,IAEtCpU,EAAEyL,WAAa,SAAStL,GACtB,GAEEH,GAAGvE,EAFD+E,EAAIvB,KAAKiV,QACXzT,GAAI,WAAa,WAAY,WAAY,WAAY,OAEvD,IAAIxB,KAAKiN,OAAOQ,IAAK,KAAM8I,OAAK,iEAEhC,IADArV,YAAazE,KAAMyE,EAAI,GAAIzE,GAAEyE,IACzBK,EAAE0L,OAAOI,SAAU,MAAO9L,EAE9B,IADAA,EAAE0L,OAAOI,SAAWnM,EAAE+L,OAAOI,SACzBrN,KAAKiN,OAAOO,SAAU,MAAOjM,EACjC,KAAKR,EAAI,EAAGvE,EAAIgF,EAAET,GAAIA,IAAKQ,EAAE0L,OAAOzQ,GAClC0E,EAAE+L,OAAOzQ,EAGX,OAFA+E,GAAE0L,OAAOU,MAAO,OAAUpM,EAAE0L,OAAOU,KAAKP,WAAW,KAAO7L,EAAE0L,OAAOU,MAAQ,KAAM,MAAQpM,EAAEoM,OAAOR,OAAO,KAAO3L,GAAKA,EAAIN,EAAEgV,aAAe1U,EAAI,IAAMN,EAAEyM,OAAOxO,QAAO,KAAQ,IAAM,GAAIoC,EAAE0L,OAAOU,MAAQnM,EAAIA,EAAI,IAAM,IAAMD,EAAE0L,OAAOU,KAAMpM,EAAE8U,mBAAqB9U,EAAE0L,OAAOU,KAAOzM,EAAE+L,OAAOU,KAAMpM,EAAE0L,OAAOW,QAAUrM,EAAE0L,OAAOW,MAAQ1M,EAAE+L,OAAOW,QAC7UrM,EAAE2L,QACK3L,GAETR,EAAEyW,WAAa,SAAStW,GACtB,GAAIK,GAAIvB,KAAKiV,QAAQf,WACrB,IAAI3S,EAAE0L,OAAOQ,IAAK,KAAM8I,OAAK,iEAC7BrV,GAAI,GAAKzE,GAAEyE,GAAIgT,WACf,IAAI1S,GACFD,EAAE0L,OACAlM,EAAIG,EAAE+L,OACNzQ,EAAI+E,EAAEoM,MAEV,IADAzM,EAAIA,EAAEyM,OACH,MAASnR,EAAE2Q,OAAO,GAAI,KAAMoJ,OAAK,0BACpC,IAAG,MAASrV,EAAEiM,OAAO,GAAI,KAAMoJ,OAAK,0DAEpC,OADA/U,GAAE6L,WAAatM,EAAEsM,WAAa7L,EAAE6L,SAAW,MACvC7L,EAAE8L,WAAavM,EAAEuM,UAAY9L,EAAE+L,WAAaxM,EAAEwM,UAAY,OAAS/L,EAAE6L,UAAY,OAAS7L,EAAE8L,UAAY,OAAS9L,EAAE+L,UAAY/L,EAAEgM,WAAazM,EAAEyM,UAAYhM,EAAEkM,OAAS3M,EAAE2M,KACjKnM,EAAE2L,SADqK1L,EAAEgM,SAAW,KAAMhM,EAAEkM,KAAO,KAE3MlR,IAAM0E,GAAUM,EAAEmM,KAAO,GAAIpM,EAAE2L,UACnC1Q,EAAIC,EAAE0X,WAAW3X,EAAG0E,KAEpBH,EAAIA,EAAE4M,KAAKP,UAAU5Q,EAAEZ,QAAQoF,QAAO,UAAY,IAAIA,QAAO,SAAW,OACxEQ,EAAEmM,KAAO5M,EAAIS,EAAEmM,KAAKP,UAAU5Q,EAAEZ,SAAW,KACpC2F,EAAE2L,SAHM3L,EAAE2L,UAKnBnM,EAAE0W,OAAS,SAASvW,GAClB,GAAIK,GAAIvB,KAAKiV,QACXzT,EAAI,GAAI/E,GAAEyE,EACZA,KACA,IAAIH,EAGJ,IAFAQ,EAAE2S,YACF1S,EAAE0S,YACE3S,EAAEoL,aAAenL,EAAEmL,WAAY,OAAO,CAC1C,IAAInQ,GAAI+E,EAAEqM,QACNnO,EAAI+B,EAAEoM,OAGV,IAFArM,EAAEqM,MAAK,IACPpM,EAAEoM,MAAK,IACHrM,EAAEoL,aAAenL,EAAEmL,YAAcnQ,EAAEZ,SAAW6D,EAAE7D,OAAQ,OAAO,CACnE2F,GAAI9E,EAAE4W,WAAW7W,EAAGwD,KAAKiN,OAAOe,kBAChCvO,EAAIhD,EAAE4W,WAAW5T,EAAGO,KAAKiN,OAAOe,iBAChC,KAAKjN,IAAKQ,GACR,GAAIF,EAAEuL,KAAKrL,EACPR,GAAI,CACN,GAAKO,EAAEC,EAAER,KAEF,IAAKc,EAAEN,EAAER,GAAItB,EAAEsB,IAAK,OAAO,MADhC,IAAIQ,EAAER,KAAOtB,EAAEsB,GAAI,OAAO,CAE5BG,GAAEH,IAAK,EAEX,IAAKA,IAAKtB,GACR,GAAI4B,EAAEuL,KAAKnN,EAAGsB,KAAOG,EAAEH,GAAI,OAAO,CACpC,QAAO,GAETA,EAAE+M,uBAAyB,SAAS5M,GAElC,MADAlB,MAAKiN,OAAOa,yBAA2B5M,EAChClB,MAETe,EAAEgN,yBAA2B,SAAS7M,GAEpC,MADAlB,MAAKiN,OAAOc,2BAA6B7M,EAClClB,MAETe,EAAEiN,iBAAmB,SAAS9M,GAE5B,MADAlB,MAAKiN,OAAOe,mBAAqB9M,EAC1BlB,MAEFvD,IAET,SAAUgD,EAAGC,GACX,gBAAoBC,SAAUA,OAAOC,QAAUD,OAAOC,QAAUF,EAAEwM,QAAO,UAAa,kBAAsBrM,SAAUA,OAAOC,IAAMD,QAAM,SAAYH,GAAKD,EAAEqV,YAAcpV,EAAED,EAAE0M,IAAK1M,IAClLO,KAAM,SAASP,EAAGC,GACnB,QAASQ,GAAEzD,GACT,MAAIyD,GAAEwX,OAAOjb,GAAWyD,EAAEwX,OAAOjb,GAC3BuD,eAAgBE,IACtBF,KAAK6Q,WAAapU,EAClByD,EAAEwX,OAAOjb,GAAKuD,KACPA,MAH0B,GAAIE,GAAEzD,GAMzC,QAAS4D,GAAE5D,GACTuD,KAAKpB,KAAOnC,EACZuD,KAAK2X,SAEP,GAAIlb,GAAIiD,GAAKA,EAAEoV,YACbtU,EAAIiM,OAAOC,UAAUzJ,eACrB/F,EAAIgD,EAAEwM,UACNpL,GACEsW,IACEC,OAAQ,GACRC,UAAW,IACXC,OAAO,EACPC,sBAAsB,EACtBnV,OAAQ,UAEVoV,KACEJ,OAAQ,GACRC,UAAW,IACXC,OAAO,EACPC,sBAAsB,EACtBnV,OAAQ,kBAEV4O,KACEoG,OAAQ,IACRC,UAAW,IACXC,OAAO,EACPC,sBAAsB,EACtBnV,OAAQ,kBAEVqV,KACEL,OAAQ,IACRC,UAAW,IACXC,OAAO,EACPC,sBAAsB,EACtBnV,OAAQ,UAEV0O,KACEsG,OAAQ,IACRC,UAAW,IACXC,OAAO,EACPC,sBAAsB,EACtBnV,OAAQ,UAEVsV,KACEN,OAAQ,IACRC,UAAW,IACXC,OAAO,EACPC,sBAAsB,EACtBnV,OAAQ,UAEV2O,KACEqG,OAAQ,IACRC,UAAW,IACXC,OAAO,EACPC,sBAAsB,EACtBnV,OAAQ,UAEVuV,KACEP,OAAQ,IACRC,UAAW,IACXC,OAAO,EACPC,sBAAsB,EACtBnV,OAAQ,UAmJd,OAhJA3C,GAAEwX,UACFxX,EAAEmY,mBAAqB,qCACvBnY,EAAEoY,iBAAmB,yCACrBpY,EAAEqY,sBAAwB,kBAC1BrY,EAAEsY,gBAAkB,gBACpBtY,EAAEuY,OAAS,SAAShc,EAAGgD,EAAGY,GACxB,GAAI7D,GAAI8E,EAAE7E,EAAEic,UACV/X,EAAInE,EAAEub,MAAQ,QAAU,SAC1Btb,GAAIA,EAAEkc,SACN,IACEpc,GAAGiE,EADDd,IAEJ,KAAKc,EAAI,EAAGjE,EAAIE,EAAE+D,GAAIA,IAAK,CACzB,GAAIM,GAAIrB,EAAEwM,IAAI1P,EAAEqc,KAChB,IAAI,IAAM9X,EAAEwP,MAAQjQ,GAAKA,EAAEwY,OAAQ,KAAMtC,OAAK,yCAC5Cha,EAAEqc,KAAO,IACX,IAAI9X,EAAEgY,IAAIld,OAAQ,CAChB,GAAI,EAAIkF,EAAEwP,MAAQ/T,EAAEwc,UAAW,KAAMxC,OAAK,mEAAsEha,EAAEqc,KAAO,IACzHlZ,GAAE0B,KAAKlB,EAAC,SAAYS,GAAGG,EAAGtE,EAAGD,EAAEyc,QAASzc,EAAEyc,SAAWxc,EAAEsb,WAAa,IAAKvb,EAAEwc,UAAWxc,EAAEqc,WACnF9X,GAAEwP,MAAQ5Q,EAAE0B,KAAI,IAEzB,MAAO1B,GAAE9D,OAASY,EAAEqb,OAASnY,EAAEgB,KAAKlE,EAAEsb,WAAa,IAErD5X,EAAE+Y,YAAc,SAASxc,EAAGyD,EAAGG,EAAGX,EAAGc,EAAGc,GACtC,GAAI9E,GAAI,GACNmE,EAAIT,EAAE2C,MACR3C,GAAIA,EAAE8X,oBACN,IAEE3W,GAFEO,GAAKnF,EAAEkE,GAAG/E,OACZmF,EAAI,IAAMtE,EAAE6T,KAAO,GAAK7Q,EAAEkB,GAAGW,GAE3BrE,EAAI,CACR,KAAKoE,EAAI5E,EAAEqc,IAAIld,OAAQqB,EAAIoE,EAAGpE,IAAK,CACjC,GAAIuD,EAAG,CACL,GAAIiC,GAAIhD,EAAEkB,GAAGlE,EAAEqc,IAAI7b,GAAG,GAAGmQ,UAAU,EACjC5M,GACF,KAAM/D,EAAE6T,OAASvP,EAAItB,EAAEkB,GAAGlE,EAAEqc,IAAI7b,GAAG,GAAGmQ,UAAU,EAAG5M,SAC9CoB,IAAKa,EAAIhD,EAAEkB,GAAGlE,EAAEqc,IAAI7b,GAAG,IAAK,IAAMR,EAAE6T,MAAQvP,EAAItB,EAAEkB,GAAGlE,EAAEqc,IAAI7b,GAAG,IAAKR,EAAEkE,GAAGS,MAAML,EAAG0B,KAAOhG,EAAEkE,GAAGS,UAAM,GAAQqB,MAAQA,EAAIhG,EAAEkE,GAAG1D,GAAG,GAAI,IAAMR,EAAE6T,OAASvP,EAAItE,EAAEkE,GAAG1D,GAAG,IACvKT,KAAMA,GAAKkD,GACXW,EAAI7D,GAAKuE,GAAKb,GAAKuC,EAAI,IAAM,IAAMA,GAAKxF,IAAMT,GAAKiD,EAAEkB,GAAGW,IAAMpB,GAAKuC,EAAI,IAAM,KAAM,IAAMhG,EAAE6T,OAAS9T,GAAKuE,EAAI,KAAMvE,GAAKiG,GAE1H,MAAOjG,IAET0D,EAAEgZ,cAAgB,SAASzc,EAAGyD,EAAGG,EAAGX,EAAGc,GACrC,GAAIhE,GAAI,GACNmE,EAAIT,EAAE2C,MACR3C,GAAIA,EAAE8X,oBACN,IACElX,GADEc,GAAKnF,EAAEkE,GAAG/E,OAEVmF,EAAI,CACR,KAAKD,EAAIrE,EAAEqc,IAAIld,OAAQmF,EAAID,EAAGC,IAAK,CACjC,GAAIP,EAAG,GAAIa,GAAI5B,EAAEkB,GAAGlE,EAAEqc,IAAI/X,GAAG,GAAGqM,UAAU,EAAG5M,QACxCoB,IAAKP,EAAI5B,EAAEkB,GAAGlE,EAAEqc,IAAI/X,GAAG,IAC1BtE,EAAEkE,GAAGS,MAAM,IAAM3E,EAAE6T,KAAO7Q,EAAEkB,GAAGlE,EAAEqc,IAAI/X,GAAG,QAAM,GAAQM,KAAOA,EAAI5E,EAAEkE,GAAGI,GAAG,EAE3E,IADAvE,IAAMA,GAAKkD,GACP,IAAMjD,EAAE6T,KAAM,CAEhB9T,GADQgE,EAAIf,EAAEkB,GAAGlE,EAAEqc,IAAI/X,GAAG,GAAGqM,UAAU,EAAG5M,IAAM/D,EAAEkE,GAAGI,GAAG,GAExDvE,EAAI6D,EAAI7D,GAAK0D,GAAKmB,EAAI,IAAM,IAAM7E,EAAI,IAExCA,GAAK6E,EAEP,MAAO7E,IAET0D,EAAEU,WAAa,WAEb,MADAlB,GAAEoV,cAAgB5U,IAAMR,EAAEoV,YAAcrY,GACjCyD,GAEThD,EAAEub,OAAS,SAAShc,EAAGgD,GACrB,GAAIjD,GAAI,EACRwD,MAAKmZ,OAASnZ,KAAKmZ,MAAMvd,QAAUoE,KAAK+S,QACxCtW,YAAa4D,KAAM5D,EAAI,GAAI4D,GAAE5D,GAC7B,KAAK,GAAIkE,GAAI,EAAGjB,EAAIM,KAAKmZ,MAAMvd,OAAQ+E,EAAIjB,EAAGiB,IAAKnE,GAAK,gBAAoBwD,MAAKmZ,MAAMxY,GAAKX,KAAKmZ,MAAMxY,GAAKT,EAAEuY,OAAOzY,KAAKmZ,MAAMxY,GAAIlE,EAAGgD,EACvI,OAAOjD,IAETU,EAAE6V,MAAQ,WACR,GAAItW,GACFuD,KAAK6Q,WACLpR,EAAIS,EAAEmY,mBACNhY,EAAIH,EAAEoY,iBACN5Y,EAAIQ,EAAEqY,sBACN/X,EAAIN,EAAEsY,gBACNtb,KACAX,EAAI,EACJ0E,EAAI,SAASxE,GACX,GAAIA,EAAEoQ,MAAMrM,GAAI,KAAM+V,OAAK,oBAAuB9Z,EAAI,IACtD,OAAOA,GAEX,KAAKgD,EAAE6U,UAAY,IAAK,CACtB,GAAIxT,GAAIrB,EAAE8U,KAAK9X,EACf,IAAI,OAASqE,EAAG,CACd5D,EAAEkE,KAAKH,EAAExE,EAAE2Q,UAAU7Q,IACrB,OAEF,GADOW,EAAEkE,KAAKH,EAAExE,EAAE2Q,UAAU7Q,EAAGuE,EAAE0T,SAAUjY,EAAIuE,EAAE0T,MAAQ1T,EAAE,GAAGlF,QACzD0F,EAAER,EAAE,IAAK,KAAMyV,OAAK,qBAAwBzV,EAAE,GAAK,SAAWA,EAAE,GAAK,IAC1E,KAAKA,EAAE,GAAI,KAAMyV,OAAK,wBAA2BzV,EAAE,GAAK,IAExD,KAAK,GADDC,GAAID,EAAE,GAAGV,MAAK,KACTiB,EAAI,EAAGpE,EAAI8D,EAAEnF,OAAQyF,EAC5BpE,EAAGoE,IAAK,CACR,GAAIoB,GAAI1B,EAAEM,GAAGwL,MAAMxM,EACnB,IAAI,OAASoC,EAAG,KAAM8T,OAAK,qBAAwBxV,EAAEM,GAAK,SAAWP,EAAE,GAAK,IAC5E,IAAI2B,EAAE,GAAGoK,MAAMnN,GAAI,KAAM6W,OAAK,0BAA6B9T,EAAE,GAAK,SAAW3B,EAAE,GAAK,IACpFC,GAAEM,IACAuX,KAAMnW,EAAE,GACRuW,UAAWvW,EAAE,GACbsW,UAAWtW,EAAE,IAAMrG,SAASqG,EAAE,GAAI,KAGtC,IAAK1B,EAAEnF,OAAQ,KAAM2a,OAAK,mCAAsCzV,EAAE,GAAK,IACvE5D,GAAEkE,MACAyP,WAAY/P,EAAE,GACd4X,SAAU5X,EAAE,GACZ6X,UAAW5X,IAKf,MAFA7D,GAAEtB,QAAUsB,EAAEkE,KAAKH,EAAExE,IACrBuD,KAAKmZ,MAAQjc,EACN8C,MAETK,EAAEqM,UAAUT,IAAM,SAASxP,GACzB,GAAIgD,GAAIO,KAAKpB,KACXpC,GACE8T,KAAM,EACNwI,OACAjW,UACAiQ,kBAEJ,QAAI,KAAW9S,KAAK2X,MAAMlb,GAAI,MAAOuD,MAAK2X,MAAMlb,EAGhD,IAFAuD,KAAK2X,MAAMlb,GAAKD,MAEZ,MADJiD,EAAI,sBAAwB8C,OAAOkK,OAAOC,UAAUC,SAASC,KAAKnN,IAAMA,EAAEhD,GAAK,sBAAwB8F,OAAOkK,OAAOC,UAAUC,SAASC,KAAKnN,EAAEhD,KAAOgD,EAAEhD,GAAGA,GAAKgD,EAAEhD,KAC9I,OAASgD,EAC3B,GAAG,mBAAsB8C,OAAOkK,OAAOC,UAAUC,SAASC,KAAKnN,IAAK,CAClE,GAAIS,GAAI,CACR,KAAKzD,EAAIgD,EAAE7D,OAAQsE,EAAIzD,EAAGyD,QAAK,KAAWT,EAAES,IAAM,OAAST,EAAES,IAAM1D,EAAEsc,IAAI1X,UAAM,GAAQmB,OAAO9C,EAAES,KAChG1D,GAAEsc,IAAIld,SAAWY,EAAE8T,KAAO,OACrB,IAAG,oBAAuB/N,OAAOkK,OAAOC,UAAUC,SAASC,KAAKnN,IAAK,CAC5E,IAAKS,IAAKT,GAAGe,EAAEoM,KAAKnN,EAClBS,QAAM,KAAWT,EAAES,IAAM,OAAST,EAAES,IAAM1D,EAAEsc,IAAI1X,MAAMlB,EAAGqC,OAAO9C,EAAES,KACpE1D,GAAEsc,IAAIld,SAAWY,EAAE8T,KAAO,OACrB9T,GAAE8T,KAAO,EAAG9T,EAAEsc,IAAI1X,UAAM,GAAQmB,OAAO9C,IAC9C,OAAOjD,IAETiD,EAAEgZ,OAAS,SAAShc,EAAG4D,GACrB,GAAI7D,GAAI,GAAK0D,GAAEzD,GAAIgc,OAAOpY,EAC1B,OAAO,IAAIZ,GAAEjD,IAER0D,IC/pDTvB,OAAOya,UAAY,SAASrY,EAAGM,EAAG3B,GAChC,QAASuB,GAAEF,GACTtB,EAAE4Z,QAAUtY,EAOd,QAASuY,GAAEvY,EAAGM,GACZ,aAAcN,KAAMM,EAGtB,QAASO,GAAEb,EAAGM,GACZ,UAAO,GAASN,GAAG5B,QAAQkC,GAG7B,QAASkY,GAAExY,EAAGM,GACZ,IAAK,GAAI9E,KAAKwE,GAAG,CACf,GAAI/E,GAAI+E,EAAExE,EACV,KAAKqF,EAAE5F,EAAG,MAAQyD,EAAEzD,KAAO0D,EAAG,MAAY,OAAL2B,GAAarF,EAEpD,OAAO,EAGT,QAASwd,GAAEzY,EAAGM,EAAG9E,GACf,IAAK,GAAIP,KAAK+E,GAAG,CACf,GAAI0Y,GAAIpY,EAAEN,EAAE/E,GACZ,IAAIyd,IAAM/Z,EAAG,OAAa,IAANnD,EAAWwE,EAAE/E,GAAKsd,EAAEG,EAAG,YAAcA,EAAEC,KAAKnd,GAAK8E,GAAKoY,EAE5E,OAAO,EAGT,QAASE,GAAE5Y,EAAGM,EAAG3B,GACf,GAAInD,GAAIwE,EAAEoM,OAAO,GAAGtR,cAAgBkF,EAAEiC,MAAM,GAC1ChH,GAAK+E,EAAI,IAAMS,EAAEd,KAAKnE,EAAI,KAAOA,GAAG6D,MAAK,IAC3C,OAAOkZ,GAAEjY,EAAG,WAAaiY,EAAEjY,EAAG,aAAekY,EAAEvd,EAAGqF,IAAMrF,GAAK+E,EAAI,IAAM0B,EAAE/B,KAAKnE,EAAI,KAAOA,GAAG6D,MAAK,KAAOoZ,EAAExd,EAAGqF,EAAG3B,IAElH,GAiBEwC,GAiBA0X,EAlCErd,EAAI,QACNP,KACAyd,GAAI,EACJI,EAAIxY,EAAEyY,gBACNxY,EAAI,YACJJ,EAAIG,EAAEpC,cAAcqC,GACpB7B,EAAIyB,EAAE6Y,MAEN7Z,EAAI,4BAA4BE,MAAK,KACrCO,EAAI,kBACJa,EAAIb,EAAEP,MAAK,KACXqC,EAAI9B,EAAER,cAAcC,MAAK,KACzBuB,KAGAlF,KACAqE,EAAIrE,EAAEuG,MACHgX,EAAI,SAASjZ,EAAGrB,EAAGnD,EAAGP,GACvB,GAAIyd,GAAGvY,EAAGzB,EAAGgC,EAAGF,EAAIF,EAAEpC,cAAa,OACjCiB,EAAImB,EAAEvC,KACN6B,EAAIT,GAAKmB,EAAEpC,cAAa,OAC1B,IAAI7C,SAASG,EAAG,IACd,KAAOA,KAAKkD,EAAI4B,EAAEpC,cAAa,OAASQ,EAAEoG,GAAK7J,EAAIA,EAAEO,GAAK+E,GAAK/E,EAAI,GAAIgF,EAAEnC,YAAYK,EACvF,OAAOga,IAAI,SAAW,eAAgBnY,EAAG,KAAMP,EAAG,YAAYL,KAAI,IAAMa,EAAEsE,GAAKvE,GAAIpB,EAAIqB,EAAIZ,GAAGsZ,WAAaR,EAAG9Y,EAAEvB,YAAYmC,GAAIrB,IAAMS,EAAEoZ,MAAMG,WAAa,GAAIvZ,EAAEoZ,MAAM5X,SAAW,SAAUV,EAAIoY,EAAEE,MAAM5X,SAAU0X,EAAEE,MAAM5X,SAAW,SAAU0X,EAAEza,YAAYuB,IAAKO,EAAIxB,EAAE6B,EAAGR,GAAIb,EAAIqB,EAAE4Y,WAAWpb,YAAYwC,IAAMZ,EAAEwZ,WAAWpb,YAAY4B,GAAIkZ,EAAEE,MAAM5X,SAAWV,KAAMP,GAE1WlE,EAAI,SAASqE,GACX,GAAI3B,GAAIqB,EAAEqZ,YAAcrZ,EAAEsZ,YAC1B,IAAI3a,EAAG,MAAOA,GAAE2B,IAAM3B,EAAE2B,GAAGiZ,UAAW,CACtC,IAAI/d,EACJ,OAAOyd,GAAC,UAAa3Y,EAAI,OAASC,EAAI,6BAA8B,SAASD,GAC3E9E,EAAqF,aAAhFwE,EAAEwZ,iBAAmBA,iBAAiBlZ,EAAG,MAAQA,EAAEmZ,cAAuB,WAC7Eje,GAENke,KAAOxX,cAIL2W,GAFHN,EAAEmB,EAAG,cAAiBnB,EAAEmB,EAAE7N,KAAM,aAEzB,SAAS7L,EAAGM,GAClB,MAAOA,KAAKN,IAAKuY,EAAEvY,EAAE2Z,YAAYhO,UAAUrL,GAAI,cAHG,SAASN,EAAGM,GAC9D,MAAOoZ,GAAE7N,KAAK7L,EAAGM,IAGhBsZ,SAASjO,UAAUgN,OAASiB,SAASjO,UAAUgN,KAAO,SAASrY,GAChE,GAAI3B,GAAIM,IACR,IAAgB,kBAALN,GAAiB,KAAM,IAAI2M,UACtC,IAAI9P,GAAIuE,EAAE8L,KAAKR,UAAW,GACxBpQ,EAAI,WACF,GAAIgE,eAAgBhE,GAAG,CACrB,GAAI+E,GAAI,YACRA,GAAE2L,UAAYhN,EAAEgN,SAChB,IAAI+M,GAAI,GAAI1Y,GACV8Y,EAAIna,EAAEkb,MAAMnB,EAAGld,EAAEqX,OAAO9S,EAAE8L,KAAKR,YACjC,OAAOK,QAAOoN,KAAOA,EAAIA,EAAIJ,EAE/B,MAAO/Z,GAAEkb,MAAMvZ,EAAG9E,EAAEqX,OAAO9S,EAAE8L,KAAKR,aAEtC,OAAOpQ,KACL2F,EAAEkZ,MAAQ,WACZ,GAAInb,EACJ,OAAO,gBAAkBqB,IAAKA,EAAE+Z,eAAiBzZ,YAAayZ,eAAgBpb,GAAI,EAAKsa,GAAC,WAAc9Z,EAAEQ,KAAI,oBAAsBY,EAAG,IAAK,2CAA2CZ,KAAI,IAAM,SAASK,GACtMrB,EAAoB,IAAhBqB,EAAEga,YACJrb,GACHiC,EAAEqZ,cAAgB,WACnB,MAAOrB,GAAC,kBACPhY,EAAEsZ,gBAAkB,WACrB,GAAIla,KAAM4Y,EAAC,cACX,OAAO5Y,IAAK,qBAAuB8Y,GAAEE,OAASC,EAAC,mGAAqG,SAAS3Y,EAAG3B,GAC9JqB,EAAqB,IAAjBM,EAAE6Z,YAAuC,IAAnB7Z,EAAE8Z,eAC1Bpa,GACHY,EAAEyZ,eAAiB,WACpB,MAAOzB,GAAC,eACPhY,EAAE0Z,aAAe,WAClB,IACE,MAAOC,cAAaC,QAAQja,EAAGA,GAAIga,aAAaE,WAAWla,IAAI,EAC/D,MAAOP,GACP,OAAO,GAGX,KAAK,GAAIc,KAAKF,GAAGiY,EAAEjY,EAAGE,KAAOK,EAAIL,EAAE1B,cAAenE,EAAEkG,GAAKP,EAAEE,KAAMpF,EAAE2E,MAAMpF,EAAEkG,GAAK,GAAK,OAASA,GAC9F,OAAOlG,GAAEyf,QAAU,SAAS1a,EAAGM,GAC7B,GAAgB,gBAALN,GACT,IAAK,GAAIxE,KAAKwE,GAAG6Y,EAAE7Y,EAAGxE,IAAMP,EAAEyf,QAAQlf,EAAGwE,EAAExE,QACxC,CAEH,GADAwE,EAAIA,EAAEZ,cACFnE,EAAE+E,KAAOrB,EAAG,MAAO1D,EACvBqF,GAAgB,kBAALA,GAAkBA,IAAMA,MAAe,KAALoY,GAAoBA,IAAMI,EAAE6B,WAAa,KAAOra,EAAI,GAAK,OAASN,GAAI/E,EAAE+E,GAAKM,EAE5H,MAAOrF,IACNiF,EAAC,IAAMC,EAAQ,KAAMlF,EAAE2f,SAAWpf,EAAGP,EAAE4f,UAAY1b,EAAGlE,EAAE6f,aAAepZ,EAAGzG,EAAE8f,eAAiBta,EAAGxF,EAAE+f,GAAK/e,EAAGhB,EAAEggB,SAAW,SAASjb,GACjI,MAAOwY,IAAGxY,KACT/E,EAAEigB,aAAetC,EAAG3d,EAAEkgB,WAAalC,EAAGH,EAAE6B,UAAY7B,EAAE6B,UAAU1a,QAAO,oBAAsB,SAAWyY,EAAI,OAAShd,EAAEiE,KAAI,KAAQ,IAAK1E,GAC3IgE,KAAMA,KAAKnB,UChIZ,WACC,YAYA,KAXA,GAAIsd,QACAC,KAAO,aACPC,SACF,SAAU,QAAS,QAAS,QAAS,MAAO,SAAU,QACtD,YAAa,QAAS,iBAAkB,WAAY,OAAQ,MAC5D,eAAgB,UAAW,aAAc,QAAS,OAAQ,UAC1D,YAAa,QAAS,QAEpBzgB,OAASygB,QAAQzgB,OACjB0gB,QAAW3d,OAAO2d,QAAU3d,OAAO2d,YAEhC1gB,UACLugB,OAASE,QAAQzgB,QAGZ0gB,QAAQH,UACXG,QAAQH,QAAUC,SCpBxB/c,KAAKC,MAAMid,SAAW,SAASC,QAASC,KACtC,YAIA,QAHkE,KAA/D,IAAQD,QAAQd,UAAY,KAAKvc,QAAO,IAAOsd,IAAM,OACtDD,QAAQd,UAAYc,QAAQd,UAAY,IAAMe,KAEzCD,QAAQd,UAAU1a,QAAO,OAAS,MCL3C3B,KAAKC,MAAMod,aAAe,WACxB,QAAO,SAAWhhB,KAAKihB,UAAUC,YAAcC,WAAWF,UAAUG,WAAW1c,MAAK,QAAS,IAAM,KCDrGf,KAAKC,MAAMyd,SAAW,SAASC,KAC7B,YACA,IAAI,OAASA,KAAO,gBAAoBA,KAAK,MAAOA,IACpD,IAAIC,MAAOD,IAAItC,aACf,KAAK,GAAIwC,QAAQF,KACXA,IAAI/Z,eAAeia,OAAkB,gBAATA,OAAwBD,KACtDC,MAAQF,IAAIE,MAEhB,OAAOD,OCRT5d,KAAKC,MAAM6d,eAAiB,SAASC,SAAUrD,OAC7C,YACA,KAAKlb,SAASwe,YACZ,OAAO,CAGT,IAAqD,IAAjDxe,SAASye,qBAAoB,QAAS1hB,OACxC,OAAO,CAGT,IAAI2hB,YACAC,UACAC,MACAzhB,CAEJ,IAAI6C,SAASwe,YAAYzhB,OAAS,EAChC,IAAKI,EAAI,EAAGA,EAAI6C,SAASwe,YAAYzhB,SAC/BiD,SAASwe,YAAYrhB,GAAG0hB,WAG5BD,MAAQ5e,SAASwe,YAAYrhB,GAAGyhB,MAChCD,gBAAmBC,OAED,WAAdD,UACY,KAAVC,QAA8C,IAA7BA,MAAMte,QAAO,YAChCoe,WAAa1e,SAASwe,YAAYrhB,IAEb,WAAdwhB,YACe,KAApBC,MAAME,YAA4D,IAAvCF,MAAME,UAAUxe,QAAO,YACpDoe,WAAa1e,SAASwe,YAAYrhB,SAIZ,KAAfuhB,aAjBgCvhB,KAuB/C,OAA0B,KAAfuhB,WAA4B,CACrC,GAAIK,mBAAoB/e,SAASI,cAAa,QAK9C,KAJA2e,kBAAkBtN,KAAO,WAEzBzR,SAASye,qBAAoB,QAAS,GAAGle,YAAYwe,mBAEhD5hB,EAAI,EAAGA,EAAI6C,SAASwe,YAAYzhB,OAAQI,IACvC6C,SAASwe,YAAYrhB,GAAG0hB,WAG5BH,WAAa1e,SAASwe,YAAYrhB,GAGpCyhB,OAAQF,WAAWE,MACnBD,gBAAmBC,OAGrB,GAAkB,WAAdD,UAAwB,CAC1B,IAAKxhB,EAAI,EAAGA,EAAIuhB,WAAWM,MAAMjiB,OAAQI,IACvC,GAAIuhB,WAAWM,MAAM7hB,GAAG8hB,aAAa3d,gBAAkBid,SAASjd,cAE9D,YADAod,WAAWM,MAAM7hB,GAAG+d,MAAMV,QAAUU,MAKxCwD,YAAWQ,QAAQX,SAAUrD,WACxB,IAAkB,WAAdyD,UAAwB,CACjC,IAAKxhB,EAAI,EAAGA,EAAIuhB,WAAWS,SAASpiB,OAAQI,IAC1C,GAAIuhB,WAAWS,SAAShiB,GAAG8hB,aAAa3d,gBAAkBid,SAASjd,cAEjE,YADAod,WAAWS,SAAShiB,GAAG+d,MAAMV,QAAUU,MAK3CwD,YAAWU,WAAWb,SAAW,IAAMrD,MAAQ,IAAK,KCnExD1a,KAAKC,MAAM4e,SAAW,SAASC,KAAMC,KAAMC,WACzC,YACA,IAAIC,QACJ,OAAO,YACL,GAAIC,SAAUve,KACZwe,KAAOpS,UACLqS,MAAQ,WACVH,QAAU,KACLD,WAAWF,KAAKvD,MAAM2D,QAASC,OAElCE,QAAUL,YAAcC,OAC5BK,cAAaL,SACbA,QAAUM,WAAWH,MAAOL,MACxBM,SAASP,KAAKvD,MAAM2D,QAASC,QCnBrCnf,KAAKC,MAAMuf,iBAAmB,WAC5B,YACA,UAAG,cAAkBlgB,QAAOge,WAAche,OAAOge,UAAUmC,aCF7Dzf,KAAKC,MAAMyf,YAAc,SAASC,UAAWC,SAAUC,UAErD,YAEA,KAAK,GAAIzF,GAAI,EAAGA,EAAI5a,SAASwe,YAAYzhB,OAAQ6d,IAAK,CACpD,GAAI0F,OAAQtgB,SAASwe,YAAY5D,GAC7BoE,MAAQsB,MAAMnB,SAAWmB,MAAMnB,SAAWmB,MAAMtB,KAEpD,IAAa,MAATA,MAAe,MAAO,MAE1B,KAAK,GAAI7hB,GAAI,EAAGA,EAAI6hB,MAAMjiB,OAAQI,IAChC,GAAI6hB,MAAM7hB,GAAG8hB,eAAiBkB,UAC5B,WAAwB,KAAbE,SACFrB,MAAM7hB,GAAG+d,MAAMkF,UAAYC,SAE3BrB,MAAM7hB,GAAG+d,MAAMkF,UAO9B,MAAO,OCtBT5f,KAAKC,MAAM8f,WAAa,SAASC,KAC/B,YAEA,OAAOA,KAAIC,OAAO,SAAS3e,EAAGY,GAC5B,MAAOZ,GAAIY,IACR8d,IAAIzjB,QCLXyD,KAAKC,MAAMigB,cAAgB,SAAS5P,KAClC,YAEA,IAII6P,WAAW5gB,KAJX6gB,OAAS5gB,SAASI,cAAa,UAC/BygB,IAAMD,OAAOE,WAAU,MACvBC,MAAQH,OAAOG,MAAQjQ,IAAIkQ,aAC3BC,OAASL,OAAOK,OAASnQ,IAAIoQ,cAE7BC,YACFzjB,EAAG,IACHC,EAAG,IACHC,EAAG,IAGLijB,KAAIO,UAAUtQ,IAAK,EAAG,EAEtB,KACE6P,UAAYE,IAAIQ,aAAa,EAAG,EAAGN,MAAOE,QAC1C,MAAO/e,GAEP,MADAub,SAAQ6D,IAAG,6BAA+Bpf,GACnCif,WAGTphB,KAAO4gB,UAAU5gB,IAMjB,KAAK,GAJDrC,GAAI,EACJC,EAAI,EACJC,EAAI,EAECT,EAAI,EAAGyF,EAAI7C,KAAKhD,OAAQI,EAAIyF,EAAGzF,GAAK,EAC3CO,GAAKqC,KAAK5C,GACVQ,GAAKoC,KAAK5C,EAAI,GACdS,GAAKmC,KAAK5C,EAAI,EAOhB,OAJAO,GAAIM,KAAKyF,MAAM/F,GAAKqC,KAAKhD,OAAS,IAClCY,EAAIK,KAAKyF,MAAM9F,GAAKoC,KAAKhD,OAAS,IAClCa,EAAII,KAAKyF,MAAM7F,GAAKmC,KAAKhD,OAAS,KAGhCW,EAAGA,EACHC,EAAGA,EACHC,EAAGA,IC1CP4C,KAAKC,MAAM8gB,iBAAmB,WAC5B,YACA,IAAIC,QAAS1hB,OAAO4b,iBAAiB1b,SAASib,gBAAiB,IAC7DwG,KAAOvkB,MAAM2Q,UAAU1J,MACpB4J,KAAKyT,QACL3f,KAAI,IACJmM,MAAK,sBAA2C,KAAjBwT,OAAOE,QAAgB,GAAK,MAC5D,EAEJ,QACEC,KAFM,kBAAoB3T,MAAM,GAAIkJ,QAAM,IAAOuK,IAAM,IAAK,MAAM,IAGlEG,WAAYH,KACZI,KAAK,IAAOJ,IAAM,KAClBK,IAAKL,IAAI,GAAGzkB,cAAgBykB,IAAI3iB,OAAO,MCb3C0B,KAAKC,MAAMshB,SAAW,SAASpE,QAASC,KACtC,YACA,QAAO,IAAOD,QAAQd,UAAY,KAAKvc,QAAO,IAAOsd,IAAM,MAAQ,GCFrEpd,KAAKC,MAAMuhB,QAAU,SAASxB,KAC5B,YAEA,OAAmB,gBAARA,MACFA,IAAI3E,YAAY/N,WAAWxN,QAAO,UAAa,GCJ1DE,KAAKC,MAAMwhB,SAAW,SAAStE,QAASuE,UAAWC,GAAIC,cAAe1C,SACpE,YAIA,IAFA0C,cAAgBA,mBAEXzE,SAAuB,OAAZA,QAEd,MADAF,SAAQ6D,IAAG,4BAA+B3D,UACnC,CAGT,IAAI3W,IAAK2W,QAAQ3W,EAEjB,KAAKA,IAAoB,IAAd2W,QAAQ3W,GAEjB,GAAI2W,UAAY3d,SAASC,KACvB+G,GAAK,WACA,IAAI2W,UAAY3d,SAASib,gBAC9BjU,GAAK,WACA,CAAA,GAAI2W,UAAY7d,OAIrB,MADA2d,SAAQ6D,IAAG,oDAAsD3D,UAC1D,CAHP3W,IAAK,SAWT,OAJiC,KAAtBob,cAAcpb,MACvBob,cAAcpb,YAG4B,KAAjCob,cAAcpb,IAAIkb,WAE3B,MADAzE,SAAQ6D,IAAG,mCAAsCY,UAAY,OAAQvE,UAC9D,CAIT,IAAKA,QAAQ0E,kBAEN,GAAI1E,QAAQ0E,iBAAkB,CAEnC,GAAIC,UAE+B,KAA/BJ,UAAU5hB,QAAO,UAEnBgiB,UAAY,SAASC,OAEnB,GADAA,MAAMC,iBACuB,IAAzBD,MAAME,QAAQ1lB,OAEhBolB,GAAGI,MAAO7C,aAEV,KAAK,GAAIviB,GAAI,EAAGA,EAAIolB,MAAME,QAAQ1lB,OAAQI,IACxColB,MAAME,QAAQtlB,GAAGulB,UAAYH,MAAMG,UACnCH,MAAME,QAAQtlB,GAAGsU,KAAO8Q,MAAM9Q,KAC9B8Q,MAAME,QAAQtlB,GAAGwlB,gBAAkBJ,MACnCJ,GAAGI,MAAME,QAAQtlB,GAAIuiB,UAM3B/B,QAAQ0E,iBAAiBH,UAAWI,WAAW,KAI/CA,UAAY,SAASC,OACnBJ,GAAGI,MAAO7C,UAGZ/B,QAAQ0E,iBAAiBH,UAAWI,WAAW,IAIjDF,cAAcpb,IAAIkb,WAAaI,eAnC/B3E,SAAQiF,YAAW,KAAQV,UAAWC,KCrC1C3hB,KAAKC,MAAMoiB,YAAc,SAASlF,QAASC,KACzC,YAEA,IAAIkF,QAAS,GAAI5L,QAAM,MAAS0G,IAAM,MAAO,IAI7C,OAHAD,SAAQd,UAAY,IAAMc,QAAQd,UAAY,IAC9Cc,QAAQd,UAAYc,QAAQd,UAAU1a,QAAQ2gB,OAAQ,IAE/CnF,QAAQd,UAAU1a,QAAO,OAAS,MCP3C3B,KAAKC,MAAMsiB,QAAU,SAAS3R,MAAO4R,KACnC,YACA,IAAIC,OAAQ7R,MAAQ4R,GACpB,OAAIC,QAAUD,IAAM,EACX5R,MAAQ6R,MAER7R,MAAQ4R,IAAMC,OCNzBziB,KAAKC,MAAMyiB,gBAAkB,SAASvF,QAASuE,UAAWE,eACxD,YAGA,QAA6B,KAAlBA,cAET,MADA3E,SAAQ6D,IAAG,8BAAgCc,gBACpC,CAGT,IAAIpb,IAAK2W,QAAQ3W,EAEjB,KAAKA,IAAY,IAANA,GAET,GAAI2W,UAAY3d,SAASC,KACvB+G,GAAK,WACA,IAAI2W,UAAY3d,SAASib,gBAC9BjU,GAAK,WACA,CAAA,GAAI2W,UAAY7d,OAIrB,MADA2d,SAAQ6D,IAAG,oDAAsD3D,UAC1D,CAHP3W,IAAK,SAOT,WAA4C,KAAjCob,cAAcpb,IAAIkb,YAC3BvE,QAAQwF,oBAAoBjB,UAAWE,cAAcpb,IAAIkb,YACzDE,cAAcpb,IAAIkb,eAAakB,IACxB,IAEP3F,QAAQ6D,IAAG,wCAA2CY,UAAY,SAAWlb,KACtE,IC7BXxG,KAAKC,MAAM4iB,SAAW,SAAS/D,KAAMC,KAAM+D,SACzC,YAEA,IAII5D,SAASC,KAAM4D,OAJfC,KAAOC,KAAKC,KAAO,WACrB,OAAO,GAAID,OAAOE,WAIhBlE,QAAU,KACVmE,SAAW,CACVN,WAASA,WACd,IAAI1D,OAAQ,WACVgE,UAA+B,IAApBN,QAAQO,QAAoB,EAAIL,OAC3C/D,QAAU,KACV8D,OAASjE,KAAKvD,MAAM2D,QAASC,MACxBF,UAASC,QAAUC,KAAO,MAEjC,OAAO,YACL,GAAI+D,KAAMF,MACLI,YAAgC,IAApBN,QAAQO,UAAmBD,SAAWF,IACvD,IAAII,WAAYvE,MAAQmE,IAAME,SAc9B,OAbAlE,SAAUve,KACVwe,KAAOpS,UACHuW,WAAa,GAAKA,UAAYvE,MAC5BE,UACFK,aAAaL,SACbA,QAAU,MAEZmE,SAAWF,IACXH,OAASjE,KAAKvD,MAAM2D,QAASC,MACxBF,UAASC,QAAUC,KAAO,OACrBF,UAAgC,IAArB6D,QAAQS,WAC7BtE,QAAUM,WAAWH,MAAOkE,YAEvBP,SCpCX/iB,KAAKC,MAAMoP,KAAO,SAASmU,KACzB,YACAA,KAAMA,IAAI7hB,QAAO,qCAAuC,GAGxD,KAFA,GAAIiO,IAAK,KACLjT,EAAI6mB,IAAIjnB,OACLqT,GAAGvT,KAAKmnB,IAAI1V,SAASnR,MAC5B,MAAO6mB,KAAI7f,MAAM,EAAGhH,EAAI,ICN1BqD,KAAKE,QAMHujB,MACE5iB,EAAG,EACHuC,EAAG,GAMLsgB,QACE7iB,EAAG,EACHuC,EAAG,GAMLugB,WAAY,EAKZC,cAAc,EAQdC,sBAAuB,IAQvBC,aAAa,EAQbC,WAAW,EAKXC,oBAAqB,IAOrBC,eAAgB,GAKhBC,oBAGEC,QAAS,GAGTC,WAAY,KAMdC,aAAa,EACbC,oBAAoB,GC9EtBtkB,KAAKE,OAAOqkB,SACVC,sBAAuB,wCCHzBxkB,KAAKE,OAAOukB,UACVC,eAAgB,GAChBC,aAAc,GACdC,gBAAiB,GACjBC,eAAgB,GAChBC,WAAY,EACZC,WAAY,ICJd/kB,KAAKE,OAAO8kB,QAKVC,WAAY,eAGZC,QAAS,OAGTC,SAAU,QAGVC,WAAY,UAGZC,wBAAyB,KAGzBC,oBAAqB,SAGrBC,YAAa,QAGbC,WAAY,OAGZC,iBAAkB,QAGlBC,kBAAmB,SAGnBC,eAAgB,OAGhBC,eAAgB,WAGhBC,cAAe,UAIfC,eAAgB,sBAIhBC,eAAgB,QAGhBC,eAAgB,WAIhBC,GAAI,KACJC,MAAO,QACPC,KAAM,OACNC,KAAM,OAGNC,UAAW,YACXC,SAAU,WAGVC,iBAAkB,aAIlBC,eAAgB,YAChBC,eAAgB,OAChBC,iBAAkB,SAClBC,mBAAoB,YC3EtB3mB,KAAKE,OAAO0mB,iBACVpgB,GAAI,MACJqgB,YAAa,WACbC,QAAS,WACHxnB,OAAOynB,QAAO,sBAChBpmB,KAAKqmB,aAITxgB,GAAI,OACJqgB,YAAa,iBACbC,QAAS,WACPnmB,KAAKsmB,SAAStmB,KAAKT,OAAO8kB,OAAOyB,gBACjC9lB,KAAKV,MAAMid,SAAS1d,SAAS0nB,eAAc,YAAc,SAG3D1gB,GAAI,OACJqgB,YAAa,uBACbC,QAAS,WACHxnB,OAAOynB,QAAO,yBAChBpmB,KAAKwmB,SAASxmB,KAAKT,OAAO8kB,OAAOyB,gBAEnC9lB,KAAKymB,SACHjK,QAAS3d,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SACpDmC,UAAW,OACXC,SAAU,SAId9gB,GAAI,WACJqgB,YAAa,0BACbC,QAAS,eAETtgB,GAAI,OACJqgB,YAAa,kBACbC,QAAS,e3BpCX9mB,KAAKunB,SAAW,SAAStoB,KACvB,YAEA,IAAIuoB,QACJ,KAAIloB,OAAOmoB,eAGT,OAAO,CAFPD,SAAU,GAAIC,gBAKhBD,QAAQE,mBAAqB,WAE3BzK,QAAQ6D,IAAI0G,QAAQG,QAEO,IAAvBH,QAAQI,YAAuC,MAAnBJ,QAAQG,QACtC1K,QAAQ6D,IAAI0G,QAAQK,eAKxBL,QAAQM,KAAI,MAAQ7oB,KAAK,GACzBuoB,QAAQO,Q4BrBV/nB,KAAKonB,QAAU,SAASY,QACtB,YAEA,QACoB,KAAXA,SACNA,OAAO7K,SACoB,gBAArB6K,QAAOX,UAEd,MADApK,SAAQ6D,IAAG,mCAAqCkH,SACzC,CAEsB,iBAApBA,QAAOV,WAChBU,OAAOV,SAAW3mB,KAAKT,OAAOgkB,mBAAmBC,QAOnD,KAAK,GAHD8D,qBACAzP,OAAS,GAEJlX,EAAI,EAAGA,EAAIX,KAAKT,OAAOgoB,gBAAgB7G,IAAI9kB,OAAQ+E,IAE1DkX,OAAS7X,KAAKT,OAAOgoB,gBAAgB7G,IAAI/f,GAEzC2mB,qBAAuBzP,OAAS,4BAChCyP,qBAAuBzP,OAAS,sBAAwBwP,OAAOV,SAAW,MAC1EW,qBAAuBzP,OAAS,kBAAoBwP,OAAOX,UAAY,QAEtC,KAAtBW,OAAOG,aAChBF,qBAAuBzP,OAAS,6BAA+BwP,OAAOI,UAAY,KAGxD,gBAAjBJ,QAAOK,QAChBJ,qBAAuBzP,OAAS,mBAAqBwP,OAAOK,MAAQ,OAGzC,gBAAlBL,QAAOM,SAChBL,qBAAuBzP,OAAS,6BAA+BwP,OAAOM,OAAS,KAG7EhnB,EAAI,EACNX,KAAKV,MAAMwhB,SACTuG,OAAO7K,QACP,eACA,SAAS4E,MAAO7C,SAEdA,QAAQjf,MAAMyiB,gBACZsF,OAAO7K,QACP,eACA+B,QAAQqJ,QAAQC,gBAGlBzG,MAAM0G,OAAO/N,MAAK,kBAAqB,IAEzC/Z,KAAK4nB,QAAQC,eACb7nB,MAGFA,KAAKV,MAAMwhB,SAASuG,OAAO7K,QAASxc,KAAKT,OAAOgoB,gBAAgB9G,UAAU9f,GAAK,eAC7E,SAASygB,MAAO7C,SAEdA,QAAQjf,MAAMyiB,gBACZsF,OAAO7K,QACP4E,MAAM9Q,KACNiO,QAAQqJ,QAAQC,gBAGlBzG,MAAM0G,OAAO/N,MAAMqH,MAAM9Q,KAAKtP,QAAO,MAAQ,SAAW,GAExDud,QAAQjf,MAAMoiB,YAAY2F,OAAO7K,QAAS+B,QAAQhf,OAAO8kB,OAAOc,iBAGlEnlB,KAAK4nB,QAAQC,eACb7nB,KAKNX,MAAKC,MAAMid,SAAS8K,OAAO7K,QAASnd,KAAKE,OAAO8kB,OAAOc;uEACvDkC,OAAO7K,QAAQzC,MAAMV,SAAWiO,qBC7ElCjoB,KAAK0oB,QAAU,SAASC,MACtB,YACAA,MAAOhoB,KAAKioB,OAAOD,OAAS,IAE5B,IAAIE,MAAOloB,KAAK4nB,QAAQO,MAAMnoB,KAAKT,OAAO8kB,OAAOO,YAAc5kB,KAAKT,OAAO8kB,OACtE+D,YACHC,aAAeH,KAAKI,IAAM,IAAMJ,KAAKK,GAEvC,SAAKP,OAIDK,eAAkBL,KAAQ,IAAI,KAAOA,KAAKO,IAAM,GAC3CvoB,KAAKT,OAAO8kB,OAAOiB,GAExB+C,eAAkBL,KAAKM,IAAM,EAAK,IAAON,KAAQ,IAC5ChoB,KAAKT,OAAO8kB,OAAOkB,MAExB8C,eAAkBL,KAAQ,IAAI,KAAOA,KAAKO,IAAM,GAC3CvoB,KAAKT,OAAO8kB,OAAOmB,KAExB6C,eAAkBL,KAAKM,IAAM,EAAK,IAAON,KAAQ,KAC5ChoB,KAAKT,OAAO8kB,OAAOoB,OCtB9BpmB,KAAKmpB,QAAU,SAASR,MACtB,YACAA,MAAOhoB,KAAKioB,OAAOD,QAAS,CAE5B,IAAIE,MAAOloB,KAAK4nB,QAAQO,MAAMnoB,KAAKT,OAAO8kB,OAAOO,YAAc5kB,KAAKT,OAAO8kB,OAAO+D,YAC9EK,YAAc,EACdC,cAAgB,CAEpB,SAAKV,UAIDhoB,KAAKT,OAAO0jB,cACV+E,KAAKM,MAAQJ,KAAKI,KAAON,KAAKO,MAAQL,KAAKK,OAE7CE,YAAeT,KAAKM,IAAMJ,KAAKI,KAAQ,EAAKJ,KAAKK,IAAMP,KAAKO,IAAML,KAAKI,IAAMN,KAAKM,IAClFI,cAAgB7rB,KAAK8rB,IAAIF,aAAe,EAGpB,IAAhBA,aAAuC,IAAlBC,gBAKrBV,KAAKM,MAAQJ,KAAKI,IAEhBG,YAAc,GAGd/oB,EAAGgpB,cACHE,UAAW5oB,KAAKT,OAAO8kB,OAAOmB,OAK9B9lB,EAAGgpB,cACHE,UAAW5oB,KAAKT,OAAO8kB,OAAOiB,IAK9BmD,YAAc,GAGd/oB,EAAGgpB,cACHE,UAAW5oB,KAAKT,OAAO8kB,OAAOkB,QAK9B7lB,EAAGgpB,cACHE,UAAW5oB,KAAKT,OAAO8kB,OAAOoB,UCnD1CpmB,KAAKwpB,SAAW,SAASxB,QACvB,YAMA,KACErnB,KAAK8oB,YACHC,OAAQ,iDAEV,MAAOhoB,GACPub,QAAQ6D,IAAG,2BAA6Bpf,KCZ5C1B,KAAK2pB,cAAgB,WACnB,YAKA,IAFAhpB,KAAKT,OAAO0pB,UAAY5pB,KAAKC,MAAMod,gBAE9B1c,KAAKT,OAAO0pB,UAGf,MAFA3M,SAAQ6D,IAAG,yBACX+I,MAAK,yCACE,CAOTlpB,MAAKT,OAAO4pB,SAAW/P,UAAUyB,MAEjC7a,KAAKV,MAAMid,SAAS1d,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SAC7DvkB,KAAKT,OAAO4pB,SAAWnpB,KAAKT,OAAO8kB,OAAOe,eAAiBplB,KAAKT,OAAO8kB,OAAOgB,gBAQhFrlB,KAAKT,OAAO6pB,kBAAoBhQ,UAAUgC,eAErCpb,KAAKT,OAAO6pB,oBAEf9M,QAAQ6D,IAAG,gCAEXngB,KAAKV,MAAM6d,eACT,IAAMnd,KAAKT,OAAO8kB,OAAOE,QAAU,MACnC,iCAUJvkB,KAAKT,OAAO8pB,gBAAkBjQ,UAAU6B,gBAOxCjb,KAAKT,OAAO+pB,YAAclQ,UAAUiC,aAGpCrb,KAAKT,OAAOgqB,cAAe,EAO3BvpB,KAAKT,OAAOiqB,iBAAmBpQ,UAAU4B,cAOzChb,KAAKT,OAAOkqB,cAAgBzpB,KAAKV,MAAMuf,mBAOvC7e,KAAKT,OAAOgoB,gBAAkBvnB,KAAKV,MAAM8gB,mBAMzCpgB,KAAKT,OAAOmqB,kBAAoB/qB,OAAOgrB,uBClFzCtqB,KAAKuqB,UAAY,WACf,YACA5pB,MAAK4nB,QAAQiC,cCFfxqB,KAAKyqB,YAAc,WACjB,YAIA,IAAIC,WACF/B,KACAO,IAAM,EACND,IAAM,CAEqD,QAAzDzpB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOG,WAE7CuF,UAAYlrB,SAASI,cAAa,OAClC8qB,UAAUC,aAAY,KAAOhqB,KAAKT,OAAO8kB,OAAOG,UAEhD3lB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SAASnlB,YAAY2qB,YAIhElrB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOG,UAAUvK,UAAY,GAWnEja,KAAKT,OAAOujB,KAAKpjB,EAAIM,KAAKT,OAAOujB,KAAK5iB,EAAIF,KAAKT,OAAOujB,KAAKrgB,EAG3DzC,KAAKT,OAAO8kB,OAAO+D,WAAapoB,KAAKT,OAAOujB,KAAKpjB,EAAI,CAIrD,KAAK,GAAI1D,GAAI,EAAGA,EAAIgE,KAAKT,OAAOujB,KAAKpjB,EAAG1D,IAGtCgsB,MACEhsB,EAAGA,EACH6J,GAAI7F,KAAKT,OAAO8kB,OAAOO,YAAc5oB,EACrCssB,IAAKA,IACLC,IAAKA,IACL0B,WAAY3B,IACZ4B,WAAY3B,IACZ4B,KAAOnuB,EAAI,GAAM,EACjBouB,QAAW9B,IAAM,GAAM,EACvB+B,QAAW9B,IAAM,GAAM,GAGzBP,KAAKsC,YAAczrB,SAASI,cAAa,OAEzC+oB,KAAKsC,YAAYN,aAAY,KAAOhqB,KAAKT,OAAO8kB,OAAOO,YAAc5oB,GACrEgsB,KAAKsC,YAAYN,aAAY,WAAahuB,GAC1CgsB,KAAKsC,YAAYN,aAAY,QAAU,SACnChC,KAAY,QAAI,YAAc,aAC9BA,KAAY,QAAI,YAAc,aAC9BA,KAAS,KAAI,QAAU,SACvBhsB,IAAMgE,KAAKT,OAAO8kB,OAAO+D,WAAc,QAAU,IACnD,QAAUE,IACV,QAAUC,KAEZP,KAAKsC,YAAYrQ,UAAY,eAAiBja,KAAKT,OAAO8kB,OAAOS,iBAAmB,iBAAmB9kB,KAAKT,OAAO8kB,OAAOU,kBAAoB,MAAQ/oB,EAAI,GAAK,eAE/JgE,KAAK4nB,QAAQO,MAAMnoB,KAAKT,OAAO8kB,OAAOO,YAAc5oB,GAAKgsB,KAEzDnpB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOG,UAAUplB,YAAY4oB,KAAKsC,eAEtEhC,KACWtoB,KAAKT,OAAOujB,KAAK5iB,IAC1BqoB,MACAD,IAAM,EAIVtoB,MAAKsmB,SAAStmB,KAAKT,OAAO8kB,OAAO0B,mBC7EnC1mB,KAAKkrB,aAAe,WAClB,YAEA,IAAIvC,MAAOhoB,KAAKioB,OAAOjoB,KAAK4nB,QAAQ4C,cAChCC,WAAY,EACZC,WAAa,CAEjB,KAAK1C,KACH,OAAO,CAUT,IAPA1L,QAAQ6D,IAAG,gBACXngB,KAAK4nB,QAAQ4C,aAAe,KAC5BxqB,KAAKV,MAAMoiB,YAAYsG,KAAKsC,YAAatqB,KAAKT,OAAO8kB,OAAOY,gBAC5DjlB,KAAKV,MAAMoiB,YAAYsG,KAAKsC,YAAatqB,KAAKT,OAAO8kB,OAAOa,eAC5DllB,KAAK4nB,QAAQ+C,UAAW,EACxB3qB,KAAK4qB,QAAO,gBAEoB,KAArB5C,KAAK6C,YACd,OAAO,CAKT,IAA8C,OAA1C7C,KAAK6C,YAAYC,KAAK5L,SAAS6L,OAAiB,CAIlD,GAFAzO,QAAQ6D,IAAG,4BAEPngB,KAAKT,OAAO0jB,cAAkB+E,KAAKQ,UAErClM,QAAQ6D,IAAG,iEAEPngB,KAAKV,MAAMuhB,QAAQmH,KAAKQ,QAAQL,QAAQ,CAE1C7L,QAAQ6D,IAAG,QAAW6H,KAAKniB,GAAK,aAAemiB,KAAKQ,QAAQL,MAAMvsB,OAAS,eAE3E,KAAK,GAAII,GAAIgsB,KAAKQ,QAAQL,MAAMvsB,OAAQI,EAAI,EAAGA,IACxCgsB,KAAKQ,QAAQL,MAAM,GAAG6C,SACzBP,UAAYzqB,KAAKirB,SACfjD,KAAKQ,QAAQL,MAAMnsB,EAAI,IACrBkvB,aAAa,EACbC,OAAO,EACPC,SAAS,IAGTX,WACFC,aACApO,QAAQ6D,IAAG,cAAiB6H,KAAKQ,QAAQL,MAAMnsB,EAAI,GAAG6J,KAEtDyW,QAAQ6D,IAAG,wBAA2B6H,KAAKQ,QAAQL,MAAMnsB,EAAI,GAAG6J,GAAK,MAS/EyW,QAAQ6D,IAAG,4FAGRtjB,KAAK8rB,IAAIX,KAAK6C,YAAYC,KAAK5L,SAAS6L,OAAS/C,KAAKqD,YAAYP,KAAKC,SAAW/qB,KAAKR,QAAQ8rB,UAAYtrB,KAAKT,OAAO2jB,uBACvHrmB,KAAK8rB,IAAIX,KAAK6C,YAAYU,IAAIrM,SAAS6L,OAAS/C,KAAKqD,YAAYE,IAAIR,SAAW/qB,KAAKR,QAAQgsB,WAAaxrB,KAAKT,OAAO2jB,uBAGvH5G,QAAQ6D,IAAG,0BAEXsK,UAAYzqB,KAAKirB,SACfjD,MACEkD,aAAa,EACbC,OAAO,EACPC,SAAS,IAGTX,WACFC,aACApO,QAAQ6D,IAAG,cAAiB6H,KAAKniB,KAEjCyW,QAAQ6D,IAAG,sBAAyB6H,KAAKniB,GAAK,MAIhDyW,QAAQ6D,IAAG,4BASb,IAFA7D,QAAQ6D,IAAG,mCAEPngB,KAAKT,OAAO4jB,cAEV6E,KAAKD,SAAY/nB,KAAKT,OAAO0jB,cAAkB+E,KAAKQ,SAAU,CAEhE,GAAIxoB,KAAKV,MAAMuhB,QAAQmH,KAAKQ,QAAQL,OAAQ,CAE1C7L,QAAQ6D,IAAG,oEAAuE6H,KAAKniB,GAAK,aAAemiB,KAAKQ,QAAQL,MAAMvsB,OAAS,eAEvI,KAAK,GAAII,GAAIgsB,KAAKQ,QAAQL,MAAMvsB,OAAQI,EAAI,EAAGA,IAC7CyuB,UAAYzqB,KAAKirB,SACfjD,KAAKQ,QAAQL,MAAMnsB,EAAI,IACrBkvB,aAAa,EACbC,OAAO,EACPC,SAAS,IAGTX,WACFC,aACApO,QAAQ6D,IAAG,cAAiB6H,KAAKQ,QAAQL,MAAMnsB,EAAI,GAAG6J,KAEtDyW,QAAQ6D,IAAG,sBAAyB6H,KAAKQ,QAAQL,MAAMnsB,EAAI,GAAG6J,GAAK,KAMzE4kB,UAAYzqB,KAAKirB,SACfjD,MACEkD,aAAa,EACbC,OAAO,EACPC,SAAS,IAGTX,WACFC,aACApO,QAAQ6D,IAAG,cAAiB6H,KAAKniB,KAEjCyW,QAAQ6D,IAAG,sBAAyB6H,KAAKniB,GAAK,KAUtDyW,QAAQ6D,IAAG,gBAAmBuK,YAE9B1qB,KAAKorB,SACH9E,WAAYoE,cC7IhBrrB,KAAKosB,SAAW,SAASrK,OACvB,YAEA,KAAKphB,KAAK4nB,QAAQ8D,QAEhB,MADA1rB,MAAKuqB,gBACE,CAGT,IACE3B,WACA+C,QACAC,QACAC,UACAC,gBAEAnrB,EAPEqnB,KAAOhoB,KAAKioB,OAAOjoB,KAAK4nB,QAAQ4C,cAMlClD,oBAAsB,EAGxB,KAAKU,OACCA,KAAKD,UAAYC,KAAKQ,QAAQ9oB,OACV,KAAhBsoB,KAAK+D,YACgB,KAArB/D,KAAK6C,YAGb,MADA7qB,MAAKuqB,gBACE,CAuBT,IApBAoB,QAAUvK,MAAM4K,MAAQhsB,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQsrB,KAAO9C,KAAK+D,OAAOjB,KACzFc,QAAUxK,MAAM6K,MAAQjsB,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQ+rB,IAAMvD,KAAK+D,OAAOR,IAExF3C,UAAa5oB,KAAKT,OAAO0jB,cAAgB+E,KAAKQ,QAAWR,KAAKQ,QAAQI,UAAYZ,KAAKD,QAEnF6D,QAAU5D,KAAK6C,YAAYU,IAAInX,IAAI2W,SACrCa,QAAU5D,KAAK6C,YAAYU,IAAInX,IAAI2W,QAEjCa,QAAU5D,KAAK6C,YAAYU,IAAI7W,IAAIqW,SACrCa,QAAU5D,KAAK6C,YAAYU,IAAI7W,IAAIqW,QAEjCY,QAAU3D,KAAK6C,YAAYC,KAAK1W,IAAI2W,SACtCY,QAAU3D,KAAK6C,YAAYC,KAAK1W,IAAI2W,QAElCY,QAAU3D,KAAK6C,YAAYC,KAAKpW,IAAIqW,SACtCY,QAAU3D,KAAK6C,YAAYC,KAAKpW,IAAIqW,QAMpC3J,MAAM4K,MAAQhsB,KAAKR,QAAQsrB,KAAO9qB,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQ8rB,UAAatrB,KAAKT,OAAqB,eAAIosB,SAC3HvK,MAAM4K,MAAQhsB,KAAKR,QAAQsrB,KAAO9qB,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQ8rB,WAAa,EAAItrB,KAAKT,OAAO+jB,gBAAkBqI,SAC/HvK,MAAM6K,MAAQjsB,KAAKR,QAAQ+rB,IAAMvrB,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQgsB,WAAcxrB,KAAKT,OAAqB,eAAIqsB,SAC3HxK,MAAM6K,MAAQjsB,KAAKR,QAAQ+rB,IAAMvrB,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQgsB,YAAc,EAAIxrB,KAAKT,OAAO+jB,gBAAkBsI,QAQ/H,MALA5rB,MAAK4qB,QAAO,QACZ5qB,KAAKuqB,gBAIE,CAGT,IAAI1S,QAAS,EAEb,QAAQ+Q,WAEN,IAAK5oB,MAAKT,OAAO8kB,OAAOoB,KACxB,IAAKzlB,MAAKT,OAAO8kB,OAAOkB,MAStB,IAPAyC,KAAK6C,YAAYU,IAAIrM,SAAS6L,OAAS/C,KAAKqD,YAAYE,IAAIR,OAC5D/C,KAAK6C,YAAYC,KAAK5L,SAAS6L,OAASY,QAExC3D,KAAK6C,YAAYC,KAAK5L,SAASgN,QAAoB,IAAVP,QAAgBtsB,KAAKG,QAAQ8rB,UAIjE3qB,EAAI,EAAGA,EAAIX,KAAKT,OAAOgoB,gBAAgB7G,IAAI9kB,OAAQ+E,IACtDkX,OAAS7X,KAAKT,OAAOgoB,gBAAgB7G,IAAI/f,GACzC2mB,qBAAuBzP,OAAS,sBAAwB7X,KAAKR,QAAQ2sB,oBAAoB,GAAK,IAAMnE,KAAK6C,YAAYC,KAAK5L,SAASgN,QAAU,KAAOlE,KAAKqD,YAAYE,IAAIW,QAAU,IAAMlsB,KAAKR,QAAQ2sB,oBAAoB,GAAK,MAAQtU,OAAS,mBAElP,MAGF,KAAK7X,MAAKT,OAAO8kB,OAAOiB,GACxB,IAAKtlB,MAAKT,OAAO8kB,OAAOmB,KAQtB,IANAwC,KAAK6C,YAAYU,IAAIrM,SAAS6L,OAASa,QACvC5D,KAAK6C,YAAYC,KAAK5L,SAAS6L,OAAS/C,KAAKqD,YAAYP,KAAKC,OAE9D/C,KAAK6C,YAAYU,IAAIrM,SAASgN,QAAoB,IAAVN,QAAgB5rB,KAAKR,QAAQgsB,WAGhE7qB,EAAI,EAAGA,EAAIX,KAAKT,OAAOgoB,gBAAgB7G,IAAI9kB,OAAQ+E,IACtDkX,OAAS7X,KAAKT,OAAOgoB,gBAAgB7G,IAAI/f,GACzC2mB,qBAAuBzP,OAAS,sBAAwB7X,KAAKR,QAAQ2sB,oBAAoB,GAAK,IAAMnE,KAAKqD,YAAYP,KAAKoB,QAAU,KAAOlE,KAAK6C,YAAYU,IAAIrM,SAASgN,QAAU,IAAM7sB,KAAKG,QAAQ2sB,oBAAoB,GAAK,MAAQtU,OAAS,oBAatP,GAPM7X,KAAKT,OAAOmqB,iBAChB1pB,KAAKosB,cAAcpE,KAAMV,qBACzB3oB,OAAOgrB,sBAAsBtqB,KAAKgtB,oBAElCrE,KAAKsC,YAAYvQ,MAAMV,QAAUiO,oBAG9BtnB,KAAKT,OAAO0jB,kBAA8C,KAAvB+E,KAAKQ,QAAQL,MAIrD,IAAK,GAAInsB,GAAI,EAAGA,EAAIgsB,KAAKQ,QAAQL,MAAMvsB,OAAQI,IAAK,CAKlD,OAHA6vB,UAAY7D,KAAKQ,QAAQL,MAAMnsB,GAC/B6b,OAAS,GAED+Q,WACN,IAAK5oB,MAAKT,OAAO8kB,OAAOiB,GAKtB,MAHAwG,gBAAmB9D,KAAK6C,YAAYU,IAAIrM,SAAS6L,OAAU/qB,KAAKR,QAC7DgsB,YAAcxvB,EAAI,IAGDgsB,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,KACX,MAA7BsT,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,KAGtB,OAAO,CAKT,KAPEsT,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,IAAMoX,gBAOzBnrB,EAAI,EAAGA,EAAIX,KAAKT,OAAOgoB,gBAAgB7G,IAAI9kB,OAAQ+E,IACtDkX,OAAS7X,KAAKT,OAAOgoB,gBAAgB7G,IAAI/f,GACzC2mB,qBAAuBzP,OAAS,sBAAwB7X,KAAKR,QAC1D2sB,oBAAoB,GAAK,IAAMnE,KAAKqD,YAAYP,KAAKoB,QACtD,KAAOJ,gBAAkB,KAAO9rB,KAAKR,QAAQ2sB,oBAC3C,GAAK,MAAQtU,OAAS,mBAG5B,MAEF,KAAK7X,MAAKT,OAAO8kB,OAAOkB,MAKtB,MAHAuG,gBAAmB9D,KAAK6C,YAAYC,KAAK5L,SAAS6L,OAE9C/qB,KAAKR,QAAQ8rB,WAAatvB,EAAI,IACZgsB,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,KACzB,MADgCsT,KAAKQ,QACrDL,MAAMnsB,GAAG0Y,KAGV,OAAO,CAIT,KANEsT,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,IAAMoX,gBAMzBnrB,EAAI,EAAGA,EAAIX,KAAKT,OAAOgoB,gBAAgB7G,IAAI9kB,OAAQ+E,IACtDkX,OAAS7X,KAAKT,OAAOgoB,gBAAgB7G,IAAI/f,GACzC2mB,qBAAuBzP,OAAS,sBAC9B7X,KAAKR,QACJ2sB,oBAAoB,GAAK,IAAML,gBAAkB,MAClD9D,KAAKqD,YAAYE,IAAIW,QAAU,IAAMlsB,KAAKR,QAAQ2sB,oBAChD,GAAK,MAAQtU,OAAS,mBAE5B,MAEF,KAAK7X,MAAKT,OAAO8kB,OAAOmB,KAKtB,MAHAsG,gBAAmB9D,KAAK6C,YAAYU,IAAIrM,SAAS6L,OAC/C1rB,KACCG,QAAQgsB,YAAcxvB,EAAI,IACPgsB,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,KACzB,MADgCsT,KAAKQ,QACrDL,MAAMnsB,GAAG0Y,KAGV,OAAO,CAIT,KANEsT,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,IAAMoX,gBAMzBnrB,EAAI,EAAGA,EAAIX,KAAKT,OAAOgoB,gBAAgB7G,IAAI9kB,OAAQ+E,IACtDkX,OAAS7X,KAAKT,OAAOgoB,gBAAgB7G,IAAI/f,GACzC2mB,qBAAuBzP,OAAS,sBAC9B7X,KAAKR,QACJ2sB,oBAAoB,GAAK,IAAMnE,KAAKqD,YAAYP,KAAKoB,QACtD,KAAOJ,gBAAkB,KAAO9rB,KAAKR,QAAQ2sB,oBAC3C,GAAK,MAAQtU,OAAS,mBAI5B,MAEF,KAAK7X,MAAKT,OAAO8kB,OAAOoB,KAKtB,MAHAqG,gBAAmB9D,KAAK6C,YAAYC,KAAK5L,SAAS6L,OAE9C/qB,KAAKR,QAAQ8rB,WAAatvB,EAAI,IACZgsB,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,KACzB,MADgCsT,KAAKQ,QACrDL,MAAMnsB,GAAG0Y,KAGV,OAAO,CAIT,KANEsT,KAAKQ,QAAQL,MAAMnsB,GAAG0Y,IAAMoX,gBAMzBnrB,EAAI,EAAGA,EAAIX,KAAKT,OAAOgoB,gBAAgB7G,IAAI9kB,OAAQ+E,IACtDkX,OAAS7X,KAAKT,OAAOgoB,gBAAgB7G,IAAI/f,GACzC2mB,qBAAuBzP,OAAS,sBAC9B7X,KAAKR,QACJ2sB,oBAAoB,GAAK,IAAML,gBAAkB,MAClD9D,KAAKqD,YAAYE,IAAIW,QAAU,IAAMlsB,KAAKR,QAAQ2sB,oBAChD,GAAK,MAAQtU,OAAS,oBAO1B7X,KAAKT,OAAOmqB,iBAChB1pB,KAAKosB,cAAcP,UAAWvE,qBAC9B3oB,OAAOgrB,sBAAsBtqB,KAAKgtB,oBAElCR,UAAUvB,YAAYvQ,MAAMV,QAAUiO,oBAIrCzqB,KAAK8rB,IAAIX,KAAK6C,YAAYC,KAAK5L,SAAS6L,OAAS/C,KAAKqD,YAAYP,KAAKC,SAAW/qB,KAAKR,QAAQ8rB,UAAYtrB,KAAKT,OAAO2jB,uBACvHrmB,KAAK8rB,IAAIX,KAAK6C,YAAYU,IAAIrM,SAAS6L,OAAS/C,KAAKqD,YAAYE,IAAIR,SAAW/qB,KAAKR,QAAQgsB,WAAaxrB,KAAKT,OAAO2jB,sBAEvH2I,UAAUb,QAAS,EAEnBa,UAAUb,QAAS,ICpOzB3rB,KAAKitB,gBAAkB,SAASjF,QAC9B,YACA,IAGEhmB,GAHEunB,UAAYvB,OAAOuB,UACrB2D,QAAUlF,OAAOkF,QACjBC,OAASnF,OAAOmF,MAKlB,IAFAxsB,KAAK4nB,QAAQ6E,gBAETzsB,KAAK4nB,QAAQ8D,UAA4B,IAAjBrE,OAAO8D,MACjC,IAAK,GAAInvB,GAAI,EAAGA,EAAIgE,KAAKT,OAAOujB,KAAKpjB,EAAG1D,IACtCqF,EAAIrB,KAAK4nB,QAAQO,MAAK,QAAWnsB,GAE3BqF,EAAE0mB,SAAWyE,aAAgC,KAAd5D,WACjCA,YAAcvnB,EAAE0mB,UAClB/nB,KAAK4nB,QAAQ6E,aAAarrB,KAAKpB,KAAK0sB,QAAQ1sB,KAAKT,OAAO8kB,OAAOO,YAC7DvjB,EAAErF,IAGFgE,KAAKT,OAAO0jB,cAAgBsJ,SAAalrB,EAAEmnB,UAAYnnB,EAAE0mB,cACrC,KAAda,WAA6BA,YAAcvnB,EAAEmnB,QAAQI,YAE7D5oB,KAAK4nB,QAAQ6E,aAAarrB,KAAKpB,KAAK0sB,QAAQ1sB,KAAKT,OAAO8kB,OAAOO,YAC7DvjB,EAAErF,GAKV,OAAOgE,MAAK4nB,QAAQ6E,cC5BtBptB,KAAKqtB,QAAU,SAASC,OACtB,YAEA,IAME3wB,GANE8rB,OAAS,KACX8E,UAAY,EACZzE,MAAQnoB,KAAK4nB,QAAQO,MACrBG,IAAMlsB,SAASuwB,MAAMrE,KACrBC,IAAMnsB,SAASuwB,MAAMpE,KACrB1Q,OAAS7X,KAAKT,OAAO8kB,OAAOO,WAG9B,cAAe+H,QAEb,IAAK,SAEH,GAAIA,MAAME,WACR/E,OAAS6E,MAAME,eACV,CAAA,IAAIF,MAAMX,QAASW,MAAMV,MAEzB,CAAA,GAAKa,MAAM1wB,SAASuwB,MAAMrE,OAAUwE,MAAM1wB,SAC7CuwB,MAAMpE,MASR,OAAO,CAPP,KAAKvsB,EAAI,EAAGA,EAAIgE,KAAKT,OAAOujB,KAAKpjB,EAAG1D,IAClC,GAAImsB,MAAMtQ,OAAS7b,GAAGssB,MAAQA,KAAOH,MAAMtQ,OAAS7b,GAAGusB,MAAQA,IAC7D,MAAOJ,OAAMtQ,OAAS7b,EAG1B,QAAO,EATP8rB,OAASjpB,SAASkuB,iBAAiBJ,MAAMX,MAAOW,MAAMV,OAcxD,GAAe,OAAXnE,OACF,OAAO,CAGT,KAAK9rB,EAAI,EAAGA,EAAI4wB,UAAW5wB,IAAK,CAE9B,OACoB,KAAX8rB,YACsB,KAAtBA,OAAO3N,YACH,OAAX2N,QACsB,OAAtBA,OAAO3N,WAEP,OAAO,CACF,IAAI2N,OAAO3N,WAAWtU,KAAO7F,KAAKT,OAAO8kB,OAAOG,SACrD,MAAOxkB,MAAK4nB,QAAQO,MAAML,OAAOjiB,GAEjCiiB,QAASA,OAAO3N,WAGpB,OAAO,CAIT,KAAK,SACH,MAA8B,KAA1BwS,MAAMxtB,QAAQ0Y,SACTsQ,MAAMwE,MAIjB,KAAK,SACH,MAAIA,OAAQ3sB,KAAKT,OAAOujB,KAAKpjB,GACpByoB,MAAMtQ,OAAS8U,SC/D9BttB,KAAK2tB,KAAO,WACV,YAEAhtB,MAAK4nB,SACHqF,SAAS,EACTvB,SAAS,EACTwB,OAAO,EACPC,YAAa,EACbtD,YAAY,EACZc,UAAU,EACVyC,aAAc,EACd5C,aAAc,KACdrC,SACAkF,gBAAiB,EACjBxF,mBAGF7nB,KAAKgpB,gBACLhpB,KAAK8pB,cACL9pB,KAAKstB,gBACLttB,KAAK6oB,WACL7oB,KAAKutB,gBACLvtB,KAAKorB,SACHF,aAAa,IAEVlrB,KAAKwmB,YAGRxmB,KAAKymB,SACHjK,QAAS3d,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SACpDmC,UAAW,OACXC,SAAU,MAEZ3mB,KAAKwO,SAPLxO,KAAKqmB,WC1BThnB,KAAKkuB,cAAgB,WACnB,YAMAvtB,MAAKV,MAAMwhB,SACTjiB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOG,UAAYxkB,KAAKT,OAAO4pB,SAAW,aAAe,YAC7F,SAAS/H,MAAO7C,SAGd,GAAI6C,MAAMG,UAAYhD,QAAQqJ,QAAQyF,gBAAkB,IACtD,OAAO,CAET9O,SAAQqJ,QAAQyF,gBAAkBjM,MAAMG,UAExChD,QAAQiP,WAAWjP,QAAQmO,QAAQtL,OAAQA,QAG7CphB,KAAK4nB,QAAQC,eACb7nB,MAGFA,KAAKV,MAAMwhB,SACTjiB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOC,YAActkB,KAAKT,OAAO4pB,SAAW,YAAc,YAC9F,SAAS/H,MAAO7C,SACd,OAAO,GAETve,KAAK4nB,QAAQC,eACb7nB,MAGFA,KAAKV,MAAMwhB,SACTjiB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOG,UAAYxkB,KAAKT,OAAO4pB,SAAW,YAAc,YAC5F,SAAS/H,MAAO7C,SAGd,GAAMA,QAAQqJ,QAAQ4C,aACpBjM,QAAQkN,SAASrK,WACZ,IAAmB,cAAfA,MAAM9Q,KAAsB,CAGrC,GAAI8Q,MAAMG,UAAYhD,QAAQqJ,QAAQyF,gBAAkB,IACtD,OAAO,CAET9O,SAAQqJ,QAAQyF,gBAAkBjM,MAAMG,UAExChD,QAAQiP,WAAWjP,QAAQmO,QAAQtL,OAAQA,SAK/CphB,KAAK4nB,QAAQC,eACb7nB,MAGFA,KAAKV,MAAMwhB,SACTjiB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOC,YAActkB,KAAKT,OAAO4pB,SAAW,WAAa,UAC7F,SAAS/H,MAAO7C,SAEd,OAA4C,KAAjCA,QAAQqJ,QAAQ4C,cAAiE,OAAjCjM,QAAQqJ,QAAQ4C,aACzE,OAAO,CAGLjM,SAAQhf,OAAO4pB,UAAc/H,MAAMG,UAAYhD,QAAQqJ,QAAQ4C,aAAajJ,UAAahD,QAAQhf,OAAO8jB,qBAGvC,OAAjE9E,QAAQqJ,QAAQ4C,aAAaK,YAAYU,IAAIrM,SAAS6L,QACY,OAAlExM,QAAQqJ,QAAQ4C,aAAaK,YAAYC,KAAK5L,SAAS6L,SAEvDxM,QAAQqJ,QAAQ4C,aAAaK,gBAAc5I,IAI/C1D,QAAQgM,gBAGVvqB,KAAK4nB,QAAQC,eACb7nB,MAGFA,KAAKV,MAAMwhB,SACTjiB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SAC3C,WACA,SAASnD,MAAO7C,SACd6C,MAAQA,OAAgBziB,OAAOyiB,KAC/B,IAAIqM,MAAOrM,MAAMsM,eAAiBtM,MAAMuM,SACnCF,OAA0B,SAAlBA,KAAKpd,UAChBkO,QAAQgM,gBAGZvqB,KAAK4nB,QAAQC,eACb7nB,MAKEA,KAAKT,OAAOmkB,aACd1jB,KAAKV,MAAMwhB,SACTjiB,SAASC,KACT,QACA,SAASsiB,MAAO7C,SAEd,OAAQ6C,MAAMwM,OACZ,IAAKrP,SAAQhf,OAAOukB,SAASC,eAC3BxF,QAAQsP,aACNjF,UAAWrK,QAAQhf,OAAO8kB,OAAOoB,KACjC8G,QAASnL,MAAM0M,SAEjB,MAEF,KAAKvP,SAAQhf,OAAOukB,SAASE,aAC3BzF,QAAQsP,aACNjF,UAAWrK,QAAQhf,OAAO8kB,OAAOiB,GACjCiH,QAASnL,MAAM0M,SAEjB,MAEF,KAAKvP,SAAQhf,OAAOukB,SAASG,gBAC3B1F,QAAQsP,aACNjF,UAAWrK,QAAQhf,OAAO8kB,OAAOkB,MACjCgH,QAASnL,MAAM0M,SAEjB,MAEF,KAAKvP,SAAQhf,OAAOukB,SAASI,eAC3B3F,QAAQsP,aACNjF,UAAWrK,QAAQhf,OAAO8kB,OAAOmB,KACjC+G,QAASnL,MAAM0M,YAOvB9tB,KAAK4nB,QAAQC,eACb7nB,MAIJA,KAAKV,MAAMwhB,SAASniB,OAClB,SACA,SAASyiB,MAAO7C,SAEd,GAAI6C,OAAQ,GAAI2M,OAAK,eACrBpvB,QAAOqvB,cAAc5M,QAEvBphB,KAAK4nB,QAAQC,eACb7nB,MAIFA,KAAKV,MAAMwhB,SAASniB,OAClB,oBACA,SAASyiB,MAAO7C,SAEd,GAAI6C,OAAQ,GAAI2M,OAAK,eACrBpvB,QAAOqvB,cAAc5M,QAEvBphB,KAAK4nB,QAAQC,eACb7nB,MAKFA,KAAKV,MAAMwhB,SAASniB,OAClB,eACAqB,KAAKV,MAAM4iB,SAAS,SAASd,MAAO7C,SAE9BA,QAAQhf,OAAOokB,oBAEjBrH,QAAQ6D,IAAG,+DACX5B,QAAQ0P,gBAAe,MACvB1P,QAAQ2P,gBAE6B,IAAjC3P,QAAQqJ,QAAQwF,aAClBzO,aAAaJ,QAAQqJ,QAAQwF,aAG/B7O,QAAQqJ,QAAQwF,YAAczuB,OAAOigB,WAAW,SAASL,aAEhC,KAAZA,SAETA,QAAQ0P,gBAAe,QAGxB,IAAK1P,WAIRjC,QAAQ6D,IAAG,2CACX5B,QAAQ2P,iBAIT,KAAK,GACRluB,KAAK4nB,QAAQC,eACb7nB,OCtMJX,KAAK4oB,OAAS,SAASD,MACrB,YAEA,IAAa,OAATA,UAA0B/F,KAAT+F,KACnB,OAAO,CAGT,cAAeA,OACb,IAAK,SACH,GAAIA,KAAKniB,GAAG1G,QAAQa,KAAKT,OAAO8kB,OAAOO,aAAe,EACpD,OAAO,CAET,MAEF,KAAK,SAEH,OAAoB,MADpBoD,KAAOhoB,KAAK4nB,QAAQO,MAAMH,OAExB,OAAO,CAET,IAAIA,KAAKniB,GAAG1G,QAAQa,KAAKT,OAAO8kB,OAAOO,aAAe,EACpD,OAAO,CAET,MAEF,SACE,OAAO,EAGX,MAAOoD,OC5BT3oB,KAAK6uB,aAAe,WAClB,YAEAluB,MAAKuqB,eACLvqB,KAAKstB,gBACLttB,KAAKorB,UAEL9O,QAAQ6D,IAAG,gFCPb9gB,KAAKmnB,SAAW,SAASlW,MACvB,YACA,KAAKtQ,KAAKT,OAAO+pB,YACf,OAAO,MAEW,KAAThZ,OACTA,KAAOtQ,KAAKT,OAAO8kB,OAAOwB,eAG5B,IAEIsI,QAFAC,YAAcC,KAAKtb,MAAMuI,aAAagT,QAAQtuB,KAAKT,OAAO8kB,OAAOuB,mBACjE2I,WAAa,IAGjB,IAAoB,OAAhBH,YAAsB,CACxB,OAAiC,KAAtBA,YAAY9d,OACrB,OAD8C8d,YAAY9d,MACpD,CAYN,GAXAie,WAAaH,YAAY9d,MAEzBie,WAAWC,SAAW,GAAIlM,MAAKA,KAAKmM,IAAI7T,MAAM5a,KAC5CuuB,WAAWC,SAAS3hB,MAAK,oBAGvB0hB,WAAWG,cACbH,WAAWG,YAAc,GAAIpM,MAAKA,KAAKmM,IAAI7T,MAAM5a,KAC/CuuB,WAAWG,YAAY7hB,MAAK,qBAG5B0hB,WAAWzL,OAAS9iB,KAAKT,OAAOujB,KAAKpjB,EAGvC,MAFA4c,SAAQ6D,IAAG,qCACToO,WAAWzL,KAAM9iB,KAAKT,OAAOujB,KAAKpjB,IAC7B,CAGTM,MAAK4nB,QAAQO,MAAQoG,WAAWpG,KAGhC,KAAK,GAAInsB,GAAI,EAAGA,EAAIgE,KAAKT,OAAOujB,KAAKpjB,EAAG1D,IAEtCmyB,OAASnuB,KAAKT,OAAO8kB,OAAOO,YAAc5oB,EAC1CuyB,WAAWpG,MAAMgG,QAAQ7D,YAAczrB,SAAS0nB,eAC9C4H,OAUJ,OAPAnuB,MAAK4nB,QAAQqF,QAAUsB,WAAWG,YAClC1uB,KAAK4nB,QAAQiC,WAAaztB,SAASmyB,WAAW1E,YAC9C7pB,KAAKorB,SACHF,YAAuB,SAAT5a,OAGhBgM,QAAQ6D,IAAG,gBACJ,EAIT,MADA7D,SAAQ6D,IAAG,2BAA8B7P,KAAO,MACzC,EAKT,MADAgM,SAAQ6D,IAAG,+BACJ,GC3DT9gB,KAAKiuB,cAAgB,WACnB,YAEAttB,MAAKR,QAAUQ,KAAKR,WAEpB,IAAImvB,aAAc9vB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOC,YACzDsK,SAAW/vB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SACtDsK,aAAeF,YAAYG,YAC3BC,cAAgBJ,YAAYxT,aAC5B6T,UAAY,IAAMhvB,KAAKT,OAAO8kB,OAAOG,QAGzCxkB,MAAKR,QAAQ2sB,oBAAuBnsB,KAAKT,OAAsB,iBAAI,KAAO,OAAQ,GAAK,IACvFS,KAAKR,QAAQyvB,mBAAsBJ,cAAgBE,cAAiB/uB,KAAKT,OAAO8kB,OAAOqB,UAAY1lB,KAAKT,OAAO8kB,OAAOsB,SACtH3lB,KAAKR,QAAQ0vB,aAAeL,aAAeE,cAC3C/uB,KAAKR,QAAQ2vB,WAAcxwB,OAAOywB,iBAAmB,EAAKzwB,OAAOywB,iBAAmB,MAI5C,KAA7BpvB,KAAKR,QAAQ6vB,cACtBrvB,KAAKR,QAAQ6vB,gBAIfrvB,KAAKR,QAAQ6vB,YAAYrvB,KAAKR,QAAQyvB,qBACpCrP,MAAOiP,aACP/O,OAAQiP,eAIV/uB,KAAKR,QAAQ8vB,YAAetvB,KAAKT,OAAOujB,KAAK5iB,GAAKF,KAAKT,OAAOujB,KAAKrgB,EAAKzC,KAAKT,OAAO8kB,OAAOqB,UAAY1lB,KAAKT,OAAO8kB,OAAOsB,SAC1H3lB,KAAKR,QAAQ+vB,WAAavvB,KAAKT,OAAOujB,KAAK5iB,EAAIF,KAAKT,OAAOujB,KAAKrgB,EAGhEzC,KAAKR,QAAQgwB,SAAWpzB,UAAUyC,SAASC,KAAK0b,cAAiB7b,OAAO4b,kBAAoBA,iBAAiB1b,SAASC,KAAM,OAAUD,SAASC,KAAKib,OAAOyV,UAG3JxvB,KAAKR,QAAQiwB,SACXvD,QAASlsB,KAAKT,OAAOwjB,OAAO7iB,EAC5B6qB,OAAQ,GAIV/qB,KAAKR,QAAQkwB,SACXxD,QAASlsB,KAAKT,OAAOwjB,OAAOtgB,EAC5BsoB,OAAQ,GAIV/qB,KAAKR,QAAQwjB,YACXkJ,QAASlsB,KAAKT,OAAOyjB,WACrB+H,OAAQ,GAKN/qB,KAAKR,QAAQyvB,qBAAuBjvB,KAAKT,OAAO8kB,OAAOqB,WAEzD1lB,KAAKR,QAAQsgB,OAAS9f,KAAKV,MAAMsiB,QAAQmN,cAAgB,KAAO,IAA+B,EAAzB/uB,KAAKT,OAAOyjB,WAAgD,EAA/BhjB,KAAKR,QAAQkwB,QAAQxD,SAAclsB,KAAKT,OAAOujB,KAAK5iB,GACvJF,KAAKR,QAAQogB,MAAQ5f,KAAKR,QAAQsgB,OAElC9f,KAAKR,QAAQwjB,WAAW+H,OAASluB,KAAK4B,MAAMswB,cAAgB,IAAM/uB,KAAKT,OAAOyjB,YAC9EhjB,KAAKR,QAAQiwB,QAAQ1E,OAASluB,KAAK4B,MAAMswB,cAAgB,IAAM/uB,KAAKR,QAAQiwB,QAAQvD,SACpFlsB,KAAKR,QAAQkwB,QAAQ3E,OAASluB,KAAK4B,MAAMswB,cAAgB,IAAM/uB,KAAKR,QAAQkwB,QAAQxD,SAEpFlsB,KAAKR,QAAQsrB,KAAOjuB,KAAK4B,OAAOowB,aAAe7uB,KAAKR,QAAQogB,MAAQ5f,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQiwB,QAAQ1E,QAAU,GACpI/qB,KAAKR,QAAQ+rB,IAAM1uB,KAAK4B,OAAOuB,KAAKR,QAAQ6vB,YAAYrvB,KAAKR,QAAQyvB,oBAAoBnP,OAAS9f,KAAKR,QAAQsgB,OAAS9f,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQkwB,QAAQ3E,QAAU,KAIxL/qB,KAAKR,QAAQogB,MAAQ5f,KAAKV,MAAMsiB,QAAQiN,aAAe,KAAO,IAA+B,EAAzB7uB,KAAKT,OAAOyjB,WAAgD,EAA/BhjB,KAAKR,QAAQiwB,QAAQvD,SAAclsB,KAAKT,OAAOujB,KAAKrgB,GACrJzC,KAAKR,QAAQsgB,OAAS9f,KAAKR,QAAQogB,MAEnC5f,KAAKR,QAAQwjB,WAAW+H,OAASluB,KAAK4B,MAAMowB,aAAe,IAAM7uB,KAAKT,OAAOyjB,YAC7EhjB,KAAKR,QAAQiwB,QAAQ1E,OAASluB,KAAK4B,MAAMowB,aAAe,IAAM7uB,KAAKR,QAAQiwB,QAAQvD,SACnFlsB,KAAKR,QAAQkwB,QAAQ3E,OAASluB,KAAK4B,MAAMowB,aAAe,IAAM7uB,KAAKR,QAAQkwB,QAAQxD,SAEnFlsB,KAAKR,QAAQsrB,KAAOjuB,KAAK4B,OAAOowB,aAAe7uB,KAAKR,QAAQogB,MAAQ5f,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQiwB,QAAQ1E,QAAU,GACpI/qB,KAAKR,QAAQ+rB,IAAM1uB,KAAK4B,OAAOuB,KAAKR,QAAQ6vB,YAAYrvB,KAAKR,QAAQyvB,oBAAoBnP,OAAS9f,KAAKR,QAAQsgB,OAAS9f,KAAKR,QAAQwjB,WAAW+H,OAAS/qB,KAAKR,QAAQkwB,QAAQ3E,QAAU,IAK1L/qB,KAAKR,QAAQ8rB,UAAYzuB,KAAK4B,MAAMuB,KAAKR,QAAQogB,MAAQ5f,KAAKT,OAAOujB,KAAK5iB,GAC1EF,KAAKR,QAAQgsB,WAAa3uB,KAAK4B,MAAMuB,KAAKR,QAAQsgB,OAAS9f,KAAKT,OAAOujB,KAAKrgB,EAO5E,IAAI6kB,qBAA2B,WAAazqB,KAAK4B,MAAMuB,KAAKR,QAAQwjB,WAAW+H,QAAU,YAAmB/qB,KAAKR,QAAQogB,MAAQ,cAAqB5f,KAAKR,QAAQsgB,OAAS,YAAmB9f,KAAKR,QAAQsrB,KAAO,WAAkB9qB,KAAKR,QAAQ+rB,IAAM,MAExP,QAA4C,KAAjClsB,KAAKuoB,QAAQ+H,gBAAiC,CACvD,GAAI/xB,KAAMyB,KAAKuoB,QAAQ+H,gBAAgBC,mBACpB,iBAARhyB,OACT0pB,qBAAuB,yBAA2B1pB,IAAIrB,EAAI,IAAMqB,IAAIpB,EAAI,IAAMoB,IAAInB,EAAI,MAI1FmyB,SAAS7U,MAAMV,QAAUiO,oBAIzBzoB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SAASxK,MAAMyV,SAAgB3wB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOG,UAAUrJ,aAAenb,KAAKT,OAAOujB,KAAKrgB,EAAI,EAAI,IAIvK,IAAIotB,SAAW,IAAM7vB,KAAKT,OAAOujB,KAAK5iB,EAAK,IACvC4vB,QAAW,IAAM9vB,KAAKT,OAAOujB,KAAKrgB,EAAK,GAGsC,QAA7EzC,KAAKV,MAAMyf,YAAYiQ,UAAY,KAAOhvB,KAAKT,OAAO8kB,OAAOQ,YAG/D7kB,KAAKV,MAAM6d,eAAe6R,UAAY,KAAOhvB,KAAKT,OAAO8kB,OAAOQ,WAC9D,UAAYgL,QAAU,aAAeC,QAAU,MAMjD9vB,KAAKV,MAAMyf,YAAYiQ,UAAY,KAAOhvB,KAAKT,OAAO8kB,OAAOQ,WAAY,QAASgL,SAClF7vB,KAAKV,MAAMyf,YAAYiQ,UAAY,KAAOhvB,KAAKT,OAAO8kB,OAAOQ,WAAY,SAAUiL,SAKrF,IAAIC,QAAS,QAAU/vB,KAAKR,QAAQsgB,OAAS,IAE0C,QAAnF9f,KAAKV,MAAMyf,YAAYiQ,UAAY,KAAOhvB,KAAKT,OAAO8kB,OAAOS,kBAC/D9kB,KAAKV,MAAM6d,eAAe6R,UAAY,IAAMhvB,KAAKT,OAAO8kB,OAAOS,iBAAkB,oBAAsBiL,OAAS,KAEhH/vB,KAAKV,MAAMyf,YAAYiQ,UAAY,KAAOhvB,KAAKT,OAAO8kB,OAAOS,iBAAkB,iBAAkBiL,SCrIrG1wB,KAAKwuB,YAAc,SAASxG,QAC1B,YAkBA,KAAK,GAhBDc,QAA4B,IAAnBd,OAAOkF,QAAoBvsB,KAAKssB,iBACzCC,SAAS,EACTC,QAAQ,EACR5D,UAAWvB,OAAOuB,YACjBhV,OAAO5T,KAAKssB,iBACbC,SAAS,EACTC,QAAQ,EACR5D,UAAWvB,OAAOuB,YACjB9b,KAAK,SAASkjB,GAAIC,IACnB,MAAOD,IAAGxH,QAAQ9oB,EAAIuwB,GAAGzH,QAAQ9oB,KAEnCM,KAAKssB,iBACHC,SAAS,EACTC,QAAQ,EACR5D,UAAWvB,OAAOuB,YAEb5sB,EAAI,EAAGA,EAAImsB,MAAMvsB,OAAQI,IAChCgE,KAAKirB,SAAS9C,MAAMnsB,IAClBkvB,aAAa,EACbC,OAAO,EACPC,SAAS,GAOb,OAJAprB,MAAKorB,SACH7H,mBAAoBvjB,KAAKT,OAAOgkB,mBAAmBE,aAG9C0E,OC9BT9oB,KAAK4rB,SAAW,SAASjD,KAAMX,QAC7B,YAIA,MAFAW,KAAOhoB,KAAKioB,OAAOD,OAGjB,OAAO,CAGT,IAAIX,QAASA,WAETa,KAAOloB,KAAK4nB,QAAQO,MAAMnoB,KAAKT,OAAO8kB,OAAOO,YAAc5kB,KAAKT,OAAO8kB,OAAO+D,YAC9E8H,OAEJ,KAAKlwB,KAAK+nB,QAAQC,MAChB,OAAO,CAGT,KAAqB,IAAjBX,OAAO8D,MAAgB,CACzB,IAAKnrB,KAAK4nB,QAAQ8D,QAChB,OAAO,CAET1rB,MAAK4pB,YAoBP,MAjBAsG,MAAK5H,IAAMN,KAAKM,IAChB4H,KAAK3H,IAAMP,KAAKO,IAEhBP,KAAKM,IAAMJ,KAAKI,IAChBN,KAAKO,IAAML,KAAKK,IAEhBL,KAAKI,IAAM4H,KAAK5H,IAChBJ,KAAKK,IAAM2H,KAAK3H,KAEO,IAAnBlB,OAAO+D,SACTprB,KAAKorB,SACHF,YAAa7D,OAAO6D,YACpB5E,UAAWe,OAAO8D,MAClBgF,QAAW9I,OAAO8D,SAIf,GC1CT9rB,KAAKgnB,QAAU,WACb,YAEA,IAAI+J,mBAAoB,GAEpBpwB,MAAK4nB,QAAQ8D,SACfpP,QAAQ6D,IAAG,cAEXngB,KAAKqwB,OAELzR,WAAW,SAASL,SAElBA,QAAQiI,SAASjI,QAAQhf,OAAO8kB,OAAO0B,kBAEvCxH,QAAQ6M,SACNF,aAAa,IAGf3M,QAAQ+H,SAAS/H,QAAQhf,OAAO8kB,OAAO0B,mBAGlB,IAApBqK,kBAA0BpwB,MAE7BA,KAAKymB,SACHjK,QAAS3d,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SACpDmC,UAAW,aACXC,SAAUyJ,kBACVzI,OAAQ,kBAIVrL,QAAQ6D,IAAG,gBAEXngB,KAAKorB,SACHF,aAAa,IAGflrB,KAAKsmB,SAAStmB,KAAKT,OAAO8kB,OAAO0B,kBAEjC/lB,KAAKymB,SACHjK,QAAS3d,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SACpDmC,UAAW,QACXC,SAAUyJ,qBAKdxR,WAAW,SAASL,SAElBA,QAAQ+R,QAAQ/R,QAAQhf,OAAOujB,KAAKpjB,EAAI6e,QAAQhf,OAAOujB,KAAKpjB,GAC5D6e,QAAQ+H,SAAS/H,QAAQhf,OAAO8kB,OAAO2B,oBACvCzH,QAAQ/P,SAEa,IAApB4hB,kBAA0BpwB,OCrD/BX,KAAK4uB,gBAAkB,SAASsC,OAC9B,YAEA,IAAIC,WACFxwB,KAAKT,OAAO8kB,OAAOC,WACnBtkB,KAAKT,OAAO8kB,OAAOK,wBACnB1kB,KAAKT,OAAO8kB,OAAOE,SAGjBvoB,EAAI,CAGR,IAAa,MAATu0B,MAGF,IADAjU,QAAQ6D,IAAG,2CACNnkB,EAAI,EAAGA,EAAIw0B,SAAS50B,OAAQI,IAC/B6C,SAAS0nB,eAAeiK,SAASx0B,IAAI+d,MAAM0W,WAAa,aAM1D,KADAnU,QAAQ6D,IAAG,uDACNnkB,EAAI,EAAGA,EAAIw0B,SAAS50B,OAAQI,IAC/B6C,SAAS0nB,eAAeiK,SAASx0B,IAAI+d,MAAM0W,WAAa,WCvB9DpxB,KAAK+rB,QAAU,SAAS/D,QACtB,YAEA,IAAI8G,QACFnG,KACAV,oBAAsB,GACtBoJ,KAAM,MAEc,KAAXrJ,SACTA,QACE6D,aAAa,EACb5E,UAAU,KAIa,IAAvBe,OAAO6D,YACT7D,OAAO9D,mBAAqB,EAGa,gBAA9B8D,QAAO9D,qBAChB8D,OAAO9D,mBAAqBvjB,KAAKT,OAAOgkB,mBAAmBC,SAI/DlH,QAAQ6D,IAAG,UAAYkH,QACvBhoB,KAAKuoB,QAAQ+I,cAEb,KAAK,GAAI30B,GAAI,EAAGA,EAAIgE,KAAKT,OAAOujB,KAAKpjB,EAAG1D,IAAK,CAE3CmyB,OAASnuB,KAAKT,OAAO8kB,OAAOO,YAAc5oB,EAC1CgsB,KAAOhoB,KAAK4nB,QAAQO,MAAMgG,OAI1B,KAAK,GADDtW,QAAS,GACJlX,EAAI,EAAGA,EAAIX,KAAKT,OAAOgoB,gBAAgB7G,IAAI9kB,OAAQ+E,IAE1DkX,OAAS7X,KAAKT,OAAOgoB,gBAAgB7G,IAAI/f,GAEzC2mB,qBAAuBzP,OAAS,sBAAwB7X,KAAKR,QAAQ2sB,oBAAoB,GAAK,IAAkB,IAAXnE,KAAKM,IAAa,KAAmB,IAAXN,KAAKO,IAAa,IAAMvoB,KAAKR,QAAQ2sB,oBAAoB,GAAK,MAC7L7E,qBAAuBzP,OAAS,uBAAyBA,OAAS,aAClEyP,qBAAuBzP,OAAS,uBAAyBzb,SAASS,KAAK8rB,IAAItB,OAAO9D,qBAAuB,iBACzG+D,qBAAuBzP,OAAS,8BAAgC7X,KAAKT,OAAOqkB,QAAQC,sBAAwB,KAIxF,IAAlBwD,OAAO8I,SACTnI,KAAKsC,YAAYvQ,MAAMV,QAAUiO,qBAGnCU,KAAKsC,YAAYsG,WAAW,GAAG7W,MAAM8W,mBAAqB,IAAO7I,KAAKiC,WAAajqB,KAAKR,QAAQ8rB,UAAa,OAAUtD,KAAKkC,WAAalqB,KAAKR,QAAQgsB,WAAc,KAEpKxD,KAAKD,QAAU/nB,KAAK+nB,QAAQoG,QAC5BnG,KAAKQ,QAAUxoB,KAAKwoB,QAAQ2F,QAG5BnG,KAAK8I,UAAQ7O,GACb+F,KAAK6C,gBAAc5I,GACnB+F,KAAKqD,gBAAcpJ,GACnB+F,KAAKzG,cAAYU,GACjB+F,KAAKgD,WAAS/I,GACd+F,KAAKtT,QAAMuN,GAGP+F,KAAKiC,aAAejC,KAAKM,KAAON,KAAKkC,aAAelC,KAAKO,MAC3DmI,KAAM,GAKN1wB,KAAK4nB,QAAQ8D,SAAWgF,MAC1B9R,WAAW,WACTjgB,OAAOuqB,MAAK,eACX,KACHlpB,KAAKqwB,OAELrwB,KAAKqmB,YAGiB,IAApBgB,OAAOf,UACTtmB,KAAKsmB,YC/ETjnB,KAAK+sB,cAAgB,SAAS2E,QAASC,WACrC,YAOA,OALwC,gBAA7BhxB,MAAK4nB,QAAQ+I,cACtB3wB,KAAK4nB,QAAQ+I,gBAGf3wB,KAAK4nB,QAAQ+I,YAAYI,QAAQlrB,IAAMmrB,UAChChxB,KAAK4nB,QAAQ+I,aAKtBtxB,KAAKgtB,kBAAoB,WAEvB,GAAIsE,aAActxB,KAAKuoB,QAAQ+I,WAE/B,KAAKM,SAAUN,aACPA,YAAYM,UAChB3U,QAAQ6D,IAAG,cAAiB8Q,QAC5B5xB,KAAKuoB,QAAQO,MAAM8I,QAAQ3G,YAAYvQ,MAAMV,QAAUsX,YAAYM,QAKvE,OAFA5xB,MAAKuoB,QAAQ+I,eAENtxB,KAAKuoB,QAAQ+I,aCzBtBtxB,KAAKinB,SAAW,SAAShW,MACvB,YACA,KAAKtQ,KAAKT,OAAO+pB,YACf,OAAO,CAET,KAA2B,IAAvBtpB,KAAK4nB,QAAQsF,MACf,OAAO,MAEW,KAAT5c,OACTA,KAAOtQ,KAAKT,OAAO8kB,OAAOwB,eAG5B,IAQIsI,QARA+C,cACAC,WACF3C,UAAU,GAAIlM,OAAO8O,cACrB9gB,KAAMA,KACNwS,KAAM9iB,KAAKT,OAAOujB,KAAKpjB,EACvByoB,SACA0B,WAAY7pB,KAAK4nB,QAAQiC,WAIkD,OAAzEwE,KAAKtb,MAAMuI,aAAagT,QAAQtuB,KAAKT,OAAO8kB,OAAOuB,qBACrDsL,WAAa7C,KAAKtb,MAAMuI,aAAagT,QAAQtuB,KAAKT,OAAO8kB,OAAOuB,oBAG9D5lB,KAAK4nB,QAAQqF,UACfkE,UAAUzC,YAAc1uB,KAAK4nB,QAAQqF,QAAQmE,cAG/C,KAAK,GAAIp1B,GAAI,EAAGA,EAAIgE,KAAKT,OAAOujB,KAAKpjB,EAAG1D,IAEtCmyB,OAASnuB,KAAKT,OAAO8kB,OAAOO,YAAc5oB,EAC1Cm1B,UAAUhJ,MAAMgG,QAAUnuB,KAAKV,MAAMyd,SAAS/c,KAAK4nB,QAAQO,MAAMgG,QAGnE+C,YAAW5gB,MAAQ6gB,UAEnB7V,aAAaC,QAAQvb,KAAKT,OAAO8kB,OAAOuB,iBAAkByI,KAAKgD,UAAUH,aAEzE5U,QAAQ6D,IAAG,eAAkB7P,KAAO,MCxCtCjR,KAAKmuB,WAAa,SAASxF,KAAM5G,OAC/B,YAEA,KAAKphB,KAAK4nB,QAAQ8D,QAChB,OAAO,CAKT,MAFA1D,KAAOhoB,KAAKioB,OAAOD,OAGjB,OAAO,CAGT,IAAIY,WAAa5oB,KAAKT,OAAO0jB,cAAgB+E,KAAKQ,QAAWR,KAAKQ,QAAQI,UAAYZ,KAAKD,OAI3F,IAFA/nB,KAAK4nB,QAAQ4C,aAAexC,KAExBhoB,KAAK+nB,QAAQC,OAAShoB,KAAKT,OAAO0jB,aAAc,CAuDlD,OArDAjjB,KAAK4nB,QAAQ4C,aAAajJ,cAA8B,KAAVH,MAAyBA,MAAMG,UAAY,GAAIe,MAE7FtiB,KAAK4nB,QAAQ4C,aAAaa,aAExBP,MACEoB,QAAS,IAAMlE,KAAKM,IACpByC,OAAQ/qB,KAAKR,QAAQ8rB,UAAYtD,KAAKM,KAExCiD,KACEW,QAAS,IAAMlE,KAAKO,IACpBwC,OAAQ/qB,KAAKR,QAAQgsB,WAAaxD,KAAKO,MAI3CvoB,KAAK4nB,QAAQ4C,aAAauB,WAA2B,KAAV3K,OACzCmK,KAAOnK,MAAM6K,MAAQjsB,KAAKR,QAAQ+rB,IAAMvrB,KAAKR,QAAQwjB,WAAW+H,QAAU/qB,KAAKR,QAAQgsB,WACvFV,MAAQ1J,MAAM4K,MAAQhsB,KAAKR,QAAQsrB,KAAO9qB,KAAKR,QAAQwjB,WAAW+H,QAAU/qB,KAAKR,QAAQ8rB,YAEzFC,IAAKvrB,KAAKR,QAAQgsB,WAAa,EAC/BV,KAAM9qB,KAAKR,QAAQ8rB,UAAY,GAGjCtrB,KAAK4nB,QAAQ4C,aAAaK,aACxBU,KACEnX,KACE2W,OAAQ,KACRmB,QAAS,MAEXhN,UACE6L,OAAQ,KACRmB,QAAS,MAEXxX,KACEqW,OAAQ,KACRmB,QAAS,OAGbpB,MACE1W,KACE2W,OAAQ,KACRmB,QAAS,MAEXhN,UACE6L,OAAQ,KACRmB,QAAS,MAEXxX,KACEqW,OAAQ,KACRmB,QAAS,QAKPtD,WAEN,IAAK5oB,MAAKT,OAAO8kB,OAAOiB,GACtBtlB,KAAK4nB,QAAQ4C,aAAaK,YAAYU,IAAInX,IAAI2W,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYE,IAAIR,OAAS/qB,KAAKR,QAAQgsB,YAClIxrB,KAAK4nB,QAAQ4C,aAAaK,YAAYU,IAAI7W,IAAIqW,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYE,IAAIR,QAC5G/qB,KAAK4nB,QAAQ4C,aAAaK,YAAYC,KAAK1W,IAAI2W,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYP,KAAKC,QAC9G/qB,KAAK4nB,QAAQ4C,aAAaK,YAAYC,KAAKpW,IAAIqW,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYP,KAAKC,OAC9G,MAEF,KAAK/qB,MAAKT,OAAO8kB,OAAOmB,KACtBxlB,KAAK4nB,QAAQ4C,aAAaK,YAAYU,IAAInX,IAAI2W,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYE,IAAIR,QAC5G/qB,KAAK4nB,QAAQ4C,aAAaK,YAAYU,IAAI7W,IAAIqW,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYE,IAAIR,OAAS/qB,KAAKR,QAAQgsB,YAClIxrB,KAAK4nB,QAAQ4C,aAAaK,YAAYC,KAAK1W,IAAI2W,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYP,KAAKC,QAC9G/qB,KAAK4nB,QAAQ4C,aAAaK,YAAYC,KAAKpW,IAAIqW,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYP,KAAKC,OAC9G,MAEF,KAAK/qB,MAAKT,OAAO8kB,OAAOoB,KACtBzlB,KAAK4nB,QAAQ4C,aAAaK,YAAYC,KAAK1W,IAAI2W,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYP,KAAKC,OAAS/qB,KAAKR,QAAQ8rB,WACpItrB,KAAK4nB,QAAQ4C,aAAaK,YAAYC,KAAKpW,IAAIqW,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYP,KAAKC,QAC9G/qB,KAAK4nB,QAAQ4C,aAAaK,YAAYU,IAAInX,IAAI2W,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYE,IAAIR,QAC5G/qB,KAAK4nB,QAAQ4C,aAAaK,YAAYU,IAAI7W,IAAIqW,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYE,IAAIR,OAC5G,MAEF,KAAK/qB,MAAKT,OAAO8kB,OAAOkB,MACtBvlB,KAAK4nB,QAAQ4C,aAAaK,YAAYC,KAAK1W,IAAI2W,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYP,KAAKC;oHAC9G/qB,KAAK4nB,QAAQ4C,aAAaK,YAAYC,KAAKpW,IAAIqW,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYP,KAAKC,OAAS/qB,KAAKR,QAAQ8rB,WACpItrB,KAAK4nB,QAAQ4C,aAAaK,YAAYU,IAAInX,IAAI2W,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYE,IAAIR,QAC5G/qB,KAAK4nB,QAAQ4C,aAAaK,YAAYU,IAAI7W,IAAIqW,OAASluB,KAAK4B,MAAMuB,KAAK4nB,QAAQ4C,aAAaa,YAAYE,IAAIR,QAUhH,GANK/qB,KAAK4nB,QAAQ+C,UAChB3qB,KAAKV,MAAMid,SAASyL,KAAKsC,YAAatqB,KAAKT,OAAO8kB,OAAOa,cACvD,IACAllB,KAAKT,OAAO8kB,OAAOY,iBAGF,IAAjB+C,KAAKQ,SAAqBxoB,KAAKT,OAAO0jB,aAAc,CAEtD+E,KAAKQ,QAAQL,QAEb,KAAK,GAAInsB,GAAI,EAAGA,GAAKgsB,KAAKQ,QAAQ9oB,EAAG1D,IAAK,CAExC,OAAQgsB,KAAKQ,QAAQI,WAEnB,IAAK5oB,MAAKT,OAAO8kB,OAAOiB,GACtB0C,KAAKQ,QAAQL,MAAM/mB,KAAKpB,KAAK0sB,SAC3BpE,IAAKN,KAAKM,IACVC,IAAKP,KAAKO,IAAMvsB,IAElB,MAEF,KAAKgE,MAAKT,OAAO8kB,OAAOkB,MACtByC,KAAKQ,QAAQL,MAAM/mB,KAAKpB,KAAK0sB,SAC3BpE,IAAKN,KAAKM,IAAMtsB,EAChBusB,IAAKP,KAAKO,MAEZ,MAEF,KAAKvoB,MAAKT,OAAO8kB,OAAOmB,KACtBwC,KAAKQ,QAAQL,MAAM/mB,KAAKpB,KAAK0sB,SAC3BpE,IAAKN,KAAKM,IACVC,IAAKP,KAAKO,IAAMvsB,IAElB,MAEF,KAAKgE,MAAKT,OAAO8kB,OAAOoB,KACtBuC,KAAKQ,QAAQL,MAAM/mB,KAAKpB,KAAK0sB,SAC3BpE,IAAKN,KAAKM,IAAMtsB,EAChBusB,IAAKP,KAAKO,OAMhBP,KAAKQ,QAAQL,MAAMnsB,EAAI,GAAG0Y,IAAM,MAMpC1U,KAAK4qB,QAAO,WAEN5C,KAAKD,SAAaC,KAAKQ,WAC3BxoB,KAAK4nB,QAAQ+C,UAAW,KC5J9BtrB,KAAKhE,gBAAkBA,gBAEvBgE,KAAKypB,WAAa,SAASzB,QACzB,YAEA,KAAKxoB,SAASI,eACa,gBAAlBooB,QAAO0B,OAEd,OAAO,CAGT,IAAIpZ,KAAM9Q,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOM,sBAAwB9lB,SAASI,cAAa,MAWnG,OARAqd,SAAQ6D,IAAG,iBAAoBkH,OAAO0B,OAAS,OAC/CpZ,IAAI2hB,YAAc,GAClB3hB,IAAIzQ,IAAMmoB,OAAO0B,OACjBpZ,IAAI2hB,YAAc,GAClB3hB,IAAI9J,GAAK7F,KAAKT,OAAO8kB,OAAOM,oBAE5B3kB,KAAKV,MAAMwhB,SAASnR,IAAK,OAAQtQ,KAAKkyB,oBAAqBvxB,KAAK4nB,QAAQC,eAAgB7nB,OAEjF,GAITX,KAAKkyB,oBAAsB,SAASnQ,MAAO7C,SAEzCjC,QAAQ6D,IAAG,qCACX5B,QAAQjf,MAAMyiB,gBAAgBX,MAAM0G,OAAQ,OAAQvJ,QAAQqJ,QAAQC,eAEpE,IAAI2J,YAAajT,QAAQjf,MAAMigB,cAAc6B,MAAM0G,OAE/CvJ,SAAQjf,MAAM8f,YAAYoS,WAAWj1B,EAAGi1B,WAAWh1B,EAAGg1B,WAAW/0B,IAAM,KACzE8hB,QAAQkT,aAAaD,YACrBjT,QAAQmT,aAAatQ,MAAM0G,SAE3BxL,QAAQ6D,IAAG,iDAAoDqR,WAAWj1B,EAAI,IAAMi1B,WAAWh1B,EAAI,IAAMg1B,WAAW/0B,EAAI,iCAK5H4C,KAAKqyB,aAAe,SAAS/hB,KAE3B,YAEA,IAAI3T,GACA21B,SACA3J,IAEJhoB,MAAK4nB,QAAQ+H,gBAAkB3vB,KAAK4nB,QAAQ+H,oBAC5C3vB,KAAK4nB,QAAQ+H,gBAAgBzwB,IAAMyQ,IAAIzQ,GAGvC,KAAKyyB,WAAY3xB,MAAK4nB,QAAQO,MAE5B,IADAH,KAAOhoB,KAAK0sB,QAAQiF,UAAUrH,YACzBtuB,EAAI,EAAGA,EAAIgsB,KAAK4I,WAAWh1B,OAAQI,IACtC,GAAIgsB,KAAK4I,WAAW50B,GAAG0f,YAAc1b,KAAKT,OAAO8kB,OAAOS,iBAAkB,CACxEkD,KAAK4I,WAAW50B,GAAG+d,MAAM4V,gBAAkB,OAAS3vB,KAAK4nB,QAAQ+H,gBAAgBzwB,IAAM,GACvF,WAKoD,KAA/Cc,KAAK4nB,QAAQC,eAAelY,IAAI9J,IAAS,MAClDhH,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOK,yBAAyBzK,UAAY,GAChFpb,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOK,yBAAyBtlB,YAAYuQ,MAEhF2M,QAAQ6D,IAAG,kEAAoEngB,KAAK4nB,QAAQC,eAAelY,IAAI9J,IAAS,OAK5HxG,KAAKuyB,YAAc,SAASh0B,IAAKi0B,KAAMC,QACrC,YAUA,SAASC,OAAMryB,EAAG0U,IAAKM,KAIrB,MAFAhV,GAAI7C,KAAK4B,MAAMiB,GAEXA,EAAI0U,IACCA,IAEL1U,EAAIgV,IACCA,IAEFhV,EAlBT,OAAmB,KAAR9B,IAET,MADA0e,SAAQ6D,IAAG,iBACJ,CAmBT,QAjBsB,gBAAX2R,UACTA,OAAS,KAgBHD,MAEN,IAAK,WACH,OACEt1B,EAAGw1B,MAAMn0B,IAAIrB,GAAK,EAAIu1B,QAAS,EAAG,KAClCt1B,EAAGu1B,MAAMn0B,IAAIpB,GAAK,EAAIs1B,QAAS,EAAG,KAClCr1B,EAAGs1B,MAAMn0B,IAAInB,GAAK,EAAIq1B,QAAS,EAAG,KAGtC,KAAK,SACH,OACEv1B,EAAGw1B,MAAMn0B,IAAIrB,GAAK,EAAIu1B,QAAS,EAAG,KAClCt1B,EAAGu1B,MAAMn0B,IAAIpB,GAAK,EAAIs1B,QAAS,EAAG,KAClCr1B,EAAGs1B,MAAMn0B,IAAInB,GAAK,EAAIq1B,QAAS,EAAG,KAGtC,SAEE,MADAxV,SAAQ6D,IAAG,oBAAsBviB,KAC1BA,MAMbyB,KAAKoyB,aAAe,SAAS7zB,KAE3B,YAEA,IAAIo0B,QAAS,OAASp0B,IAAIrB,EAAI,IAAMqB,IAAIpB,EAAI,IAAMoB,IAAInB,EAAI,IACtDw1B,OAAS,IAAMr0B,IAAIrB,EAAEoQ,SAAS,IAAM/O,IAAIpB,EAAEmQ,SAAS,IAAM/O,IAAInB,EAAEkQ,SAAS,IAExEulB,QAAUlyB,KAAK4xB,YAAYh0B,IAAK,SAAU,KAC1Cu0B,WAAa,OAASD,QAAQ31B,EAAI,IAAM21B,QAAQ11B,EAAI,IAAM01B,QAAQz1B,EAAI,IACtE21B,WAAa,IAAMF,QAAQ31B,EAAEoQ,SAAS,IAAMulB,QAAQ11B,EAAEmQ,SAAS,IAAMulB,QAAQz1B,EAAEkQ,SAAS,IAGxF0lB,UAAYryB,KAAK4xB,YAAYh0B,IAAK,WAAY,IAC9C00B,aAAe,OAASD,UAAU91B,EAAI,IAAM81B,UAAU71B,EAAI,IAAM61B,UAAU51B,EAAI,IAC9E81B,aAAe,IAAMF,UAAU91B,EAAEoQ,SAAS,IAAM0lB,UAAU71B,EAAEmQ,SAAS,IAAM0lB,UAAU51B,EAAEkQ,SAAS,GAGpG3M,MAAK4nB,QAAQ+H,gBAAkB3vB,KAAK4nB,QAAQ+H,oBAE5C3vB,KAAK4nB,QAAQ+H,gBAAgB6B,WAAaQ,OAC1ChyB,KAAK4nB,QAAQ+H,gBAAgB6C,kBAAoBL,WACjDnyB,KAAK4nB,QAAQ+H,gBAAgBC,oBAAsB0C,aAEnDtyB,KAAK4nB,QAAQ+H,gBAAgB8C,WAAaR,OAC1CjyB,KAAK4nB,QAAQ+H,gBAAgB+C,kBAAoBN,WACjDpyB,KAAK4nB,QAAQ+H,gBAAgBgD,oBAAsBJ,aAEnDvyB,KAAK4nB,QAAQ+H,gBAAgBiD,SAAyD,QAA7Cv3B,gBAAgB42B,QAAQ,OAAS,SAC1EjyB,KAAK4nB,QAAQ+H,gBAAgBkD,UAAY7yB,KAAK4nB,QAAQ+H,gBAAgBiD,SAEtE/zB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOK,yBAAyB3K,MAAM+Y,gBAAkBd,OAC5FnzB,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOE,SAASxK,MAAM+Y,gBAAkBP,YAG5E,IAAIQ,kBAAmB/yB,KAAKV,MAAMyf,YAAW,IAAO/e,KAAKT,OAAO8kB,OAAOG,SAAW,KAAOxkB,KAAKT,OAAO8kB,OAAOS,iBAAkB,YAE9H,IAAMiO,iBAAkB,CAItB,IAAK,GAFDC,gBAAiBD,iBAAiB/xB,QAAO,QAAU,KAAKZ,MAAK,KAExDpE,EAAI,EAAGA,EAAIg3B,eAAep3B,OAAQI,IAAK,EAC1Cg3B,eAAeh3B,GAAGmD,QAAO,QAAW,GAAK6zB,eAAeh3B,GAAGmD,QAAO,MAAS,KAC7E6zB,eAAeh3B,GAAKm2B,WAEtB,OAGFnyB,KAAKV,MAAMyf,YAAW,IAAO/e,KAAKT,OAAO8kB,OAAOG,SAAW,KAAOxkB,KAAKT,OAAO8kB,OAAOS,iBAAkB,YAAakO,eAAetyB,KAAI,MAEvI7B,SAAS0nB,eAAevmB,KAAKT,OAAO8kB,OAAOG,UAAUzK,MAAM+Y,gBAAkBV,aC1KjF/yB,KAAKixB,QAAU,SAAS5wB,EAAG0rB,SACzB,YAEA9O,SAAQ6D,IAAG,WACXngB,KAAK4qB,QAAO,eAEK,KAANlrB,IACTA,EAAI,GAAKM,KAAKT,OAAOujB,KAAKpjB,OAEL,KAAZ0rB,UACTA,SAAU,EAcZ,KAAK,GAFD5pB,GATAyxB,YACFjzB,KAAKT,OAAO8kB,OAAOiB,GACnBtlB,KAAKT,OAAO8kB,OAAOkB,MACnBvlB,KAAKT,OAAO8kB,OAAOmB,KACnBxlB,KAAKT,OAAO8kB,OAAOoB,MAGjBgH,gBAIKzwB,EAAI,EAAGA,EAAI0D,EAAG1D,IACrBwF,EAAIyxB,WAAWp2B,KAAK4B,MAAM5B,KAAK6B,UAAYu0B,WAAWr3B,OAAS,KAE/D6wB,aAAezsB,KAAKssB,iBAClB1D,UAAWpnB,EACX+qB,SAAS,EACTC,QAAQ,EACRrB,OAAO,IAGTnrB,KAAKirB,SACHwB,aAAa,IACXvB,aAAa,EACbC,OAAO,EACPC,SAAS,GAKXA,UACFprB,KAAKorB,SACHF,aAAa,EACb3H,mBAAoB,OC9C1BlkB,KAAKmP,MAAQ,WACX,YACAxO,MAAK4nB,QAAQqF,QAAU,GAAI3K,MAC3BtiB,KAAK4nB,QAAQsF,OAAQ,EACrBltB,KAAK4nB,QAAQ8D,SAAU,EACvB1rB,KAAK4nB,QAAQiC,WAAa,EAC1BvN,QAAQ6D,IAAG,iBCNb9gB,KAAKgxB,KAAO,WACV,YAEArwB,MAAK4nB,QAAQsF,MAAQ,GAAI5K,MACzBtiB,KAAK4nB,QAAQ8D,SAAU,EACvBpP,QAAQ6D,IAAG,iBCLb9gB,KAAKurB,QAAU,SAASsI,iBACtB,YAEA,IAAIlzB,KAAKT,OAAO6jB,UAAW,CAEzB,GAAI+P,SAAU,EAEd,QAAQD,iBAEN,IAAK,SACHC,QAAU,EACV,MAEF,KAAK,OACHA,QAAU,EACV,MAEF,KAAK,WACHA,QAAU,CACV,MAEF,KAAK,SACHA,SAAWt2B,KAAK4B,MAAsB,IAAhB5B,KAAK6B,UAAiB7B,KAAK4B,MAAsB,IAAhB5B,KAAK6B,UAAiB7B,KAAK4B,MAAsB,IAAhB5B,KAAK6B,UAAiB7B,KAAK4B,MAAsB,IAAhB5B,KAAK6B,UAAiB7B,KAAK4B,MAAsB,IAAhB5B,KAAK6B,UAAiB7B,KAAK4B,MAAsB,IAAhB5B,KAAK6B,UAAiB7B,KAAK4B,MAAsB,IAAhB5B,KAAK6B,UAAiB7B,KAAK4B,MAAsB,IAAhB5B,KAAK6B,UAClQ,MAEF,KAAK,OACHy0B,QAAU,EAOd7W,QAAQ6D,IAAG,UAAY+S,gBAAiBC,SAEpCx0B,OAAOge,WAAahe,OAAOge,UAAUiO,SACvCjsB,OAAOge,UAAUiO,QAAQuI","file":"app.min.js","sourcesContent":["\n// \n// getClosestColor is a simple, dependancy free function that,\n// given any color hex code and a palette (in the form of \n// an array of colors hex codes) will return the hex code of \n// the most visually similar color in the palette\n// \n// Usage: getClosestColor(color, palette);\n// \n\n\n\nfunction getClosestColor(inputColor, palette) {\n\n    \"use strict\";\n\n    //\n    // input normalizaion\n    //\n\n    palette = normalizedPalette(palette);\n    inputColor = normalizedColor(inputColor);\n\n    if (!inputColor) {\n        throw \"error: invalid input color\";\n    }\n\n    if (!palette) {\n        throw \"error: invalid input palette\";\n    }\n\n    function isValidColor(color) {\n\n        if (typeof color !== \"string\") {\n            return false;\n        }\n\n        if (!/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    function normalizedColor(color) {\n\n        if (isValidColor(color) && color.length !== 7) {\n            // convert short color format to full length color format \n            color = color[0] + color[1] + color[1] + color[2] + color[2] + color[3] + color[3];\n        }\n\n        return color.toUpperCase();\n    }\n\n    function isValidPalette(palette) {\n\n        if ( !(typeof palette === \"object\") || !(palette instanceof Array)) {\n            return false;\n        }\n\n        if (palette.length === 0) {\n            return false;\n        }\n\n        for (var i = 0; i < palette.length; i++) {\n\n            if (!isValidColor(palette[i])) {\n                return false;\n            } \n\n            palette[i] = normalizedColor(palette[i]);\n            \n        }\n\n        return true;\n    }\n\n    function normalizedPalette(palette) {\n\n        if (isValidPalette(palette)) {\n            for (var i = 0; i < palette.length; i++) {\n                palette[i] = normalizedColor(palette[i]);\n            }\n        }\n\n        return palette;\n    }\n\n    function hex2dec(hex) {\n        return parseInt(hex, 16);\n    }\n\n    function getComponents(color) {\n\n        var r = hex2dec(color.substr(1, 2));\n        var g = hex2dec(color.substr(3, 2));\n        var b = hex2dec(color.substr(5, 2));\n\n        function rgbToXyz(r, g, b) {\n\n            // from https://software.intel.com/en-us/html5/hub/blogs/exploring-color-matching-in-javascript\n\n            var _r = (r / 255);\n            var _g = (g / 255);\n            var _b = (b / 255);\n\n            if (_r > 0.04045) {\n                _r = Math.pow(((_r + 0.055) / 1.055), 2.4);\n            } else {\n                _r = _r / 12.92;\n            }\n\n            if (_g > 0.04045) {\n                _g = Math.pow(((_g + 0.055) / 1.055), 2.4);\n            } else {\n                _g = _g / 12.92;\n            }\n\n            if (_b > 0.04045) {\n                _b = Math.pow(((_b + 0.055) / 1.055), 2.4);\n            } else {\n                _b = _b / 12.92;\n            }\n\n            _r = _r * 100;\n            _g = _g * 100;\n            _b = _b * 100;\n\n            var X = _r * 0.4124 + _g * 0.3576 + _b * 0.1805;\n            var Y = _r * 0.2126 + _g * 0.7152 + _b * 0.0722;\n            var Z = _r * 0.0193 + _g * 0.1192 + _b * 0.9505;\n\n            return [X, Y, Z];\n        }\n\n        function xyzToLab(x, y, z) {\n\n            // from https://software.intel.com/en-us/html5/hub/blogs/exploring-color-matching-in-javascript\n\n            var ref_X = 95.047;\n            var ref_Y = 100.000;\n            var ref_Z = 108.883;\n\n            var _X = x / ref_X;\n            var _Y = y / ref_Y;\n            var _Z = z / ref_Z;\n\n            if (_X > 0.008856) {\n                _X = Math.pow(_X, (1 / 3));\n            } else {\n                _X = (7.787 * _X) + (16 / 116);\n            }\n\n            if (_Y > 0.008856) {\n                _Y = Math.pow(_Y, (1 / 3));\n            } else {\n                _Y = (7.787 * _Y) + (16 / 116);\n            }\n\n            if (_Z > 0.008856) {\n                _Z = Math.pow(_Z, (1 / 3));\n            } else {\n                _Z = (7.787 * _Z) + (16 / 116);\n            }\n\n            var CIE_L = (116 * _Y) - 16;\n            var CIE_a = 500 * (_X - _Y);\n            var CIE_b = 200 * (_Y - _Z);\n\n            return [CIE_L, CIE_a, CIE_b];\n        }\n\n        function rgbToLab(r, g, b) {\n\n            var xyz = rgbToXyz(r, g, b);\n            var lab = xyzToLab(xyz[0], xyz[1], xyz[2]);\n\n            return lab;\n        }\n\n        return {\n            hex: color,\n            rgb: [r, g, b],\n            lab: rgbToLab(r, g, b)\n        };\n    }\n\n    function colorDifference(color1, color2) {\n\n        var lab1 = getComponents(color1).lab;\n        var lab2 = getComponents(color2).lab;\n\n        var deltaE = Math.sqrt(\n            Math.pow(lab2[0] - lab1[0], 2) +\n            Math.pow(lab2[1] - lab1[1], 2) +\n            Math.pow(lab2[2] - lab1[2], 2)\n        );\n\n        return deltaE;\n    }   \n\n\n    // \n    // loop the palette to choose the closest color \n    // \n\n    var closestColor = palette[0];\n\n    for (var i = 0; i < palette.length; i++) {\n\n        if (colorDifference(inputColor, palette[i]) < colorDifference(inputColor, closestColor)) {\n            closestColor = palette[i];\n        }\n\n    }\n\n    return closestColor; \n\n}\n","game.ajaxCall = function(url) {\r\n  \"use strict\";\r\n\r\n  var xmlhttp;\r\n  if (window.XMLHttpRequest) {\r\n    xmlhttp = new XMLHttpRequest();\r\n  } else {\r\n    return false;\r\n  }\r\n\r\n  xmlhttp.onreadystatechange = function() {\r\n\r\n    console.log(xmlhttp.status);\r\n\r\n    if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {\r\n      console.log(xmlhttp.responseText);\r\n    }\r\n\r\n  };\r\n\r\n  xmlhttp.open(\"GET\", url, true);\r\n  xmlhttp.send();\r\n\r\n\r\n};\r\n\r\n\r\nfunction jsonpCall(url, callback) {\r\n\r\n  \"use strict\";\r\n\r\n  var callbackName = \"jsonp_callback_\" + Math.round(100000 * Math.random());\r\n\r\n  window[callbackName] = function(data) {\r\n    delete window[callbackName];\r\n    document.body.removeChild(jsonpCallScript);\r\n    callback(data);\r\n  };\r\n\r\n  var jsonpCallScript = document.createElement(\"script\");\r\n  jsonpCallScript.src = url + (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"callback=\" + callbackName;\r\n  document.body.appendChild(jsonpCallScript);\r\n}\r\n","var game = {\r\n  utils: {},\r\n  config: {},\r\n  metrics: {}\r\n};\r\n","/*! URI.js v1.19.1 http://medialize.github.io/URI.js/ */\n/* build contains: IPv6.js, punycode.js, SecondLevelDomains.js, URI.js, URITemplate.js */\n(function(f, n) {\n  \"object\" === typeof module && module.exports ? module.exports = n() : \"function\" === typeof define && define.amd ? define(n) : f.IPv6 = n(f)\n})(this, function(f) {\n  var n = f && f.IPv6;\n  return {\n    best: function(h) {\n      h = h.toLowerCase().split(\":\");\n      var k = h.length,\n        b = 8;\n      \"\" === h[0] && \"\" === h[1] && \"\" === h[2] ? (h.shift(), h.shift()) : \"\" === h[0] && \"\" === h[1] ? h.shift() : \"\" === h[k - 1] && \"\" === h[k - 2] && h.pop();\n      k = h.length; - 1 !== h[k - 1].indexOf(\".\") && (b = 7);\n      var q;\n      for (q = 0; q < k && \"\" !== h[q]; q++);\n      if (q < b)\n        for (h.splice(q, 1, \"0000\"); h.length < b;) h.splice(q, 0, \"0000\");\n      for (q = 0; q < b; q++) {\n        k = h[q].split(\"\");\n        for (var f = 0; 3 > f; f++)\n          if (\"0\" === k[0] && 1 < k.length) k.splice(0, 1);\n          else break;\n        h[q] = k.join(\"\")\n      }\n      k = -1;\n      var n = f = 0,\n        g = -1,\n        p = !1;\n      for (q = 0; q < b; q++) p ? \"0\" === h[q] ? n += 1 : (p = !1, n > f && (k = g, f = n)) : \"0\" === h[q] && (p = !0, g = q, n = 1);\n      n > f && (k = g, f = n);\n      1 < f && h.splice(k, f, \"\");\n      k = h.length;\n      b = \"\";\n      \"\" === h[0] && (b = \":\");\n      for (q = 0; q < k; q++) {\n        b += h[q];\n        if (q === k - 1) break;\n        b += \":\"\n      }\n      \"\" === h[k - 1] && (b += \":\");\n      return b\n    },\n    noConflict: function() {\n      f.IPv6 === this && (f.IPv6 = n);\n      return this\n    }\n  }\n});\n(function(f) {\n  function n(b) {\n    throw new RangeError(w[b]);\n  }\n\n  function h(b, e) {\n    for (var g = b.length, h = []; g--;) h[g] = e(b[g]);\n    return h\n  }\n\n  function k(b, e) {\n    var g = b.split(\"@\"),\n      f = \"\";\n    1 < g.length && (f = g[0] + \"@\", b = g[1]);\n    b = b.replace(C, \".\");\n    g = b.split(\".\");\n    g = h(g, e).join(\".\");\n    return f + g\n  }\n\n  function b(b) {\n    for (var e = [], g = 0, h = b.length, f, a; g < h;) f = b.charCodeAt(g++), 55296 <= f && 56319 >= f && g < h ? (a = b.charCodeAt(g++), 56320 == (a & 64512) ? e.push(((f & 1023) << 10) + (a & 1023) + 65536) : (e.push(f), g--)) : e.push(f);\n    return e\n  }\n\n  function q(b) {\n    return h(b, function(b) {\n      var e =\n        \"\";\n      65535 < b && (b -= 65536, e += t(b >>> 10 & 1023 | 55296), b = 56320 | b & 1023);\n      return e += t(b)\n    }).join(\"\")\n  }\n\n  function z(b, e) {\n    return b + 22 + 75 * (26 > b) - ((0 != e) << 5)\n  }\n\n  function u(b, g, h) {\n    var f = 0;\n    b = h ? e(b / 700) : b >> 1;\n    for (b += e(b / g); 455 < b; f += 36) b = e(b / 35);\n    return e(f + 36 * b / (b + 38))\n  }\n\n  function g(b) {\n    var g = [],\n      h = b.length,\n      f = 0,\n      k = 128,\n      a = 72,\n      c, d;\n    var l = b.lastIndexOf(\"-\");\n    0 > l && (l = 0);\n    for (c = 0; c < l; ++c) 128 <= b.charCodeAt(c) && n(\"not-basic\"), g.push(b.charCodeAt(c));\n    for (l = 0 < l ? l + 1 : 0; l < h;) {\n      c = f;\n      var m = 1;\n      for (d = 36;; d += 36) {\n        l >= h && n(\"invalid-input\");\n        var x = b.charCodeAt(l++);\n        x = 10 > x - 48 ? x - 22 : 26 > x - 65 ? x - 65 : 26 > x - 97 ? x - 97 : 36;\n        (36 <= x || x > e((2147483647 - f) / m)) && n(\"overflow\");\n        f += x * m;\n        var p = d <= a ? 1 : d >= a + 26 ? 26 : d - a;\n        if (x < p) break;\n        x = 36 - p;\n        m > e(2147483647 / x) && n(\"overflow\");\n        m *= x\n      }\n      m = g.length + 1;\n      a = u(f - c, m, 0 == c);\n      e(f / m) > 2147483647 - k && n(\"overflow\");\n      k += e(f / m);\n      f %= m;\n      g.splice(f++, 0, k)\n    }\n    return q(g)\n  }\n\n  function p(g) {\n    var h, f, k, p = [];\n    g = b(g);\n    var a = g.length;\n    var c = 128;\n    var d = 0;\n    var l = 72;\n    for (k = 0; k < a; ++k) {\n      var m = g[k];\n      128 > m && p.push(t(m))\n    }\n    for ((h = f = p.length) && p.push(\"-\"); h < a;) {\n      var x = 2147483647;\n      for (k = 0; k < a; ++k) m = g[k], m >= c &&\n        m < x && (x = m);\n      var q = h + 1;\n      x - c > e((2147483647 - d) / q) && n(\"overflow\");\n      d += (x - c) * q;\n      c = x;\n      for (k = 0; k < a; ++k)\n        if (m = g[k], m < c && 2147483647 < ++d && n(\"overflow\"), m == c) {\n          var r = d;\n          for (x = 36;; x += 36) {\n            m = x <= l ? 1 : x >= l + 26 ? 26 : x - l;\n            if (r < m) break;\n            var A = r - m;\n            r = 36 - m;\n            p.push(t(z(m + A % r, 0)));\n            r = e(A / r)\n          }\n          p.push(t(z(r, 0)));\n          l = u(d, q, h == f);\n          d = 0;\n          ++h\n        }++d;\n      ++c\n    }\n    return p.join(\"\")\n  }\n  var D = \"object\" == typeof exports && exports && !exports.nodeType && exports,\n    A = \"object\" == typeof module && module && !module.nodeType && module,\n    B = \"object\" == typeof global && global;\n  if (B.global === B || B.window ===\n    B || B.self === B) f = B;\n  var E = /^xn--/,\n    r = /[^\\x20-\\x7E]/,\n    C = /[\\x2E\\u3002\\uFF0E\\uFF61]/g,\n    w = {\n      overflow: \"Overflow: input needs wider integers to process\",\n      \"not-basic\": \"Illegal input >= 0x80 (not a basic code point)\",\n      \"invalid-input\": \"Invalid input\"\n    },\n    e = Math.floor,\n    t = String.fromCharCode,\n    y;\n  var v = {\n    version: \"1.3.2\",\n    ucs2: {\n      decode: b,\n      encode: q\n    },\n    decode: g,\n    encode: p,\n    toASCII: function(b) {\n      return k(b, function(b) {\n        return r.test(b) ? \"xn--\" + p(b) : b\n      })\n    },\n    toUnicode: function(b) {\n      return k(b, function(b) {\n        return E.test(b) ? g(b.slice(4).toLowerCase()) :\n          b\n      })\n    }\n  };\n  if (\"function\" == typeof define && \"object\" == typeof define.amd && define.amd) define(\"punycode\", function() {\n    return v\n  });\n  else if (D && A)\n    if (module.exports == D) A.exports = v;\n    else\n      for (y in v) v.hasOwnProperty(y) && (D[y] = v[y]);\n  else f.punycode = v\n})(this);\n(function(f, n) {\n  \"object\" === typeof module && module.exports ? module.exports = n() : \"function\" === typeof define && define.amd ? define(n) : f.SecondLevelDomains = n(f)\n})(this, function(f) {\n  var n = f && f.SecondLevelDomains,\n    h = {\n      list: {\n        ac: \" com gov mil net org \",\n        ae: \" ac co gov mil name net org pro sch \",\n        af: \" com edu gov net org \",\n        al: \" com edu gov mil net org \",\n        ao: \" co ed gv it og pb \",\n        ar: \" com edu gob gov int mil net org tur \",\n        at: \" ac co gv or \",\n        au: \" asn com csiro edu gov id net org \",\n        ba: \" co com edu gov mil net org rs unbi unmo unsa untz unze \",\n        bb: \" biz co com edu gov info net org store tv \",\n        bh: \" biz cc com edu gov info net org \",\n        bn: \" com edu gov net org \",\n        bo: \" com edu gob gov int mil net org tv \",\n        br: \" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg \",\n        bs: \" com edu gov net org \",\n        bz: \" du et om ov rg \",\n        ca: \" ab bc mb nb nf nl ns nt nu on pe qc sk yk \",\n        ck: \" biz co edu gen gov info net org \",\n        cn: \" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj \",\n        co: \" com edu gov mil net nom org \",\n        cr: \" ac c co ed fi go or sa \",\n        cy: \" ac biz com ekloges gov ltd name net org parliament press pro tm \",\n        \"do\": \" art com edu gob gov mil net org sld web \",\n        dz: \" art asso com edu gov net org pol \",\n        ec: \" com edu fin gov info med mil net org pro \",\n        eg: \" com edu eun gov mil name net org sci \",\n        er: \" com edu gov ind mil net org rochest w \",\n        es: \" com edu gob nom org \",\n        et: \" biz com edu gov info name net org \",\n        fj: \" ac biz com info mil name net org pro \",\n        fk: \" ac co gov net nom org \",\n        fr: \" asso com f gouv nom prd presse tm \",\n        gg: \" co net org \",\n        gh: \" com edu gov mil org \",\n        gn: \" ac com gov net org \",\n        gr: \" com edu gov mil net org \",\n        gt: \" com edu gob ind mil net org \",\n        gu: \" com edu gov net org \",\n        hk: \" com edu gov idv net org \",\n        hu: \" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video \",\n        id: \" ac co go mil net or sch web \",\n        il: \" ac co gov idf k12 muni net org \",\n        \"in\": \" ac co edu ernet firm gen gov i ind mil net nic org res \",\n        iq: \" com edu gov i mil net org \",\n        ir: \" ac co dnssec gov i id net org sch \",\n        it: \" edu gov \",\n        je: \" co net org \",\n        jo: \" com edu gov mil name net org sch \",\n        jp: \" ac ad co ed go gr lg ne or \",\n        ke: \" ac co go info me mobi ne or sc \",\n        kh: \" com edu gov mil net org per \",\n        ki: \" biz com de edu gov info mob net org tel \",\n        km: \" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire \",\n        kn: \" edu gov net org \",\n        kr: \" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan \",\n        kw: \" com edu gov net org \",\n        ky: \" com edu gov net org \",\n        kz: \" com edu gov mil net org \",\n        lb: \" com edu gov net org \",\n        lk: \" assn com edu gov grp hotel int ltd net ngo org sch soc web \",\n        lr: \" com edu gov net org \",\n        lv: \" asn com conf edu gov id mil net org \",\n        ly: \" com edu gov id med net org plc sch \",\n        ma: \" ac co gov m net org press \",\n        mc: \" asso tm \",\n        me: \" ac co edu gov its net org priv \",\n        mg: \" com edu gov mil nom org prd tm \",\n        mk: \" com edu gov inf name net org pro \",\n        ml: \" com edu gov net org presse \",\n        mn: \" edu gov org \",\n        mo: \" com edu gov net org \",\n        mt: \" com edu gov net org \",\n        mv: \" aero biz com coop edu gov info int mil museum name net org pro \",\n        mw: \" ac co com coop edu gov int museum net org \",\n        mx: \" com edu gob net org \",\n        my: \" com edu gov mil name net org sch \",\n        nf: \" arts com firm info net other per rec store web \",\n        ng: \" biz com edu gov mil mobi name net org sch \",\n        ni: \" ac co com edu gob mil net nom org \",\n        np: \" com edu gov mil net org \",\n        nr: \" biz com edu gov info net org \",\n        om: \" ac biz co com edu gov med mil museum net org pro sch \",\n        pe: \" com edu gob mil net nom org sld \",\n        ph: \" com edu gov i mil net ngo org \",\n        pk: \" biz com edu fam gob gok gon gop gos gov net org web \",\n        pl: \" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora \",\n        pr: \" ac biz com edu est gov info isla name net org pro prof \",\n        ps: \" com edu gov net org plo sec \",\n        pw: \" belau co ed go ne or \",\n        ro: \" arts com firm info nom nt org rec store tm www \",\n        rs: \" ac co edu gov in org \",\n        sb: \" com edu gov net org \",\n        sc: \" com edu gov net org \",\n        sh: \" co com edu gov net nom org \",\n        sl: \" com edu gov net org \",\n        st: \" co com consulado edu embaixada gov mil net org principe saotome store \",\n        sv: \" com edu gob org red \",\n        sz: \" ac co org \",\n        tr: \" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web \",\n        tt: \" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel \",\n        tw: \" club com ebiz edu game gov idv mil net org \",\n        mu: \" ac co com gov net or org \",\n        mz: \" ac co edu gov org \",\n        na: \" co com \",\n        nz: \" ac co cri geek gen govt health iwi maori mil net org parliament school \",\n        pa: \" abo ac com edu gob ing med net nom org sld \",\n        pt: \" com edu gov int net nome org publ \",\n        py: \" com edu gov mil net org \",\n        qa: \" com edu gov mil net org \",\n        re: \" asso com nom \",\n        ru: \" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk \",\n        rw: \" ac co com edu gouv gov int mil net \",\n        sa: \" com edu gov med net org pub sch \",\n        sd: \" com edu gov info med net org tv \",\n        se: \" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z \",\n        sg: \" com edu gov idn net org per \",\n        sn: \" art com edu gouv org perso univ \",\n        sy: \" com edu gov mil net news org \",\n        th: \" ac co go in mi net or \",\n        tj: \" ac biz co com edu go gov info int mil name net nic org test web \",\n        tn: \" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism \",\n        tz: \" ac co go ne or \",\n        ua: \" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt \",\n        ug: \" ac co go ne or org sc \",\n        uk: \" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc \",\n        us: \" dni fed isa kids nsn \",\n        uy: \" com edu gub mil net org \",\n        ve: \" co com edu gob info mil net org web \",\n        vi: \" co com k12 net org \",\n        vn: \" ac biz com edu gov health info int name net org pro \",\n        ye: \" co com gov ltd me net org plc \",\n        yu: \" ac co edu gov org \",\n        za: \" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web \",\n        zm: \" ac co com edu gov net org sch \",\n        com: \"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za \",\n        net: \"gb jp se uk \",\n        org: \"ae\",\n        de: \"com \"\n      },\n      has: function(f) {\n        var b = f.lastIndexOf(\".\");\n        if (0 >= b || b >= f.length - 1) return !1;\n        var k = f.lastIndexOf(\".\", b - 1);\n        if (0 >= k || k >= b - 1) return !1;\n        var n = h.list[f.slice(b + 1)];\n        return n ? 0 <= n.indexOf(\" \" + f.slice(k + 1, b) + \" \") : !1\n      },\n      is: function(f) {\n        var b = f.lastIndexOf(\".\");\n        if (0 >= b || b >= f.length - 1 || 0 <= f.lastIndexOf(\".\", b - 1)) return !1;\n        var k = h.list[f.slice(b + 1)];\n        return k ? 0 <= k.indexOf(\" \" + f.slice(0, b) + \" \") : !1\n      },\n      get: function(f) {\n        var b = f.lastIndexOf(\".\");\n        if (0 >= b || b >= f.length - 1) return null;\n        var k = f.lastIndexOf(\".\", b - 1);\n        if (0 >= k || k >= b - 1) return null;\n        var n = h.list[f.slice(b + 1)];\n        return !n || 0 > n.indexOf(\" \" + f.slice(k + 1, b) + \" \") ? null : f.slice(k + 1)\n      },\n      noConflict: function() {\n        f.SecondLevelDomains === this && (f.SecondLevelDomains = n);\n        return this\n      }\n    };\n  return h\n});\n(function(f, n) {\n  \"object\" === typeof module && module.exports ? module.exports = n(require(\"./punycode\"), require(\"./IPv6\"), require(\"./SecondLevelDomains\")) : \"function\" === typeof define && define.amd ? define([\"./punycode\", \"./IPv6\", \"./SecondLevelDomains\"], n) : f.URI = n(f.punycode, f.IPv6, f.SecondLevelDomains, f)\n})(this, function(f, n, h, k) {\n  function b(a, c) {\n    var d = 1 <= arguments.length,\n      l = 2 <= arguments.length;\n    if (!(this instanceof b)) return d ? l ? new b(a, c) : new b(a) : new b;\n    if (void 0 === a) {\n      if (d) throw new TypeError(\"undefined is not a valid argument for URI\");\n      a = \"undefined\" !== typeof location ? location.href + \"\" : \"\"\n    }\n    if (null === a && d) throw new TypeError(\"null is not a valid argument for URI\");\n    this.href(a);\n    return void 0 !== c ? this.absoluteTo(c) : this\n  }\n\n  function q(a) {\n    return a.replace(/([.*+?^=!:${}()|[\\]\\/\\\\])/g, \"\\\\$1\")\n  }\n\n  function z(a) {\n    return void 0 === a ? \"Undefined\" : String(Object.prototype.toString.call(a)).slice(8, -1)\n  }\n\n  function u(a) {\n    return \"Array\" === z(a)\n  }\n\n  function g(a, c) {\n    var d = {},\n      b;\n    if (\"RegExp\" === z(c)) d = null;\n    else if (u(c)) {\n      var m = 0;\n      for (b = c.length; m < b; m++) d[c[m]] = !0\n    } else d[c] = !0;\n    m = 0;\n    for (b = a.length; m < b; m++)\n      if (d && void 0 !== d[a[m]] || !d && c.test(a[m])) a.splice(m, 1), b--, m--;\n    return a\n  }\n\n  function p(a, c) {\n    var d;\n    if (u(c)) {\n      var b = 0;\n      for (d = c.length; b < d; b++)\n        if (!p(a, c[b])) return !1;\n      return !0\n    }\n    var m = z(c);\n    b = 0;\n    for (d = a.length; b < d; b++)\n      if (\"RegExp\" === m) {\n        if (\"string\" === typeof a[b] && a[b].match(c)) return !0\n      } else if (a[b] === c) return !0;\n    return !1\n  }\n\n  function D(a, c) {\n    if (!u(a) || !u(c) || a.length !== c.length) return !1;\n    a.sort();\n    c.sort();\n    for (var d = 0, b = a.length; d < b; d++)\n      if (a[d] !== c[d]) return !1;\n    return !0\n  }\n\n  function A(a) {\n    return a.replace(/^\\/+|\\/+$/g,\n      \"\")\n  }\n\n  function B(a) {\n    return escape(a)\n  }\n\n  function E(a) {\n    return encodeURIComponent(a).replace(/[!'()*]/g, B).replace(/\\*/g, \"%2A\")\n  }\n\n  function r(a) {\n    return function(c, d) {\n      if (void 0 === c) return this._parts[a] || \"\";\n      this._parts[a] = c || null;\n      this.build(!d);\n      return this\n    }\n  }\n\n  function C(a, c) {\n    return function(d, b) {\n      if (void 0 === d) return this._parts[a] || \"\";\n      null !== d && (d += \"\", d.charAt(0) === c && (d = d.substring(1)));\n      this._parts[a] = d;\n      this.build(!b);\n      return this\n    }\n  }\n  var w = k && k.URI;\n  b.version = \"1.19.1\";\n  var e = b.prototype,\n    t = Object.prototype.hasOwnProperty;\n  b._parts = function() {\n    return {\n      protocol: null,\n      username: null,\n      password: null,\n      hostname: null,\n      urn: null,\n      port: null,\n      path: null,\n      query: null,\n      fragment: null,\n      preventInvalidHostname: b.preventInvalidHostname,\n      duplicateQueryParameters: b.duplicateQueryParameters,\n      escapeQuerySpace: b.escapeQuerySpace\n    }\n  };\n  b.preventInvalidHostname = !1;\n  b.duplicateQueryParameters = !1;\n  b.escapeQuerySpace = !0;\n  b.protocol_expression = /^[a-z][a-z0-9.+-]*$/i;\n  b.idn_expression = /[^a-z0-9\\._-]/i;\n  b.punycode_expression = /(xn--)/i;\n  b.ip4_expression = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\n  b.ip6_expression = /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/;\n  b.find_uri_expression = /\\b((?:[a-z][\\w-]+:(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?\\u00ab\\u00bb\\u201c\\u201d\\u2018\\u2019]))/ig;\n  b.findUri = {\n    start: /\\b(?:([a-z][a-z0-9.+-]*:\\/\\/)|www\\.)/gi,\n    end: /[\\s\\r\\n]|$/,\n    trim: /[`!()\\[\\]{};:'\".,<>?\\u00ab\\u00bb\\u201c\\u201d\\u201e\\u2018\\u2019]+$/,\n    parens: /(\\([^\\)]*\\)|\\[[^\\]]*\\]|\\{[^}]*\\}|<[^>]*>)/g\n  };\n  b.defaultPorts = {\n    http: \"80\",\n    https: \"443\",\n    ftp: \"21\",\n    gopher: \"70\",\n    ws: \"80\",\n    wss: \"443\"\n  };\n  b.hostProtocols = [\"http\", \"https\"];\n  b.invalid_hostname_characters = /[^a-zA-Z0-9\\.\\-:_]/;\n  b.domAttributes = {\n    a: \"href\",\n    blockquote: \"cite\",\n    link: \"href\",\n    base: \"href\",\n    script: \"src\",\n    form: \"action\",\n    img: \"src\",\n    area: \"href\",\n    iframe: \"src\",\n    embed: \"src\",\n    source: \"src\",\n    track: \"src\",\n    input: \"src\",\n    audio: \"src\",\n    video: \"src\"\n  };\n  b.getDomAttribute = function(a) {\n    if (a && a.nodeName) {\n      var c = a.nodeName.toLowerCase();\n      if (\"input\" !== c || \"image\" === a.type) return b.domAttributes[c]\n    }\n  };\n  b.encode = E;\n  b.decode = decodeURIComponent;\n  b.iso8859 =\n    function() {\n      b.encode = escape;\n      b.decode = unescape\n    };\n  b.unicode = function() {\n    b.encode = E;\n    b.decode = decodeURIComponent\n  };\n  b.characters = {\n    pathname: {\n      encode: {\n        expression: /%(24|26|2B|2C|3B|3D|3A|40)/ig,\n        map: {\n          \"%24\": \"$\",\n          \"%26\": \"&\",\n          \"%2B\": \"+\",\n          \"%2C\": \",\",\n          \"%3B\": \";\",\n          \"%3D\": \"=\",\n          \"%3A\": \":\",\n          \"%40\": \"@\"\n        }\n      },\n      decode: {\n        expression: /[\\/\\?#]/g,\n        map: {\n          \"/\": \"%2F\",\n          \"?\": \"%3F\",\n          \"#\": \"%23\"\n        }\n      }\n    },\n    reserved: {\n      encode: {\n        expression: /%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,\n        map: {\n          \"%3A\": \":\",\n          \"%2F\": \"/\",\n          \"%3F\": \"?\",\n          \"%23\": \"#\",\n          \"%5B\": \"[\",\n          \"%5D\": \"]\",\n          \"%40\": \"@\",\n          \"%21\": \"!\",\n          \"%24\": \"$\",\n          \"%26\": \"&\",\n          \"%27\": \"'\",\n          \"%28\": \"(\",\n          \"%29\": \")\",\n          \"%2A\": \"*\",\n          \"%2B\": \"+\",\n          \"%2C\": \",\",\n          \"%3B\": \";\",\n          \"%3D\": \"=\"\n        }\n      }\n    },\n    urnpath: {\n      encode: {\n        expression: /%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,\n        map: {\n          \"%21\": \"!\",\n          \"%24\": \"$\",\n          \"%27\": \"'\",\n          \"%28\": \"(\",\n          \"%29\": \")\",\n          \"%2A\": \"*\",\n          \"%2B\": \"+\",\n          \"%2C\": \",\",\n          \"%3B\": \";\",\n          \"%3D\": \"=\",\n          \"%40\": \"@\"\n        }\n      },\n      decode: {\n        expression: /[\\/\\?#:]/g,\n        map: {\n          \"/\": \"%2F\",\n          \"?\": \"%3F\",\n          \"#\": \"%23\",\n          \":\": \"%3A\"\n        }\n      }\n    }\n  };\n  b.encodeQuery = function(a, c) {\n    var d = b.encode(a + \"\");\n    void 0 === c && (c = b.escapeQuerySpace);\n    return c ? d.replace(/%20/g, \"+\") : d\n  };\n  b.decodeQuery =\n    function(a, c) {\n      a += \"\";\n      void 0 === c && (c = b.escapeQuerySpace);\n      try {\n        return b.decode(c ? a.replace(/\\+/g, \"%20\") : a)\n      } catch (d) {\n        return a\n      }\n    };\n  var y = {\n      encode: \"encode\",\n      decode: \"decode\"\n    },\n    v, F = function(a, c) {\n      return function(d) {\n        try {\n          return b[c](d + \"\").replace(b.characters[a][c].expression, function(d) {\n            return b.characters[a][c].map[d]\n          })\n        } catch (l) {\n          return d\n        }\n      }\n    };\n  for (v in y) b[v + \"PathSegment\"] = F(\"pathname\", y[v]), b[v + \"UrnPathSegment\"] = F(\"urnpath\", y[v]);\n  y = function(a, c, d) {\n    return function(l) {\n      var m = d ? function(a) {\n        return b[c](b[d](a))\n      } : b[c];\n      l = (l + \"\").split(a);\n      for (var e = 0, g = l.length; e < g; e++) l[e] = m(l[e]);\n      return l.join(a)\n    }\n  };\n  b.decodePath = y(\"/\", \"decodePathSegment\");\n  b.decodeUrnPath = y(\":\", \"decodeUrnPathSegment\");\n  b.recodePath = y(\"/\", \"encodePathSegment\", \"decode\");\n  b.recodeUrnPath = y(\":\", \"encodeUrnPathSegment\", \"decode\");\n  b.encodeReserved = F(\"reserved\", \"encode\");\n  b.parse = function(a, c) {\n    c || (c = {\n      preventInvalidHostname: b.preventInvalidHostname\n    });\n    var d = a.indexOf(\"#\"); - 1 < d && (c.fragment = a.substring(d + 1) || null, a = a.substring(0, d));\n    d = a.indexOf(\"?\"); - 1 < d && (c.query =\n      a.substring(d + 1) || null, a = a.substring(0, d));\n    \"//\" === a.substring(0, 2) ? (c.protocol = null, a = a.substring(2), a = b.parseAuthority(a, c)) : (d = a.indexOf(\":\"), -1 < d && (c.protocol = a.substring(0, d) || null, c.protocol && !c.protocol.match(b.protocol_expression) ? c.protocol = void 0 : \"//\" === a.substring(d + 1, d + 3) ? (a = a.substring(d + 3), a = b.parseAuthority(a, c)) : (a = a.substring(d + 1), c.urn = !0)));\n    c.path = a;\n    return c\n  };\n  b.parseHost = function(a, c) {\n    a || (a = \"\");\n    a = a.replace(/\\\\/g, \"/\");\n    var d = a.indexOf(\"/\"); - 1 === d && (d = a.length);\n    if (\"[\" === a.charAt(0)) {\n      var l =\n        a.indexOf(\"]\");\n      c.hostname = a.substring(1, l) || null;\n      c.port = a.substring(l + 2, d) || null;\n      \"/\" === c.port && (c.port = null)\n    } else {\n      var m = a.indexOf(\":\");\n      l = a.indexOf(\"/\");\n      m = a.indexOf(\":\", m + 1); - 1 !== m && (-1 === l || m < l) ? (c.hostname = a.substring(0, d) || null, c.port = null) : (l = a.substring(0, d).split(\":\"), c.hostname = l[0] || null, c.port = l[1] || null)\n    }\n    c.hostname && \"/\" !== a.substring(d).charAt(0) && (d++, a = \"/\" + a);\n    c.preventInvalidHostname && b.ensureValidHostname(c.hostname, c.protocol);\n    c.port && b.ensureValidPort(c.port);\n    return a.substring(d) ||\n      \"/\"\n  };\n  b.parseAuthority = function(a, c) {\n    a = b.parseUserinfo(a, c);\n    return b.parseHost(a, c)\n  };\n  b.parseUserinfo = function(a, c) {\n    var d = a.indexOf(\"/\"),\n      l = a.lastIndexOf(\"@\", -1 < d ? d : a.length - 1); - 1 < l && (-1 === d || l < d) ? (d = a.substring(0, l).split(\":\"), c.username = d[0] ? b.decode(d[0]) : null, d.shift(), c.password = d[0] ? b.decode(d.join(\":\")) : null, a = a.substring(l + 1)) : (c.username = null, c.password = null);\n    return a\n  };\n  b.parseQuery = function(a, c) {\n    if (!a) return {};\n    a = a.replace(/&+/g, \"&\").replace(/^\\?*&*|&+$/g, \"\");\n    if (!a) return {};\n    for (var d = {}, l = a.split(\"&\"),\n        m = l.length, e, g, f = 0; f < m; f++)\n      if (e = l[f].split(\"=\"), g = b.decodeQuery(e.shift(), c), e = e.length ? b.decodeQuery(e.join(\"=\"), c) : null, t.call(d, g)) {\n        if (\"string\" === typeof d[g] || null === d[g]) d[g] = [d[g]];\n        d[g].push(e)\n      } else d[g] = e;\n    return d\n  };\n  b.build = function(a) {\n    var c = \"\";\n    a.protocol && (c += a.protocol + \":\");\n    a.urn || !c && !a.hostname || (c += \"//\");\n    c += b.buildAuthority(a) || \"\";\n    \"string\" === typeof a.path && (\"/\" !== a.path.charAt(0) && \"string\" === typeof a.hostname && (c += \"/\"), c += a.path);\n    \"string\" === typeof a.query && a.query && (c += \"?\" + a.query);\n    \"string\" ===\n    typeof a.fragment && a.fragment && (c += \"#\" + a.fragment);\n    return c\n  };\n  b.buildHost = function(a) {\n    var c = \"\";\n    if (a.hostname) c = b.ip6_expression.test(a.hostname) ? c + (\"[\" + a.hostname + \"]\") : c + a.hostname;\n    else return \"\";\n    a.port && (c += \":\" + a.port);\n    return c\n  };\n  b.buildAuthority = function(a) {\n    return b.buildUserinfo(a) + b.buildHost(a)\n  };\n  b.buildUserinfo = function(a) {\n    var c = \"\";\n    a.username && (c += b.encode(a.username));\n    a.password && (c += \":\" + b.encode(a.password));\n    c && (c += \"@\");\n    return c\n  };\n  b.buildQuery = function(a, c, d) {\n    var l = \"\",\n      m, e;\n    for (m in a)\n      if (t.call(a,\n          m) && m)\n        if (u(a[m])) {\n          var g = {};\n          var f = 0;\n          for (e = a[m].length; f < e; f++) void 0 !== a[m][f] && void 0 === g[a[m][f] + \"\"] && (l += \"&\" + b.buildQueryParameter(m, a[m][f], d), !0 !== c && (g[a[m][f] + \"\"] = !0))\n        } else void 0 !== a[m] && (l += \"&\" + b.buildQueryParameter(m, a[m], d));\n    return l.substring(1)\n  };\n  b.buildQueryParameter = function(a, c, d) {\n    return b.encodeQuery(a, d) + (null !== c ? \"=\" + b.encodeQuery(c, d) : \"\")\n  };\n  b.addQuery = function(a, c, d) {\n    if (\"object\" === typeof c)\n      for (var l in c) t.call(c, l) && b.addQuery(a, l, c[l]);\n    else if (\"string\" === typeof c) void 0 === a[c] ?\n      a[c] = d : (\"string\" === typeof a[c] && (a[c] = [a[c]]), u(d) || (d = [d]), a[c] = (a[c] || []).concat(d));\n    else throw new TypeError(\"URI.addQuery() accepts an object, string as the name parameter\");\n  };\n  b.setQuery = function(a, c, d) {\n    if (\"object\" === typeof c)\n      for (var l in c) t.call(c, l) && b.setQuery(a, l, c[l]);\n    else if (\"string\" === typeof c) a[c] = void 0 === d ? null : d;\n    else throw new TypeError(\"URI.setQuery() accepts an object, string as the name parameter\");\n  };\n  b.removeQuery = function(a, c, d) {\n    var l;\n    if (u(c))\n      for (d = 0, l = c.length; d < l; d++) a[c[d]] =\n        void 0;\n    else if (\"RegExp\" === z(c))\n      for (l in a) c.test(l) && (a[l] = void 0);\n    else if (\"object\" === typeof c)\n      for (l in c) t.call(c, l) && b.removeQuery(a, l, c[l]);\n    else if (\"string\" === typeof c) void 0 !== d ? \"RegExp\" === z(d) ? !u(a[c]) && d.test(a[c]) ? a[c] = void 0 : a[c] = g(a[c], d) : a[c] !== String(d) || u(d) && 1 !== d.length ? u(a[c]) && (a[c] = g(a[c], d)) : a[c] = void 0 : a[c] = void 0;\n    else throw new TypeError(\"URI.removeQuery() accepts an object, string, RegExp as the first parameter\");\n  };\n  b.hasQuery = function(a, c, d, l) {\n    switch (z(c)) {\n      case \"String\":\n        break;\n      case \"RegExp\":\n        for (var m in a)\n          if (t.call(a, m) && c.test(m) && (void 0 === d || b.hasQuery(a, m, d))) return !0;\n        return !1;\n      case \"Object\":\n        for (var e in c)\n          if (t.call(c, e) && !b.hasQuery(a, e, c[e])) return !1;\n        return !0;\n      default:\n        throw new TypeError(\"URI.hasQuery() accepts a string, regular expression or object as the name parameter\");\n    }\n    switch (z(d)) {\n      case \"Undefined\":\n        return c in a;\n      case \"Boolean\":\n        return a = !(u(a[c]) ? !a[c].length : !a[c]), d === a;\n      case \"Function\":\n        return !!d(a[c], c, a);\n      case \"Array\":\n        return u(a[c]) ? (l ? p : D)(a[c], d) : !1;\n      case \"RegExp\":\n        return u(a[c]) ?\n          l ? p(a[c], d) : !1 : !(!a[c] || !a[c].match(d));\n      case \"Number\":\n        d = String(d);\n      case \"String\":\n        return u(a[c]) ? l ? p(a[c], d) : !1 : a[c] === d;\n      default:\n        throw new TypeError(\"URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter\");\n    }\n  };\n  b.joinPaths = function() {\n    for (var a = [], c = [], d = 0, l = 0; l < arguments.length; l++) {\n      var m = new b(arguments[l]);\n      a.push(m);\n      m = m.segment();\n      for (var e = 0; e < m.length; e++) \"string\" === typeof m[e] && c.push(m[e]), m[e] && d++\n    }\n    if (!c.length || !d) return new b(\"\");\n    c = (new b(\"\")).segment(c);\n    \"\" !== a[0].path() && \"/\" !== a[0].path().slice(0, 1) || c.path(\"/\" + c.path());\n    return c.normalize()\n  };\n  b.commonPath = function(a, c) {\n    var d = Math.min(a.length, c.length),\n      b;\n    for (b = 0; b < d; b++)\n      if (a.charAt(b) !== c.charAt(b)) {\n        b--;\n        break\n      }\n    if (1 > b) return a.charAt(0) === c.charAt(0) && \"/\" === a.charAt(0) ? \"/\" : \"\";\n    if (\"/\" !== a.charAt(b) || \"/\" !== c.charAt(b)) b = a.substring(0, b).lastIndexOf(\"/\");\n    return a.substring(0, b + 1)\n  };\n  b.withinString = function(a, c, d) {\n    d || (d = {});\n    var l = d.start || b.findUri.start,\n      m = d.end || b.findUri.end,\n      e = d.trim || b.findUri.trim,\n      g =\n      d.parens || b.findUri.parens,\n      f = /[a-z0-9-]=[\"']?$/i;\n    for (l.lastIndex = 0;;) {\n      var h = l.exec(a);\n      if (!h) break;\n      var k = h.index;\n      if (d.ignoreHtml) {\n        var p = a.slice(Math.max(k - 3, 0), k);\n        if (p && f.test(p)) continue\n      }\n      var n = k + a.slice(k).search(m);\n      p = a.slice(k, n);\n      for (n = -1;;) {\n        var r = g.exec(p);\n        if (!r) break;\n        n = Math.max(n, r.index + r[0].length)\n      }\n      p = -1 < n ? p.slice(0, n) + p.slice(n).replace(e, \"\") : p.replace(e, \"\");\n      p.length <= h[0].length || d.ignore && d.ignore.test(p) || (n = k + p.length, h = c(p, k, n, a), void 0 === h ? l.lastIndex = n : (h = String(h), a = a.slice(0, k) + h + a.slice(n),\n        l.lastIndex = k + h.length))\n    }\n    l.lastIndex = 0;\n    return a\n  };\n  b.ensureValidHostname = function(a, c) {\n    var d = !!a,\n      l = !1;\n    c && (l = p(b.hostProtocols, c));\n    if (l && !d) throw new TypeError(\"Hostname cannot be empty, if protocol is \" + c);\n    if (a && a.match(b.invalid_hostname_characters)) {\n      if (!f) throw new TypeError('Hostname \"' + a + '\" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');\n      if (f.toASCII(a).match(b.invalid_hostname_characters)) throw new TypeError('Hostname \"' + a + '\" contains characters other than [A-Z0-9.-:_]');\n    }\n  };\n  b.ensureValidPort = function(a) {\n    if (a) {\n      var c = Number(a);\n      if (!(/^[0-9]+$/.test(c) && 0 < c && 65536 > c)) throw new TypeError('Port \"' + a + '\" is not a valid port');\n    }\n  };\n  b.noConflict = function(a) {\n    if (a) return a = {\n        URI: this.noConflict()\n      }, k.URITemplate && \"function\" === typeof k.URITemplate.noConflict && (a.URITemplate = k.URITemplate.noConflict()), k.IPv6 && \"function\" === typeof k.IPv6.noConflict && (a.IPv6 = k.IPv6.noConflict()), k.SecondLevelDomains && \"function\" === typeof k.SecondLevelDomains.noConflict && (a.SecondLevelDomains = k.SecondLevelDomains.noConflict()),\n      a;\n    k.URI === this && (k.URI = w);\n    return this\n  };\n  e.build = function(a) {\n    if (!0 === a) this._deferred_build = !0;\n    else if (void 0 === a || this._deferred_build) this._string = b.build(this._parts), this._deferred_build = !1;\n    return this\n  };\n  e.clone = function() {\n    return new b(this)\n  };\n  e.valueOf = e.toString = function() {\n    return this.build(!1)._string\n  };\n  e.protocol = r(\"protocol\");\n  e.username = r(\"username\");\n  e.password = r(\"password\");\n  e.hostname = r(\"hostname\");\n  e.port = r(\"port\");\n  e.query = C(\"query\", \"?\");\n  e.fragment = C(\"fragment\", \"#\");\n  e.search = function(a, c) {\n    var b =\n      this.query(a, c);\n    return \"string\" === typeof b && b.length ? \"?\" + b : b\n  };\n  e.hash = function(a, c) {\n    var b = this.fragment(a, c);\n    return \"string\" === typeof b && b.length ? \"#\" + b : b\n  };\n  e.pathname = function(a, c) {\n    if (void 0 === a || !0 === a) {\n      var d = this._parts.path || (this._parts.hostname ? \"/\" : \"\");\n      return a ? (this._parts.urn ? b.decodeUrnPath : b.decodePath)(d) : d\n    }\n    this._parts.path = this._parts.urn ? a ? b.recodeUrnPath(a) : \"\" : a ? b.recodePath(a) : \"/\";\n    this.build(!c);\n    return this\n  };\n  e.path = e.pathname;\n  e.href = function(a, c) {\n    var d;\n    if (void 0 === a) return this.toString();\n    this._string = \"\";\n    this._parts = b._parts();\n    var l = a instanceof b,\n      e = \"object\" === typeof a && (a.hostname || a.path || a.pathname);\n    a.nodeName && (e = b.getDomAttribute(a), a = a[e] || \"\", e = !1);\n    !l && e && void 0 !== a.pathname && (a = a.toString());\n    if (\"string\" === typeof a || a instanceof String) this._parts = b.parse(String(a), this._parts);\n    else if (l || e) {\n      l = l ? a._parts : a;\n      for (d in l) \"query\" !== d && t.call(this._parts, d) && (this._parts[d] = l[d]);\n      l.query && this.query(l.query, !1)\n    } else throw new TypeError(\"invalid input\");\n    this.build(!c);\n    return this\n  };\n  e.is = function(a) {\n    var c = !1,\n      d = !1,\n      e = !1,\n      m = !1,\n      g = !1,\n      f = !1,\n      k = !1,\n      p = !this._parts.urn;\n    this._parts.hostname && (p = !1, d = b.ip4_expression.test(this._parts.hostname), e = b.ip6_expression.test(this._parts.hostname), c = d || e, g = (m = !c) && h && h.has(this._parts.hostname), f = m && b.idn_expression.test(this._parts.hostname), k = m && b.punycode_expression.test(this._parts.hostname));\n    switch (a.toLowerCase()) {\n      case \"relative\":\n        return p;\n      case \"absolute\":\n        return !p;\n      case \"domain\":\n      case \"name\":\n        return m;\n      case \"sld\":\n        return g;\n      case \"ip\":\n        return c;\n      case \"ip4\":\n      case \"ipv4\":\n      case \"inet4\":\n        return d;\n      case \"ip6\":\n      case \"ipv6\":\n      case \"inet6\":\n        return e;\n      case \"idn\":\n        return f;\n      case \"url\":\n        return !this._parts.urn;\n      case \"urn\":\n        return !!this._parts.urn;\n      case \"punycode\":\n        return k\n    }\n    return null\n  };\n  var G = e.protocol,\n    H = e.port,\n    I = e.hostname;\n  e.protocol = function(a, c) {\n    if (a && (a = a.replace(/:(\\/\\/)?$/, \"\"), !a.match(b.protocol_expression))) throw new TypeError('Protocol \"' + a + \"\\\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]\");\n    return G.call(this, a, c)\n  };\n  e.scheme = e.protocol;\n  e.port = function(a, c) {\n    if (this._parts.urn) return void 0 ===\n      a ? \"\" : this;\n    void 0 !== a && (0 === a && (a = null), a && (a += \"\", \":\" === a.charAt(0) && (a = a.substring(1)), b.ensureValidPort(a)));\n    return H.call(this, a, c)\n  };\n  e.hostname = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    if (void 0 !== a) {\n      var d = {\n        preventInvalidHostname: this._parts.preventInvalidHostname\n      };\n      if (\"/\" !== b.parseHost(a, d)) throw new TypeError('Hostname \"' + a + '\" contains characters other than [A-Z0-9.-]');\n      a = d.hostname;\n      this._parts.preventInvalidHostname && b.ensureValidHostname(a, this._parts.protocol)\n    }\n    return I.call(this,\n      a, c)\n  };\n  e.origin = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    if (void 0 === a) {\n      var d = this.protocol();\n      return this.authority() ? (d ? d + \"://\" : \"\") + this.authority() : \"\"\n    }\n    d = b(a);\n    this.protocol(d.protocol()).authority(d.authority()).build(!c);\n    return this\n  };\n  e.host = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    if (void 0 === a) return this._parts.hostname ? b.buildHost(this._parts) : \"\";\n    if (\"/\" !== b.parseHost(a, this._parts)) throw new TypeError('Hostname \"' + a + '\" contains characters other than [A-Z0-9.-]');\n    this.build(!c);\n    return this\n  };\n  e.authority = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    if (void 0 === a) return this._parts.hostname ? b.buildAuthority(this._parts) : \"\";\n    if (\"/\" !== b.parseAuthority(a, this._parts)) throw new TypeError('Hostname \"' + a + '\" contains characters other than [A-Z0-9.-]');\n    this.build(!c);\n    return this\n  };\n  e.userinfo = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    if (void 0 === a) {\n      var d = b.buildUserinfo(this._parts);\n      return d ? d.substring(0, d.length - 1) : d\n    }\n    \"@\" !== a[a.length - 1] &&\n      (a += \"@\");\n    b.parseUserinfo(a, this._parts);\n    this.build(!c);\n    return this\n  };\n  e.resource = function(a, c) {\n    if (void 0 === a) return this.path() + this.search() + this.hash();\n    var d = b.parse(a);\n    this._parts.path = d.path;\n    this._parts.query = d.query;\n    this._parts.fragment = d.fragment;\n    this.build(!c);\n    return this\n  };\n  e.subdomain = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    if (void 0 === a) {\n      if (!this._parts.hostname || this.is(\"IP\")) return \"\";\n      var d = this._parts.hostname.length - this.domain().length - 1;\n      return this._parts.hostname.substring(0,\n        d) || \"\"\n    }\n    d = this._parts.hostname.length - this.domain().length;\n    d = this._parts.hostname.substring(0, d);\n    d = new RegExp(\"^\" + q(d));\n    a && \".\" !== a.charAt(a.length - 1) && (a += \".\");\n    if (-1 !== a.indexOf(\":\")) throw new TypeError(\"Domains cannot contain colons\");\n    a && b.ensureValidHostname(a, this._parts.protocol);\n    this._parts.hostname = this._parts.hostname.replace(d, a);\n    this.build(!c);\n    return this\n  };\n  e.domain = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    \"boolean\" === typeof a && (c = a, a = void 0);\n    if (void 0 === a) {\n      if (!this._parts.hostname ||\n        this.is(\"IP\")) return \"\";\n      var d = this._parts.hostname.match(/\\./g);\n      if (d && 2 > d.length) return this._parts.hostname;\n      d = this._parts.hostname.length - this.tld(c).length - 1;\n      d = this._parts.hostname.lastIndexOf(\".\", d - 1) + 1;\n      return this._parts.hostname.substring(d) || \"\"\n    }\n    if (!a) throw new TypeError(\"cannot set domain empty\");\n    if (-1 !== a.indexOf(\":\")) throw new TypeError(\"Domains cannot contain colons\");\n    b.ensureValidHostname(a, this._parts.protocol);\n    !this._parts.hostname || this.is(\"IP\") ? this._parts.hostname = a : (d = new RegExp(q(this.domain()) +\n      \"$\"), this._parts.hostname = this._parts.hostname.replace(d, a));\n    this.build(!c);\n    return this\n  };\n  e.tld = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    \"boolean\" === typeof a && (c = a, a = void 0);\n    if (void 0 === a) {\n      if (!this._parts.hostname || this.is(\"IP\")) return \"\";\n      var b = this._parts.hostname.lastIndexOf(\".\");\n      b = this._parts.hostname.substring(b + 1);\n      return !0 !== c && h && h.list[b.toLowerCase()] ? h.get(this._parts.hostname) || b : b\n    }\n    if (a)\n      if (a.match(/[^a-zA-Z0-9-]/))\n        if (h && h.is(a)) b = new RegExp(q(this.tld()) + \"$\"), this._parts.hostname =\n          this._parts.hostname.replace(b, a);\n        else throw new TypeError('TLD \"' + a + '\" contains characters other than [A-Z0-9]');\n    else {\n      if (!this._parts.hostname || this.is(\"IP\")) throw new ReferenceError(\"cannot set TLD on non-domain host\");\n      b = new RegExp(q(this.tld()) + \"$\");\n      this._parts.hostname = this._parts.hostname.replace(b, a)\n    } else throw new TypeError(\"cannot set TLD empty\");\n    this.build(!c);\n    return this\n  };\n  e.directory = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    if (void 0 === a || !0 === a) {\n      if (!this._parts.path &&\n        !this._parts.hostname) return \"\";\n      if (\"/\" === this._parts.path) return \"/\";\n      var d = this._parts.path.length - this.filename().length - 1;\n      d = this._parts.path.substring(0, d) || (this._parts.hostname ? \"/\" : \"\");\n      return a ? b.decodePath(d) : d\n    }\n    d = this._parts.path.length - this.filename().length;\n    d = this._parts.path.substring(0, d);\n    d = new RegExp(\"^\" + q(d));\n    this.is(\"relative\") || (a || (a = \"/\"), \"/\" !== a.charAt(0) && (a = \"/\" + a));\n    a && \"/\" !== a.charAt(a.length - 1) && (a += \"/\");\n    a = b.recodePath(a);\n    this._parts.path = this._parts.path.replace(d, a);\n    this.build(!c);\n    return this\n  };\n  e.filename = function(a, c) {\n    if (this._parts.urn) return void 0 === a ? \"\" : this;\n    if (\"string\" !== typeof a) {\n      if (!this._parts.path || \"/\" === this._parts.path) return \"\";\n      var d = this._parts.path.lastIndexOf(\"/\");\n      d = this._parts.path.substring(d + 1);\n      return a ? b.decodePathSegment(d) : d\n    }\n    d = !1;\n    \"/\" === a.charAt(0) && (a = a.substring(1));\n    a.match(/\\.?\\//) && (d = !0);\n    var e = new RegExp(q(this.filename()) + \"$\");\n    a = b.recodePath(a);\n    this._parts.path = this._parts.path.replace(e, a);\n    d ? this.normalizePath(c) : this.build(!c);\n    return this\n  };\n  e.suffix =\n    function(a, c) {\n      if (this._parts.urn) return void 0 === a ? \"\" : this;\n      if (void 0 === a || !0 === a) {\n        if (!this._parts.path || \"/\" === this._parts.path) return \"\";\n        var d = this.filename(),\n          e = d.lastIndexOf(\".\");\n        if (-1 === e) return \"\";\n        d = d.substring(e + 1);\n        d = /^[a-z0-9%]+$/i.test(d) ? d : \"\";\n        return a ? b.decodePathSegment(d) : d\n      }\n      \".\" === a.charAt(0) && (a = a.substring(1));\n      if (d = this.suffix()) e = a ? new RegExp(q(d) + \"$\") : new RegExp(q(\".\" + d) + \"$\");\n      else {\n        if (!a) return this;\n        this._parts.path += \".\" + b.recodePath(a)\n      }\n      e && (a = b.recodePath(a), this._parts.path = this._parts.path.replace(e,\n        a));\n      this.build(!c);\n      return this\n    };\n  e.segment = function(a, c, b) {\n    var d = this._parts.urn ? \":\" : \"/\",\n      e = this.path(),\n      g = \"/\" === e.substring(0, 1);\n    e = e.split(d);\n    void 0 !== a && \"number\" !== typeof a && (b = c, c = a, a = void 0);\n    if (void 0 !== a && \"number\" !== typeof a) throw Error('Bad segment \"' + a + '\", must be 0-based integer');\n    g && e.shift();\n    0 > a && (a = Math.max(e.length + a, 0));\n    if (void 0 === c) return void 0 === a ? e : e[a];\n    if (null === a || void 0 === e[a])\n      if (u(c)) {\n        e = [];\n        a = 0;\n        for (var f = c.length; a < f; a++)\n          if (c[a].length || e.length && e[e.length - 1].length) e.length && !e[e.length -\n            1].length && e.pop(), e.push(A(c[a]))\n      } else {\n        if (c || \"string\" === typeof c) c = A(c), \"\" === e[e.length - 1] ? e[e.length - 1] = c : e.push(c)\n      }\n    else c ? e[a] = A(c) : e.splice(a, 1);\n    g && e.unshift(\"\");\n    return this.path(e.join(d), b)\n  };\n  e.segmentCoded = function(a, c, d) {\n    var e;\n    \"number\" !== typeof a && (d = c, c = a, a = void 0);\n    if (void 0 === c) {\n      a = this.segment(a, c, d);\n      if (u(a)) {\n        var g = 0;\n        for (e = a.length; g < e; g++) a[g] = b.decode(a[g])\n      } else a = void 0 !== a ? b.decode(a) : void 0;\n      return a\n    }\n    if (u(c))\n      for (g = 0, e = c.length; g < e; g++) c[g] = b.encode(c[g]);\n    else c = \"string\" === typeof c || c instanceof\n    String ? b.encode(c) : c;\n    return this.segment(a, c, d)\n  };\n  var J = e.query;\n  e.query = function(a, c) {\n    if (!0 === a) return b.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    if (\"function\" === typeof a) {\n      var d = b.parseQuery(this._parts.query, this._parts.escapeQuerySpace),\n        e = a.call(this, d);\n      this._parts.query = b.buildQuery(e || d, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n      this.build(!c);\n      return this\n    }\n    return void 0 !== a && \"string\" !== typeof a ? (this._parts.query = b.buildQuery(a, this._parts.duplicateQueryParameters,\n      this._parts.escapeQuerySpace), this.build(!c), this) : J.call(this, a, c)\n  };\n  e.setQuery = function(a, c, d) {\n    var e = b.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    if (\"string\" === typeof a || a instanceof String) e[a] = void 0 !== c ? c : null;\n    else if (\"object\" === typeof a)\n      for (var g in a) t.call(a, g) && (e[g] = a[g]);\n    else throw new TypeError(\"URI.addQuery() accepts an object, string as the name parameter\");\n    this._parts.query = b.buildQuery(e, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    \"string\" !== typeof a &&\n      (d = c);\n    this.build(!d);\n    return this\n  };\n  e.addQuery = function(a, c, d) {\n    var e = b.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    b.addQuery(e, a, void 0 === c ? null : c);\n    this._parts.query = b.buildQuery(e, this._parts.duplicateQueryParameters, this._parts.escapeQuerySpace);\n    \"string\" !== typeof a && (d = c);\n    this.build(!d);\n    return this\n  };\n  e.removeQuery = function(a, c, d) {\n    var e = b.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    b.removeQuery(e, a, c);\n    this._parts.query = b.buildQuery(e, this._parts.duplicateQueryParameters,\n      this._parts.escapeQuerySpace);\n    \"string\" !== typeof a && (d = c);\n    this.build(!d);\n    return this\n  };\n  e.hasQuery = function(a, c, d) {\n    var e = b.parseQuery(this._parts.query, this._parts.escapeQuerySpace);\n    return b.hasQuery(e, a, c, d)\n  };\n  e.setSearch = e.setQuery;\n  e.addSearch = e.addQuery;\n  e.removeSearch = e.removeQuery;\n  e.hasSearch = e.hasQuery;\n  e.normalize = function() {\n    return this._parts.urn ? this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build() : this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()\n  };\n  e.normalizeProtocol = function(a) {\n    \"string\" === typeof this._parts.protocol && (this._parts.protocol = this._parts.protocol.toLowerCase(), this.build(!a));\n    return this\n  };\n  e.normalizeHostname = function(a) {\n    this._parts.hostname && (this.is(\"IDN\") && f ? this._parts.hostname = f.toASCII(this._parts.hostname) : this.is(\"IPv6\") && n && (this._parts.hostname = n.best(this._parts.hostname)), this._parts.hostname = this._parts.hostname.toLowerCase(), this.build(!a));\n    return this\n  };\n  e.normalizePort = function(a) {\n    \"string\" === typeof this._parts.protocol &&\n      this._parts.port === b.defaultPorts[this._parts.protocol] && (this._parts.port = null, this.build(!a));\n    return this\n  };\n  e.normalizePath = function(a) {\n    var c = this._parts.path;\n    if (!c) return this;\n    if (this._parts.urn) return this._parts.path = b.recodeUrnPath(this._parts.path), this.build(!a), this;\n    if (\"/\" === this._parts.path) return this;\n    c = b.recodePath(c);\n    var d = \"\";\n    if (\"/\" !== c.charAt(0)) {\n      var e = !0;\n      c = \"/\" + c\n    }\n    if (\"/..\" === c.slice(-3) || \"/.\" === c.slice(-2)) c += \"/\";\n    c = c.replace(/(\\/(\\.\\/)+)|(\\/\\.$)/g, \"/\").replace(/\\/{2,}/g, \"/\");\n    e && (d = c.substring(1).match(/^(\\.\\.\\/)+/) ||\n      \"\") && (d = d[0]);\n    for (;;) {\n      var g = c.search(/\\/\\.\\.(\\/|$)/);\n      if (-1 === g) break;\n      else if (0 === g) {\n        c = c.substring(3);\n        continue\n      }\n      var f = c.substring(0, g).lastIndexOf(\"/\"); - 1 === f && (f = g);\n      c = c.substring(0, f) + c.substring(g + 3)\n    }\n    e && this.is(\"relative\") && (c = d + c.substring(1));\n    this._parts.path = c;\n    this.build(!a);\n    return this\n  };\n  e.normalizePathname = e.normalizePath;\n  e.normalizeQuery = function(a) {\n    \"string\" === typeof this._parts.query && (this._parts.query.length ? this.query(b.parseQuery(this._parts.query, this._parts.escapeQuerySpace)) : this._parts.query =\n      null, this.build(!a));\n    return this\n  };\n  e.normalizeFragment = function(a) {\n    this._parts.fragment || (this._parts.fragment = null, this.build(!a));\n    return this\n  };\n  e.normalizeSearch = e.normalizeQuery;\n  e.normalizeHash = e.normalizeFragment;\n  e.iso8859 = function() {\n    var a = b.encode,\n      c = b.decode;\n    b.encode = escape;\n    b.decode = decodeURIComponent;\n    try {\n      this.normalize()\n    } finally {\n      b.encode = a, b.decode = c\n    }\n    return this\n  };\n  e.unicode = function() {\n    var a = b.encode,\n      c = b.decode;\n    b.encode = E;\n    b.decode = unescape;\n    try {\n      this.normalize()\n    } finally {\n      b.encode = a, b.decode = c\n    }\n    return this\n  };\n  e.readable = function() {\n    var a = this.clone();\n    a.username(\"\").password(\"\").normalize();\n    var c = \"\";\n    a._parts.protocol && (c += a._parts.protocol + \"://\");\n    a._parts.hostname && (a.is(\"punycode\") && f ? (c += f.toUnicode(a._parts.hostname), a._parts.port && (c += \":\" + a._parts.port)) : c += a.host());\n    a._parts.hostname && a._parts.path && \"/\" !== a._parts.path.charAt(0) && (c += \"/\");\n    c += a.path(!0);\n    if (a._parts.query) {\n      for (var d = \"\", e = 0, g = a._parts.query.split(\"&\"), h = g.length; e < h; e++) {\n        var k = (g[e] || \"\").split(\"=\");\n        d += \"&\" + b.decodeQuery(k[0], this._parts.escapeQuerySpace).replace(/&/g,\n          \"%26\");\n        void 0 !== k[1] && (d += \"=\" + b.decodeQuery(k[1], this._parts.escapeQuerySpace).replace(/&/g, \"%26\"))\n      }\n      c += \"?\" + d.substring(1)\n    }\n    return c += b.decodeQuery(a.hash(), !0)\n  };\n  e.absoluteTo = function(a) {\n    var c = this.clone(),\n      d = [\"protocol\", \"username\", \"password\", \"hostname\", \"port\"],\n      e, g;\n    if (this._parts.urn) throw Error(\"URNs do not have any generally defined hierarchical components\");\n    a instanceof b || (a = new b(a));\n    if (c._parts.protocol) return c;\n    c._parts.protocol = a._parts.protocol;\n    if (this._parts.hostname) return c;\n    for (e = 0; g = d[e]; e++) c._parts[g] =\n      a._parts[g];\n    c._parts.path ? (\"..\" === c._parts.path.substring(-2) && (c._parts.path += \"/\"), \"/\" !== c.path().charAt(0) && (d = (d = a.directory()) ? d : 0 === a.path().indexOf(\"/\") ? \"/\" : \"\", c._parts.path = (d ? d + \"/\" : \"\") + c._parts.path, c.normalizePath())) : (c._parts.path = a._parts.path, c._parts.query || (c._parts.query = a._parts.query));\n    c.build();\n    return c\n  };\n  e.relativeTo = function(a) {\n    var c = this.clone().normalize();\n    if (c._parts.urn) throw Error(\"URNs do not have any generally defined hierarchical components\");\n    a = (new b(a)).normalize();\n    var d =\n      c._parts;\n    var e = a._parts;\n    var g = c.path();\n    a = a.path();\n    if (\"/\" !== g.charAt(0)) throw Error(\"URI is already relative\");\n    if (\"/\" !== a.charAt(0)) throw Error(\"Cannot calculate a URI relative to another relative URI\");\n    d.protocol === e.protocol && (d.protocol = null);\n    if (d.username === e.username && d.password === e.password && null === d.protocol && null === d.username && null === d.password && d.hostname === e.hostname && d.port === e.port) d.hostname = null, d.port = null;\n    else return c.build();\n    if (g === a) return d.path = \"\", c.build();\n    g = b.commonPath(g, a);\n    if (!g) return c.build();\n    e = e.path.substring(g.length).replace(/[^\\/]*$/, \"\").replace(/.*?\\//g, \"../\");\n    d.path = e + d.path.substring(g.length) || \"./\";\n    return c.build()\n  };\n  e.equals = function(a) {\n    var c = this.clone(),\n      d = new b(a);\n    a = {};\n    var e;\n    c.normalize();\n    d.normalize();\n    if (c.toString() === d.toString()) return !0;\n    var g = c.query();\n    var f = d.query();\n    c.query(\"\");\n    d.query(\"\");\n    if (c.toString() !== d.toString() || g.length !== f.length) return !1;\n    c = b.parseQuery(g, this._parts.escapeQuerySpace);\n    f = b.parseQuery(f, this._parts.escapeQuerySpace);\n    for (e in c)\n      if (t.call(c,\n          e)) {\n        if (!u(c[e])) {\n          if (c[e] !== f[e]) return !1\n        } else if (!D(c[e], f[e])) return !1;\n        a[e] = !0\n      }\n    for (e in f)\n      if (t.call(f, e) && !a[e]) return !1;\n    return !0\n  };\n  e.preventInvalidHostname = function(a) {\n    this._parts.preventInvalidHostname = !!a;\n    return this\n  };\n  e.duplicateQueryParameters = function(a) {\n    this._parts.duplicateQueryParameters = !!a;\n    return this\n  };\n  e.escapeQuerySpace = function(a) {\n    this._parts.escapeQuerySpace = !!a;\n    return this\n  };\n  return b\n});\n(function(f, n) {\n  \"object\" === typeof module && module.exports ? module.exports = n(require(\"./URI\")) : \"function\" === typeof define && define.amd ? define([\"./URI\"], n) : f.URITemplate = n(f.URI, f)\n})(this, function(f, n) {\n  function h(b) {\n    if (h._cache[b]) return h._cache[b];\n    if (!(this instanceof h)) return new h(b);\n    this.expression = b;\n    h._cache[b] = this;\n    return this\n  }\n\n  function k(b) {\n    this.data = b;\n    this.cache = {}\n  }\n  var b = n && n.URITemplate,\n    q = Object.prototype.hasOwnProperty,\n    z = h.prototype,\n    u = {\n      \"\": {\n        prefix: \"\",\n        separator: \",\",\n        named: !1,\n        empty_name_separator: !1,\n        encode: \"encode\"\n      },\n      \"+\": {\n        prefix: \"\",\n        separator: \",\",\n        named: !1,\n        empty_name_separator: !1,\n        encode: \"encodeReserved\"\n      },\n      \"#\": {\n        prefix: \"#\",\n        separator: \",\",\n        named: !1,\n        empty_name_separator: !1,\n        encode: \"encodeReserved\"\n      },\n      \".\": {\n        prefix: \".\",\n        separator: \".\",\n        named: !1,\n        empty_name_separator: !1,\n        encode: \"encode\"\n      },\n      \"/\": {\n        prefix: \"/\",\n        separator: \"/\",\n        named: !1,\n        empty_name_separator: !1,\n        encode: \"encode\"\n      },\n      \";\": {\n        prefix: \";\",\n        separator: \";\",\n        named: !0,\n        empty_name_separator: !1,\n        encode: \"encode\"\n      },\n      \"?\": {\n        prefix: \"?\",\n        separator: \"&\",\n        named: !0,\n        empty_name_separator: !0,\n        encode: \"encode\"\n      },\n      \"&\": {\n        prefix: \"&\",\n        separator: \"&\",\n        named: !0,\n        empty_name_separator: !0,\n        encode: \"encode\"\n      }\n    };\n  h._cache = {};\n  h.EXPRESSION_PATTERN = /\\{([^a-zA-Z0-9%_]?)([^\\}]+)(\\}|$)/g;\n  h.VARIABLE_PATTERN = /^([^*:.](?:\\.?[^*:.])*)((\\*)|:(\\d+))?$/;\n  h.VARIABLE_NAME_PATTERN = /[^a-zA-Z0-9%_.]/;\n  h.LITERAL_PATTERN = /[<>{}\"`^| \\\\]/;\n  h.expand = function(b, f, k) {\n    var g = u[b.operator],\n      p = g.named ? \"Named\" : \"Unnamed\";\n    b = b.variables;\n    var n = [],\n      r, q;\n    for (q = 0; r = b[q]; q++) {\n      var w = f.get(r.name);\n      if (0 === w.type && k && k.strict) throw Error('Missing expansion value for variable \"' +\n        r.name + '\"');\n      if (w.val.length) {\n        if (1 < w.type && r.maxlength) throw Error('Invalid expression: Prefix modifier not applicable to variable \"' + r.name + '\"');\n        n.push(h[\"expand\" + p](w, g, r.explode, r.explode && g.separator || \",\", r.maxlength, r.name))\n      } else w.type && n.push(\"\")\n    }\n    return n.length ? g.prefix + n.join(g.separator) : \"\"\n  };\n  h.expandNamed = function(b, h, k, n, q, u) {\n    var g = \"\",\n      p = h.encode;\n    h = h.empty_name_separator;\n    var A = !b[p].length,\n      e = 2 === b.type ? \"\" : f[p](u),\n      t;\n    var y = 0;\n    for (t = b.val.length; y < t; y++) {\n      if (q) {\n        var v = f[p](b.val[y][1].substring(0,\n          q));\n        2 === b.type && (e = f[p](b.val[y][0].substring(0, q)))\n      } else A ? (v = f[p](b.val[y][1]), 2 === b.type ? (e = f[p](b.val[y][0]), b[p].push([e, v])) : b[p].push([void 0, v])) : (v = b[p][y][1], 2 === b.type && (e = b[p][y][0]));\n      g && (g += n);\n      k ? g += e + (h || v ? \"=\" : \"\") + v : (y || (g += f[p](u) + (h || v ? \"=\" : \"\")), 2 === b.type && (g += e + \",\"), g += v)\n    }\n    return g\n  };\n  h.expandUnnamed = function(b, h, k, n, q) {\n    var g = \"\",\n      p = h.encode;\n    h = h.empty_name_separator;\n    var A = !b[p].length,\n      w;\n    var e = 0;\n    for (w = b.val.length; e < w; e++) {\n      if (q) var t = f[p](b.val[e][1].substring(0, q));\n      else A ? (t = f[p](b.val[e][1]),\n        b[p].push([2 === b.type ? f[p](b.val[e][0]) : void 0, t])) : t = b[p][e][1];\n      g && (g += n);\n      if (2 === b.type) {\n        var u = q ? f[p](b.val[e][0].substring(0, q)) : b[p][e][0];\n        g += u;\n        g = k ? g + (h || t ? \"=\" : \"\") : g + \",\"\n      }\n      g += t\n    }\n    return g\n  };\n  h.noConflict = function() {\n    n.URITemplate === h && (n.URITemplate = b);\n    return h\n  };\n  z.expand = function(b, f) {\n    var g = \"\";\n    this.parts && this.parts.length || this.parse();\n    b instanceof k || (b = new k(b));\n    for (var p = 0, n = this.parts.length; p < n; p++) g += \"string\" === typeof this.parts[p] ? this.parts[p] : h.expand(this.parts[p], b, f);\n    return g\n  };\n  z.parse = function() {\n    var b =\n      this.expression,\n      f = h.EXPRESSION_PATTERN,\n      k = h.VARIABLE_PATTERN,\n      n = h.VARIABLE_NAME_PATTERN,\n      q = h.LITERAL_PATTERN,\n      z = [],\n      r = 0,\n      C = function(b) {\n        if (b.match(q)) throw Error('Invalid Literal \"' + b + '\"');\n        return b\n      };\n    for (f.lastIndex = 0;;) {\n      var w = f.exec(b);\n      if (null === w) {\n        z.push(C(b.substring(r)));\n        break\n      } else z.push(C(b.substring(r, w.index))), r = w.index + w[0].length;\n      if (!u[w[1]]) throw Error('Unknown Operator \"' + w[1] + '\" in \"' + w[0] + '\"');\n      if (!w[3]) throw Error('Unclosed Expression \"' + w[0] + '\"');\n      var e = w[2].split(\",\");\n      for (var t = 0, y = e.length; t <\n        y; t++) {\n        var v = e[t].match(k);\n        if (null === v) throw Error('Invalid Variable \"' + e[t] + '\" in \"' + w[0] + '\"');\n        if (v[1].match(n)) throw Error('Invalid Variable Name \"' + v[1] + '\" in \"' + w[0] + '\"');\n        e[t] = {\n          name: v[1],\n          explode: !!v[3],\n          maxlength: v[4] && parseInt(v[4], 10)\n        }\n      }\n      if (!e.length) throw Error('Expression Missing Variable(s) \"' + w[0] + '\"');\n      z.push({\n        expression: w[0],\n        operator: w[1],\n        variables: e\n      })\n    }\n    z.length || z.push(C(b));\n    this.parts = z;\n    return this\n  };\n  k.prototype.get = function(b) {\n    var f = this.data,\n      g = {\n        type: 0,\n        val: [],\n        encode: [],\n        encodeReserved: []\n      };\n    if (void 0 !== this.cache[b]) return this.cache[b];\n    this.cache[b] = g;\n    f = \"[object Function]\" === String(Object.prototype.toString.call(f)) ? f(b) : \"[object Function]\" === String(Object.prototype.toString.call(f[b])) ? f[b](b) : f[b];\n    if (void 0 !== f && null !== f)\n      if (\"[object Array]\" === String(Object.prototype.toString.call(f))) {\n        var h = 0;\n        for (b = f.length; h < b; h++) void 0 !== f[h] && null !== f[h] && g.val.push([void 0, String(f[h])]);\n        g.val.length && (g.type = 3)\n      } else if (\"[object Object]\" === String(Object.prototype.toString.call(f))) {\n      for (h in f) q.call(f,\n        h) && void 0 !== f[h] && null !== f[h] && g.val.push([h, String(f[h])]);\n      g.val.length && (g.type = 2)\n    } else g.type = 1, g.val.push([void 0, String(f)]);\n    return g\n  };\n  f.expand = function(b, k) {\n    var g = (new h(b)).expand(k);\n    return new f(g)\n  };\n  return h\n});\n","/* Modernizr (Custom Build) | MIT & BSD\n * Build: http://modernizr.com/download/#-mq-cssclasses-csstransforms3d-cssanimations-csstransitions-touch-localstorage\n */\n;\nwindow.Modernizr = function(e, t, n) {\n  function C(e) {\n    f.cssText = e\n  }\n\n  function k(e, t) {\n    return C(h.join(e + \";\") + (t || \"\"))\n  }\n\n  function L(e, t) {\n    return typeof e === t\n  }\n\n  function A(e, t) {\n    return !!~(\"\" + e).indexOf(t)\n  }\n\n  function O(e, t) {\n    for (var r in e) {\n      var i = e[r];\n      if (!A(i, \"-\") && f[i] !== n) return t == \"pfx\" ? i : !0\n    }\n    return !1\n  }\n\n  function M(e, t, r) {\n    for (var i in e) {\n      var s = t[e[i]];\n      if (s !== n) return r === !1 ? e[i] : L(s, \"function\") ? s.bind(r || t) : s\n    }\n    return !1\n  }\n\n  function _(e, t, n) {\n    var r = e.charAt(0).toUpperCase() + e.slice(1),\n      i = (e + \" \" + d.join(r + \" \") + r).split(\" \");\n    return L(t, \"string\") || L(t, \"undefined\") ? O(i, t) : (i = (e + \" \" + v.join(r + \" \") + r).split(\" \"), M(i, t, n))\n  }\n  var r = \"2.8.3\",\n    i = {},\n    s = !0,\n    o = t.documentElement,\n    u = \"modernizr\",\n    a = t.createElement(u),\n    f = a.style,\n    l, c = {}.toString,\n    h = \" -webkit- -moz- -o- -ms- \".split(\" \"),\n    p = \"Webkit Moz O ms\",\n    d = p.split(\" \"),\n    v = p.toLowerCase().split(\" \"),\n    m = {},\n    g = {},\n    y = {},\n    b = [],\n    w = b.slice,\n    E, S = function(e, n, r, i) {\n      var s, a, f, l, c = t.createElement(\"div\"),\n        h = t.body,\n        p = h || t.createElement(\"body\");\n      if (parseInt(r, 10))\n        while (r--) f = t.createElement(\"div\"), f.id = i ? i[r] : u + (r + 1), c.appendChild(f);\n      return s = [\"&#173;\", '<style id=\"s', u, '\">', e, \"</style>\"].join(\"\"), c.id = u, (h ? c : p).innerHTML += s, p.appendChild(c), h || (p.style.background = \"\", p.style.overflow = \"hidden\", l = o.style.overflow, o.style.overflow = \"hidden\", o.appendChild(p)), a = n(c, e), h ? c.parentNode.removeChild(c) : (p.parentNode.removeChild(p), o.style.overflow = l), !!a\n    },\n    x = function(t) {\n      var n = e.matchMedia || e.msMatchMedia;\n      if (n) return n(t) && n(t).matches || !1;\n      var r;\n      return S(\"@media \" + t + \" { #\" + u + \" { position: absolute; } }\", function(t) {\n        r = (e.getComputedStyle ? getComputedStyle(t, null) : t.currentStyle)[\"position\"] == \"absolute\"\n      }), r\n    },\n    T = {}.hasOwnProperty,\n    N;\n  !L(T, \"undefined\") && !L(T.call, \"undefined\") ? N = function(e, t) {\n    return T.call(e, t)\n  } : N = function(e, t) {\n    return t in e && L(e.constructor.prototype[t], \"undefined\")\n  }, Function.prototype.bind || (Function.prototype.bind = function(t) {\n    var n = this;\n    if (typeof n != \"function\") throw new TypeError;\n    var r = w.call(arguments, 1),\n      i = function() {\n        if (this instanceof i) {\n          var e = function() {};\n          e.prototype = n.prototype;\n          var s = new e,\n            o = n.apply(s, r.concat(w.call(arguments)));\n          return Object(o) === o ? o : s\n        }\n        return n.apply(t, r.concat(w.call(arguments)))\n      };\n    return i\n  }), m.touch = function() {\n    var n;\n    return \"ontouchstart\" in e || e.DocumentTouch && t instanceof DocumentTouch ? n = !0 : S([\"@media (\", h.join(\"touch-enabled),(\"), u, \")\", \"{#modernizr{top:9px;position:absolute}}\"].join(\"\"), function(e) {\n      n = e.offsetTop === 9\n    }), n\n  }, m.cssanimations = function() {\n    return _(\"animationName\")\n  }, m.csstransforms3d = function() {\n    var e = !!_(\"perspective\");\n    return e && \"webkitPerspective\" in o.style && S(\"@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}\", function(t, n) {\n      e = t.offsetLeft === 9 && t.offsetHeight === 3\n    }), e\n  }, m.csstransitions = function() {\n    return _(\"transition\")\n  }, m.localstorage = function() {\n    try {\n      return localStorage.setItem(u, u), localStorage.removeItem(u), !0\n    } catch (e) {\n      return !1\n    }\n  };\n  for (var D in m) N(m, D) && (E = D.toLowerCase(), i[E] = m[D](), b.push((i[E] ? \"\" : \"no-\") + E));\n  return i.addTest = function(e, t) {\n    if (typeof e == \"object\")\n      for (var r in e) N(e, r) && i.addTest(r, e[r]);\n    else {\n      e = e.toLowerCase();\n      if (i[e] !== n) return i;\n      t = typeof t == \"function\" ? t() : t, typeof s != \"undefined\" && s && (o.className += \" \" + (t ? \"\" : \"no-\") + e), i[e] = t\n    }\n    return i\n  }, C(\"\"), a = l = null, i._version = r, i._prefixes = h, i._domPrefixes = v, i._cssomPrefixes = d, i.mq = x, i.testProp = function(e) {\n    return O([e])\n  }, i.testAllProps = _, i.testStyles = S, o.className = o.className.replace(/(^|\\s)no-js(\\s|$)/, \"$1$2\") + (s ? ' js ' + b.join(' ') : \"\"), i\n}(this, this.document);\n","// Avoid `console` errors in browsers that lack a console.\r\n// credits https://github.com/h5bp/html5-boilerplate/blob/master/dist/js/plugins.js\r\n(function() {\r\n  \"use strict\";\r\n  var method;\r\n  var noop = function() {};\r\n  var methods = [\r\n    'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\r\n    'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\r\n    'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\r\n    'timeStamp', 'trace', 'warn'\r\n  ];\r\n  var length = methods.length;\r\n  var console = (window.console = window.console || {});\r\n\r\n  while (length--) {\r\n    method = methods[length];\r\n\r\n    // Only stub undefined methods.\r\n    if (!console[method]) {\r\n      console[method] = noop;\r\n    }\r\n  }\r\n}());\r\n","game.utils.addClass = function(element, cls) {\r\n  \"use strict\";\r\n  if ((\" \" + element.className + \" \").indexOf(\" \" + cls + \" \") === -1) {\r\n    element.className = element.className + \" \" + cls;\r\n  }\r\n  return element.className.replace(/  +/g, \" \");\r\n};\r\n","game.utils.checkBrowser = function() {\r\n  return !(/MSIE\\s/.test(navigator.userAgent) && parseFloat(navigator.appVersion.split(\"MSIE\")[1]) < 11);\r\n}\r\n","game.utils.cloneObj = function(obj) {\r\n  \"use strict\";\r\n  if (null === obj || \"object\" !== typeof obj) return obj;\r\n  var copy = obj.constructor();\r\n  for (var attr in obj) {\r\n    if (obj.hasOwnProperty(attr) && attr !== \"htmlElement\") copy[\r\n      attr] = obj[attr];\r\n  }\r\n  return copy;\r\n};\r\n","game.utils.createCSSClass = function(selector, style) {\r\n  \"use strict\";\r\n  if (!document.styleSheets) {\r\n    return false;\r\n  }\r\n\r\n  if (document.getElementsByTagName(\"head\").length === 0) {\r\n    return false;\r\n  }\r\n\r\n  var styleSheet;\r\n  var mediaType;\r\n  var media;\r\n  var i;\r\n\r\n  if (document.styleSheets.length > 0) {\r\n    for (i = 0; i < document.styleSheets.length; i++) {\r\n      if (document.styleSheets[i].disabled) {\r\n        continue;\r\n      }\r\n      media = document.styleSheets[i].media;\r\n      mediaType = typeof media;\r\n\r\n      if (mediaType === \"string\") {\r\n        if (media === \"\" || (media.indexOf(\"screen\") !== -1)) {\r\n          styleSheet = document.styleSheets[i];\r\n        }\r\n      } else if (mediaType === \"object\") {\r\n        if (media.mediaText === \"\" || (media.mediaText.indexOf(\"screen\") !== -1)) {\r\n          styleSheet = document.styleSheets[i];\r\n        }\r\n      }\r\n\r\n      if (typeof styleSheet !== \"undefined\") {\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (typeof styleSheet === \"undefined\") {\r\n    var styleSheetElement = document.createElement(\"style\");\r\n    styleSheetElement.type = \"text/css\";\r\n\r\n    document.getElementsByTagName(\"head\")[0].appendChild(styleSheetElement);\r\n\r\n    for (i = 0; i < document.styleSheets.length; i++) {\r\n      if (document.styleSheets[i].disabled) {\r\n        continue;\r\n      }\r\n      styleSheet = document.styleSheets[i];\r\n    }\r\n\r\n    media = styleSheet.media;\r\n    mediaType = typeof media;\r\n  }\r\n\r\n  if (mediaType === \"string\") {\r\n    for (i = 0; i < styleSheet.rules.length; i++) {\r\n      if (styleSheet.rules[i].selectorText.toLowerCase() === selector.toLowerCase()) {\r\n        styleSheet.rules[i].style.cssText = style;\r\n        return;\r\n      }\r\n    }\r\n\r\n    styleSheet.addRule(selector, style);\r\n  } else if (mediaType === \"object\") {\r\n    for (i = 0; i < styleSheet.cssRules.length; i++) {\r\n      if (styleSheet.cssRules[i].selectorText.toLowerCase() === selector.toLowerCase()) {\r\n        styleSheet.cssRules[i].style.cssText = style;\r\n        return;\r\n      }\r\n    }\r\n\r\n    styleSheet.insertRule(selector + \"{\" + style + \"}\", 0);\r\n  }\r\n};\r\n","/* \r\n  Debounce from underscore --- https://davidwalsh.name/function-debounce \r\n  Returns a function, that, as long as it continues to be invoked, will not be triggered. \r\n  The function will be called after it stops being called for N milliseconds. \r\n  If 'immediate' is passed, trigger the function on the leading edge, instead of the trailing.\r\n*/\r\ngame.utils.debounce = function(func, wait, immediate) {\r\n  \"use strict\";\r\n  var timeout;\r\n  return function() {\r\n    var context = this,\r\n      args = arguments;\r\n    var later = function() {\r\n      timeout = null;\r\n      if (!immediate) func.apply(context, args);\r\n    };\r\n    var callNow = immediate && !timeout;\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n    if (callNow) func.apply(context, args);\r\n  };\r\n};\r\n","game.utils.detectFullscreen = function() {\r\n  \"use strict\";\r\n  if ((\"standalone\" in window.navigator) && window.navigator.standalone) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n","game.utils.editCSSRule = function(ruleClass, property, newValue) {\r\n\r\n  \"use strict\";\r\n\r\n  for (var s = 0; s < document.styleSheets.length; s++) {\r\n    var sheet = document.styleSheets[s];\r\n    var rules = sheet.cssRules ? sheet.cssRules : sheet.rules;\r\n\r\n    if (rules == null) return \"null\";\r\n\r\n    for (var i = 0; i < rules.length; i++) {\r\n      if (rules[i].selectorText === ruleClass) {\r\n        if (typeof newValue !== \"undefined\") {\r\n          return rules[i].style[property] = newValue;\r\n        } else {\r\n          return rules[i].style[property];\r\n        };\r\n\r\n      }\r\n    }\r\n\r\n  }\r\n  return null;\r\n};\r\n","game.utils.getAverage = function(arr) {\r\n  \"use strict\";\r\n\r\n  return arr.reduce(function(p, c) {\r\n    return p + c;\r\n  }) / arr.length;\r\n\r\n}\r\n","game.utils.getAverageRGB = function(img) {\r\n  \"use strict\";\r\n\r\n  var canvas = document.createElement('canvas');\r\n  var ctx = canvas.getContext('2d');\r\n  var width = canvas.width = img.naturalWidth;\r\n  var height = canvas.height = img.naturalHeight;\r\n  var imageData, data;\r\n  var defaultRGB = {\r\n    r: 200,\r\n    g: 200,\r\n    b: 200\r\n  };\r\n\r\n  ctx.drawImage(img, 0, 0);\r\n\r\n  try {\r\n    imageData = ctx.getImageData(0, 0, width, height);\r\n  } catch (e) {\r\n    console.log(\"Problem parsing this image\", e);\r\n    return defaultRGB;\r\n  }\r\n\r\n  data = imageData.data;\r\n\r\n  var r = 0;\r\n  var g = 0;\r\n  var b = 0;\r\n\r\n  for (var i = 0, l = data.length; i < l; i += 4) {\r\n    r += data[i];\r\n    g += data[i + 1];\r\n    b += data[i + 2];\r\n  }\r\n\r\n  r = Math.floor(r / (data.length / 4));\r\n  g = Math.floor(g / (data.length / 4));\r\n  b = Math.floor(b / (data.length / 4));\r\n\r\n  return {\r\n    r: r,\r\n    g: g,\r\n    b: b\r\n  };\r\n\r\n};\r\n","game.utils.getBrowserPrefix = function() {\r\n  \"use strict\";\r\n  var styles = window.getComputedStyle(document.documentElement, \"\"),\r\n    pre = (Array.prototype.slice\r\n      .call(styles)\r\n      .join(\"\")\r\n      .match(/-(moz|webkit|ms)-/) || (styles.OLink === \"\" && [\"\", \"o\"])\r\n    )[1],\r\n    dom = (\"WebKit|Moz|MS|O\").match(new RegExp(\"(\" + pre + \")\", \"i\"))[1];\r\n  return {\r\n    dom: [dom],\r\n    lowercase: [pre],\r\n    css: [\"-\" + pre + \"-\"],\r\n    js: [pre[0].toUpperCase() + pre.substr(1)]\r\n  };\r\n};\r\n","game.utils.hasClass = function(element, cls) {\r\n  \"use strict\";\r\n  return (\" \" + element.className + \" \").indexOf(\" \" + cls + \" \") > -1;\r\n};\r\n","game.utils.isArray = function(arr) {\r\n  \"use strict\";\r\n\r\n  if (typeof arr === \"object\") {\r\n    return arr.constructor.toString().indexOf(\"Array\") > -1;\r\n  }\r\n\r\n  return false;\r\n\r\n};\r\n","game.utils.listenTo = function(element, eventType, fn, listenersList, context) {\r\n  \"use strict\";\r\n\r\n  listenersList = listenersList || {};\r\n\r\n  if (!element || element === null) {\r\n    console.log(\"can't find this element: \" + element);\r\n    return false;\r\n  }\r\n\r\n  var id = element.id;\r\n\r\n  if (!id || element.id == \"\") {\r\n\r\n    if (element === document.body) {\r\n      id = \"body\";\r\n    } else if (element === document.documentElement) {\r\n      id = \"html\";\r\n    } else if (element === window) {\r\n      id = \"window\";\r\n    } else {\r\n      console.log(\"better not add a listener to elements witout id: \", element);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  if (typeof listenersList[id] === \"undefined\") {\r\n    listenersList[id] = {};\r\n  };\r\n\r\n  if (typeof listenersList[id][eventType] !== \"undefined\") {\r\n    console.log(\"cannot add another listener for \" + eventType + \" to \", element);\r\n    return false;\r\n  };\r\n\r\n\r\n  if (!element.addEventListener) {\r\n    element.attachEvent(\"on\" + eventType, fn);\r\n  } else if (element.addEventListener) {\r\n\r\n    var fnWrapper;\r\n\r\n    if (eventType.indexOf(\"touch\") === 0) {\r\n\r\n      fnWrapper = function(event) {\r\n        event.preventDefault();\r\n        if (event.touches.length === 0) //touchend\r\n        {\r\n          fn(event, context);\r\n        } else {\r\n          for (var i = 0; i < event.touches.length; i++) {\r\n            event.touches[i].timeStamp = event.timeStamp;\r\n            event.touches[i].type = event.type;\r\n            event.touches[i].multiTouchEvent = event;\r\n            fn(event.touches[i], context);\r\n          }\r\n        }\r\n        return;\r\n      };\r\n\r\n      element.addEventListener(eventType, fnWrapper, true);\r\n\r\n    } else {\r\n\r\n      fnWrapper = function(event) {\r\n        fn(event, context);\r\n      };\r\n\r\n      element.addEventListener(eventType, fnWrapper, false);\r\n\r\n    }\r\n\r\n    listenersList[id][eventType] = fnWrapper;\r\n\r\n  }\r\n};\r\n","game.utils.removeClass = function(element, cls) {\r\n  \"use strict\";\r\n\r\n  var regexp = new RegExp(\"\\\\b\" + cls + \"\\\\b\", \"g\");\r\n  element.className = \" \" + element.className + \" \";\r\n  element.className = element.className.replace(regexp, \"\");\r\n\r\n  return element.className.replace(/  +/g, \" \");\r\n};\r\n","game.utils.roundTo = function(input, num) {\r\n  \"use strict\";\r\n  var resto = input % num;\r\n  if (resto <= (num / 2)) {\r\n    return input - resto;\r\n  } else {\r\n    return input + num - resto;\r\n  }\r\n};\r\n","game.utils.stopListeningTo = function(element, eventType, listenersList) {\r\n  \"use strict\";\r\n\r\n\r\n  if (typeof listenersList === \"undefined\") {\r\n    console.log(\"no registered listeners in \", listenersList);\r\n    return false;\r\n  };\r\n\r\n  var id = element.id;\r\n\r\n  if (!id || id == \"\") {\r\n\r\n    if (element === document.body) {\r\n      id = \"body\";\r\n    } else if (element === document.documentElement) {\r\n      id = \"html\";\r\n    } else if (element === window) {\r\n      id = \"window\";\r\n    } else {\r\n      console.log(\"better not add a listener to elements witout id: \", element);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  if (typeof listenersList[id][eventType] !== \"undefined\") {\r\n    element.removeEventListener(eventType, listenersList[id][eventType]);\r\n    listenersList[id][eventType] = undefined;\r\n    return true;\r\n  } else {\r\n    console.log(\"couldn not remove event listener for \" + eventType + \" from \" + id);\r\n    return false;\r\n  }\r\n\r\n};\r\n","/* Throttle from underscore --- http://underscorejs.org/docs/underscore.html */\r\n\r\ngame.utils.throttle = function(func, wait, options) {\r\n  \"use strict\";\r\n\r\n  var _now = Date.now || function() {\r\n    return new Date().getTime();\r\n  };\r\n\r\n  var context, args, result;\r\n  var timeout = null;\r\n  var previous = 0;\r\n  if (!options) options = {};\r\n  var later = function() {\r\n    previous = options.leading === false ? 0 : _now();\r\n    timeout = null;\r\n    result = func.apply(context, args);\r\n    if (!timeout) context = args = null;\r\n  };\r\n  return function() {\r\n    var now = _now();\r\n    if (!previous && options.leading === false) previous = now;\r\n    var remaining = wait - (now - previous);\r\n    context = this;\r\n    args = arguments;\r\n    if (remaining <= 0 || remaining > wait) {\r\n      if (timeout) {\r\n        clearTimeout(timeout);\r\n        timeout = null;\r\n      }\r\n      previous = now;\r\n      result = func.apply(context, args);\r\n      if (!timeout) context = args = null;\r\n    } else if (!timeout && options.trailing !== false) {\r\n      timeout = setTimeout(later, remaining);\r\n    }\r\n    return result;\r\n  };\r\n\r\n};\r\n","game.utils.trim = function(str) {\r\n  \"use strict\";\r\n  str = str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, \"\");\r\n  var ws = /\\s/;\r\n  var i = str.length;\r\n  while (ws.test(str.charAt(--i)));\r\n  return str.slice(0, i + 1);\r\n};\r\n","game.config = {\r\n\r\n  /*\r\n    size of the board, in tiles \r\n    (h for columns, v for rows)\r\n   */\r\n  size: {\r\n    h: 4,\r\n    v: 4\r\n  },\r\n\r\n  /*\r\n    minimum space btw the board and the screen, in %\r\n   */\r\n  margin: {\r\n    h: 4,\r\n    v: 4\r\n  },\r\n\r\n  /*\r\n    thickness of the border around the board, in %\r\n   */\r\n  borderSize: 4,\r\n\r\n  /*\r\n    when true tiles near the hole can be pushed by dragged tiles    \r\n   */\r\n  pushMultiple: true,\r\n\r\n\r\n  /*\r\n    move tolerance; the percent of a tile size after which \r\n    the tile snaps into the new position. If it's moved less than\r\n    this, the tile snaps back.\r\n   */\r\n  minDistanceToMoveTile: 0.25,\r\n\r\n\r\n  /* \r\n    allow move by click (touching and shortly releasing a tile \r\n    but not dragging it)\r\n  */\r\n\r\n  clickToMove: true,\r\n\r\n\r\n\r\n  /* \r\n    vibrate the device on mobile when touching the tiles (if supported by the manufacturer)\r\n  */\r\n\r\n  vibration: true,\r\n\r\n  /*\r\n    time in ms after which releasing a tile won't trigger a movement\r\n   */\r\n  maxTimeForClickMove: 200,\r\n\r\n\r\n  /*\r\n    touch tolerance area around the tile considered draggable \r\n    during touch drag before dropping\r\n   */\r\n  touchTolerance: 0.2,\r\n\r\n  /*\r\n    transitonDurations\r\n   */\r\n  transitionDuration: {\r\n\r\n    /* for tile movements on clicks, drags and gestures */\r\n    generic: 60,\r\n\r\n    /* for tile movement initiated by keyboard events*/\r\n    byKeyboard: 100\r\n  },\r\n\r\n  /*\r\n    listen to keyboard events during game\r\n   */\r\n  useKeyboard: true,\r\n  useOptimizeRedraws: true\r\n\r\n};\r\n","/*\r\n  a collection of easing functions\r\n */\r\ngame.config.easings = {\r\n  EASING_TILES_MOVEMENT: \"cubic-bezier(0.403, 0.543, 0.754, 1)\"\r\n};\r\n","/* keycodes abstractions */\r\ngame.config.keycodes = {\r\n  KEY_ARROW_LEFT: 37,\r\n  KEY_ARROW_UP: 38,\r\n  KEY_ARROW_RIGHT: 39,\r\n  KEY_ARROW_DOWN: 40,\r\n  KEY_ESCAPE: 2,\r\n  KEY_RETURN: 13\r\n};\r\n","/*\r\n  abstraction for IDs, CLASSES and so on\r\n */\r\ngame.config.labels = {\r\n\r\n  /* \r\n    id of the main wrapper of the page \r\n  */\r\n  WRAPPER_ID: \"game-wrapper\",\r\n\r\n  /* html id of the game container */\r\n  GAME_ID: \"game\",\r\n\r\n  /* id of the board*/\r\n  BOARD_ID: \"board\",\r\n\r\n  /* id of the toolbar */\r\n  TOOLBAR_ID: \"toolbar\",\r\n\r\n  /* id of the background image container */\r\n  BACKGROUND_CONTAINER_ID: \"bg\",\r\n\r\n  /* id of the background image element */\r\n  BACKGROUND_IMAGE_ID: \"bg-img\",\r\n\r\n  /* prefix for all tiles ids */\r\n  TILE_PREFIX: \"tile-\",\r\n\r\n  /* className for tile element */\r\n  TILE_CLASS: \"tile\",\r\n\r\n  /* className for tile inner wrapper */\r\n  TILE_INNER_CLASS: \"inner\",\r\n\r\n  /* className for tile number element*/\r\n  TILE_NUMBER_CLASS: \"number\",\r\n\r\n  /* prefix for all toolbar buttons ids */\r\n  TBUTTON_PREFIX: \"btn-\",\r\n\r\n  /* class added to a tile when is being dragged */\r\n  SELECTED_LABEL: \"selected\",\r\n\r\n  /* class added to a tile when is being pressed */\r\n  PRESSED_LABEL: \"pressed\",\r\n\r\n\r\n  /* class added to a tile when is being animated */\r\n  ANIMATED_LABEL: \"animationInProgress\",\r\n\r\n\r\n  /* class added to the game main div when touch enabled */\r\n  USETOUCH_LABEL: \"touch\",\r\n\r\n  /* class added to the game main div when touch disabled */\r\n  NO_TOUCH_LABEL: \"no-touch\",\r\n\r\n\r\n  /* Directions Abstraction */\r\n  UP: \"up\",\r\n  RIGHT: \"right\",\r\n  DOWN: \"down\",\r\n  LEFT: \"left\",\r\n\r\n  /* Orientations Abstraction */\r\n  LANDSCAPE: \"landscape\",\r\n  PORTRAIT: \"portrait\",\r\n\r\n  /* Saved games localStorage index */\r\n  SAVEDGAMES_LABEL: \"savedGames\",\r\n\r\n\r\n  /* Savegame modes */\r\n  AUTOSAVE_LABEL: \"automatic\",\r\n  USERSAVE_LABEL: \"user\",\r\n  SORTEDSAVE_LABEL: \"sorted\",\r\n  SHUFFLEDSAVE_LABEL: \"shuffled\"\r\n\r\n};\r\n","/* keycodes abstractions */\r\ngame.config.toolbarButtons = [{\r\n  id: \"new\",\r\n  description: \"New game\",\r\n  handler: function() {\r\n    if (window.confirm(\"Start a new game?\")) {\r\n      this.newGame();\r\n    };\r\n  }\r\n}, {\r\n  id: \"save\",\r\n  description: \"Save the board\",\r\n  handler: function() {\r\n    this.saveGame(this.config.labels.USERSAVE_LABEL);\r\n    this.utils.addClass(document.getElementById(\"btn-save\"), \"on\");\r\n  }\r\n}, {\r\n  id: \"load\",\r\n  description: \"Load the saved board\",\r\n  handler: function() {\r\n    if (window.confirm(\"Load the saved game?\")) {\r\n      this.loadGame(this.config.labels.USERSAVE_LABEL);\r\n    };\r\n    this.animate({\r\n      element: document.getElementById(this.config.labels.GAME_ID),\r\n      animation: \"load\",\r\n      duration: 1000\r\n    });\r\n  },\r\n}, {\r\n  id: \"settings\",\r\n  description: \"change your preferences\",\r\n  handler: function() {}\r\n}, {\r\n  id: \"info\",\r\n  description: \"About this game\",\r\n  handler: function() {}\r\n}];\r\n","game.animate = function(params) {\r\n  \"use strict\";\r\n\r\n  if (\r\n    typeof params === \"undefined\" ||\r\n    !params.element ||\r\n    typeof params.animation !== \"string\") {\r\n    console.log(\"wrong parameters in animate call\", params);\r\n    return false;\r\n  }\r\n  if (typeof params.duration !== \"number\") {\r\n    params.duration = this.config.transitionDuration.generic;\r\n  }\r\n\r\n\r\n  var CSSstyleDeclaration;\r\n  var prefix = \"\";\r\n\r\n  for (var p = 0; p < this.config.browserPrefixes.css.length; p++) {\r\n\r\n    prefix = this.config.browserPrefixes.css[p];\r\n\r\n    CSSstyleDeclaration += prefix + \"animation-fill-mode:both;\";\r\n    CSSstyleDeclaration += prefix + \"animation-duration:\" + params.duration + \"ms;\";\r\n    CSSstyleDeclaration += prefix + \"animation-name:\" + params.animation + \";\";\r\n\r\n    if (typeof params.iterations !== \"undefined\") {\r\n      CSSstyleDeclaration += prefix + \"animation-iteration-count:\" + params.iteration + \";\";\r\n    }\r\n\r\n    if (typeof params.delay === \"number\") {\r\n      CSSstyleDeclaration += prefix + \"animation-delay:\" + params.delay + \"ms;\";\r\n    }\r\n\r\n    if (typeof params.easing === \"string\") {\r\n      CSSstyleDeclaration += prefix + \"animation-timing-function:\" + params.easing + \";\";\r\n    }\r\n\r\n    if (p < 0) {\r\n      this.utils.listenTo(\r\n        params.element,\r\n        \"animationend\",\r\n        function(event, context) {\r\n\r\n          context.utils.stopListeningTo(\r\n            params.element,\r\n            \"animationend\",\r\n            context.runtime.eventListeners\r\n          );\r\n\r\n          event.target.style[\"animation-name\"] = \"\";\r\n        },\r\n        this.runtime.eventListeners,\r\n        this);\r\n    } else {\r\n\r\n      this.utils.listenTo(params.element, this.config.browserPrefixes.lowercase[p] + \"AnimationEnd\",\r\n        function(event, context) {\r\n\r\n          context.utils.stopListeningTo(\r\n            params.element,\r\n            event.type,\r\n            context.runtime.eventListeners\r\n          );\r\n\r\n          event.target.style[event.type.replace(\"End\", \"Name\")] = \"\";\r\n\r\n          context.utils.removeClass(params.element, context.config.labels.ANIMATED_LABEL);\r\n\r\n        },\r\n        this.runtime.eventListeners,\r\n        this\r\n      );\r\n\r\n    }\r\n  }\r\n  game.utils.addClass(params.element, game.config.labels.ANIMATED_LABEL);\r\n  params.element.style.cssText += CSSstyleDeclaration;\r\n};\r\n","game.canMove = function(tile) {\r\n  \"use strict\";\r\n  tile = this.isTile(tile) || null;\r\n\r\n  var hole = this.runtime.tiles[this.config.labels.TILE_PREFIX + this.config.labels\r\n      .HOLE_INDEX],\r\n    holePosition = hole.col + \"-\" + hole.row;\r\n\r\n  if (!tile) {\r\n    return false;\r\n  };\r\n\r\n  if (holePosition === (tile.col) + \"-\" + (tile.row - 1)) {\r\n    return this.config.labels.UP;\r\n  }\r\n  if (holePosition === (tile.col + 1) + \"-\" + (tile.row)) {\r\n    return this.config.labels.RIGHT;\r\n  }\r\n  if (holePosition === (tile.col) + \"-\" + (tile.row + 1)) {\r\n    return this.config.labels.DOWN;\r\n  }\r\n  if (holePosition === (tile.col - 1) + \"-\" + (tile.row)) {\r\n    return this.config.labels.LEFT;\r\n  }\r\n\r\n  return false;\r\n};\r\n","game.canPush = function(tile) {\r\n  \"use strict\";\r\n  tile = this.isTile(tile) || false;\r\n\r\n  var hole = this.runtime.tiles[this.config.labels.TILE_PREFIX + this.config.labels.HOLE_INDEX];\r\n  var tilesToPush = 0;\r\n  var pushableTiles = 0;\r\n\r\n  if (!tile) {\r\n    return false;\r\n  };\r\n\r\n  if (this.config.pushMultiple) {\r\n    if (tile.col === hole.col || tile.row === hole.row) {\r\n\r\n      tilesToPush = (tile.col - hole.col === 0) ? hole.row - tile.row : hole.col - tile.col;\r\n      pushableTiles = Math.abs(tilesToPush) - 1;\r\n\r\n\r\n      if (tilesToPush === 0 || pushableTiles === 0) {\r\n        return false;\r\n      }\r\n\r\n\r\n      if (tile.col === hole.col) // up or down\r\n      {\r\n        if (tilesToPush > 0) // down\r\n        {\r\n          return ({\r\n            n: pushableTiles,\r\n            direction: this.config.labels.DOWN\r\n          });\r\n        } else // up\r\n        {\r\n          return ({\r\n            n: pushableTiles,\r\n            direction: this.config.labels.UP\r\n          });\r\n        }\r\n      } else // left or right\r\n      {\r\n        if (tilesToPush > 0) // right\r\n        {\r\n          return ({\r\n            n: pushableTiles,\r\n            direction: this.config.labels.RIGHT\r\n          });\r\n        } else // left\r\n        {\r\n          return ({\r\n            n: pushableTiles,\r\n            direction: this.config.labels.LEFT\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  return false;\r\n};\r\n","game.changeBg = function(params) {\r\n  \"use strict\";\r\n\r\n  // TBD: retrieve lists of images from different webservices, store it at runtime and use those photos\r\n  // like usplash collections, maps...\r\n  // also provide an offline list\r\n\r\n  try {\r\n    this.setBgImage({\r\n      imgUrl: \"https://source.unsplash.com/category/nature/\"\r\n    });\r\n  } catch (e) {\r\n    console.log(\"error loading a bg image\", e);\r\n  }\r\n\r\n}\r\n","game.checkFeatures = function() {\r\n  \"use strict\";\r\n\r\n\r\n  this.config.browserOK = game.utils.checkBrowser();\r\n\r\n  if (!this.config.browserOK) {\r\n    console.log(\"Browser not supported\");\r\n    alert(\"this browser version isn't supported\")\r\n    return false;\r\n  }\r\n\r\n  /*\r\n    if the device supports it listen for touch \r\n    events instead of mouse events      \r\n   */\r\n  this.config.useTouch = Modernizr.touch;\r\n\r\n  this.utils.addClass(document.getElementById(this.config.labels.GAME_ID),\r\n    this.config.useTouch ? this.config.labels.USETOUCH_LABEL : this.config.labels.NO_TOUCH_LABEL\r\n  );\r\n\r\n  /*\r\n    if the device supports it use 3D transforms \r\n    (which should be hardware accellerated) \r\n    instead of 2D transforms\r\n   */\r\n  this.config.useCSStransitions = Modernizr.csstransitions;\r\n\r\n  if (!this.config.useCSStransitions) {\r\n\r\n    console.log(\"css transitions are disabled\");\r\n\r\n    this.utils.createCSSClass(\r\n      \"#\" + this.config.labels.GAME_ID + \" * \",\r\n      \"transition: none !important;\"\r\n    );\r\n\r\n  }\r\n\r\n  /*\r\n    if the device supports it use 3D transforms \r\n    (which should be hardware accellerated) \r\n    instead of 2D transforms\r\n   */\r\n  this.config.use3Dtransforms = Modernizr.csstransforms3d;\r\n\r\n\r\n  /*\r\n    if the devive supports it, use HTML5 \r\n    localStorage to save games\r\n   */\r\n  this.config.useLstorage = Modernizr.localstorage;\r\n\r\n\r\n  this.config.useVibration = true;\r\n\r\n\r\n  /*\r\n    if the devive supports it, use CSS3 \r\n    animations\r\n   */\r\n  this.config.useCssAnimations = Modernizr.cssanimations;\r\n\r\n\r\n  /*\r\n    detects Safari fullscreen mode (for ex. \r\n    launched as app from home screen)\r\n   */\r\n  this.config.launchedAsApp = this.utils.detectFullscreen();\r\n\r\n\r\n  /*\r\n    list of browser vendors prefixes to \r\n    support for CSS3 properties    \r\n   */\r\n  this.config.browserPrefixes = this.utils.getBrowserPrefix();\r\n\r\n\r\n  /*\r\n    will use RAF when supported by the browser\r\n  */\r\n  this.config.useReqAnimFrame = !!window.requestAnimationFrame;\r\n\r\n};\r\n","game.countMove = function() {\r\n  \"use strict\";\r\n  this.runtime.movesCount++;\r\n};\r\n","game.createBoard = function() {\r\n  \"use strict\";\r\n  //    - creates the board, the tiles objects and the html \r\n\r\n  // local vars:\r\n  var boardHTML, //   - - the game main html element \r\n    tile, //    - - each tile object during a loop\r\n    row = 0, //   - - vertical position of each tile, starting from 0\r\n    col = 0; //   - - horizontal position of each tile, starting from 0\r\n\r\n  if (document.getElementById(this.config.labels.BOARD_ID) === null) {\r\n    // create the board html element, assigns it its id attribute and adds it to the game di\r\n    boardHTML = document.createElement(\"div\");\r\n    boardHTML.setAttribute(\"id\", this.config.labels.BOARD_ID);\r\n\r\n    document.getElementById(this.config.labels.GAME_ID).appendChild(boardHTML); // the board is now in the DOM  \r\n\r\n  } else {\r\n\r\n    document.getElementById(this.config.labels.BOARD_ID).innerHTML = \"\";\r\n\r\n  };\r\n\r\n\r\n  /**\r\n   * TODO: handle re-creation of the board with different sizes\r\n   */\r\n\r\n\r\n  // update game config with the total number of tiles\r\n  this.config.size.n = this.config.size.h * this.config.size.v;\r\n\r\n  // save the index of the last tile as the \"hole\" during the game\r\n  this.config.labels.HOLE_INDEX = this.config.size.n - 1;\r\n\r\n\r\n  // populates the board with the tiles\r\n  for (var i = 0; i < this.config.size.n; i++) // repeat until (n) are created\r\n  {\r\n    //  create a new tile \r\n    tile = {\r\n      i: i, // the index of the tile\r\n      id: this.config.labels.TILE_PREFIX + i, // the id of this tile in the html\r\n      col: col, // horizontal position during the game\r\n      row: row, // vertical position during the game\r\n      correctCol: col, // horizontal position when the game is won\r\n      correctRow: row, // vertical position when the game is won\r\n      even: (i % 2 === 0) ? true : false, //\r\n      evenCol: ((col % 2 === 0)) ? true : false,\r\n      evenRow: ((row % 2 === 0)) ? true : false\r\n    };\r\n\r\n    tile.htmlElement = document.createElement(\"div\");\r\n\r\n    tile.htmlElement.setAttribute(\"id\", this.config.labels.TILE_PREFIX + i);\r\n    tile.htmlElement.setAttribute(\"tabindex\", i);\r\n    tile.htmlElement.setAttribute(\"class\", \" tile\" +\r\n      ((tile.evenRow) ? \" even-row\" : \" odd-row\") +\r\n      ((tile.evenCol) ? \" even-col\" : \" odd-col\") +\r\n      ((tile.even) ? \" even\" : \" odd\") +\r\n      ((i === this.config.labels.HOLE_INDEX) ? \" hole\" : \"\") +\r\n      \" col-\" + col +\r\n      \" row-\" + row\r\n    );\r\n    tile.htmlElement.innerHTML = '<div class=\"' + this.config.labels.TILE_INNER_CLASS + '\"><div class=\"' + this.config.labels.TILE_NUMBER_CLASS + '\">' + (i + 1) + '</div></div>';\r\n\r\n    this.runtime.tiles[this.config.labels.TILE_PREFIX + i] = tile;\r\n\r\n    document.getElementById(this.config.labels.BOARD_ID).appendChild(tile.htmlElement);\r\n\r\n    col++;\r\n    if (col >= this.config.size.h) {\r\n      row++;\r\n      col = 0;\r\n    };\r\n  };\r\n\r\n  this.saveGame(this.config.labels.SORTEDSAVE_LABEL);\r\n\r\n};\r\n","game.deselectTile = function() {\r\n  \"use strict\";\r\n\r\n  var tile = this.isTile(this.runtime.selectedTile);\r\n  var tileMoved = false;;\r\n  var tilesMoved = 0;\r\n\r\n  if (!tile) {\r\n    return false;\r\n  };\r\n\r\n  console.log(\"de-selecting\");\r\n  this.runtime.selectedTile = null;\r\n  this.utils.removeClass(tile.htmlElement, this.config.labels.SELECTED_LABEL);\r\n  this.utils.removeClass(tile.htmlElement, this.config.labels.PRESSED_LABEL);\r\n  this.runtime.dragging = false;\r\n  this.vibrate(\"deselect\");\r\n\r\n  if (typeof tile.newPosition === \"undefined\") {\r\n    return false;\r\n  };\r\n\r\n\r\n  // has the tile been moved?\r\n  if (tile.newPosition.left.newValue.pixels !== null) {\r\n\r\n    console.log(\"the tile has been moved.\")\r\n\r\n    if (this.config.pushMultiple && !!tile.canPush) {\r\n\r\n      console.log(\"the tile could push other tiles, so it must have pushed them.\");\r\n\r\n      if (this.utils.isArray(tile.canPush.tiles)) {\r\n\r\n        console.log(\"tile \" + tile.id + \" can push \" + tile.canPush.tiles.length + \" other tiles\");\r\n\r\n        for (var i = tile.canPush.tiles.length; i > 0; i--) {\r\n          if (!tile.canPush.tiles[0].revert) {\r\n            tileMoved = this.moveTile(\r\n              tile.canPush.tiles[i - 1], {\r\n                transitions: true,\r\n                force: false,\r\n                refresh: false\r\n              }\r\n            );\r\n            if (tileMoved) {\r\n              tilesMoved++;\r\n              console.log(\"moved tile \" + tile.canPush.tiles[i - 1].id);\r\n            } else {\r\n              console.log(\"..couldn't move tile \" + tile.canPush.tiles[i - 1].id + \"!\");\r\n            }\r\n          };\r\n          //  this.utils.removeClass(tile.canPush.tiles[i - 1].htmlElement, this.config.labels.SELECTED_LABEL);\r\n        };\r\n      }\r\n\r\n    }\r\n\r\n    console.log(\"now, the tile has been released far enough to its original position in order to move it?\")\r\n\r\n    if (\r\n      (Math.abs(tile.newPosition.left.newValue.pixels - tile.oldPosition.left.pixels) >= this.metrics.tileWidth * this.config.minDistanceToMoveTile) ||\r\n      (Math.abs(tile.newPosition.top.newValue.pixels - tile.oldPosition.top.pixels) >= this.metrics.tileHeight * this.config.minDistanceToMoveTile)\r\n    ) {\r\n\r\n      console.log(\"yes, it's far enough. \")\r\n\r\n      tileMoved = this.moveTile(\r\n        tile, {\r\n          transitions: true,\r\n          force: false,\r\n          refresh: false\r\n        }\r\n      );\r\n      if (tileMoved) {\r\n        tilesMoved++;\r\n        console.log(\"moved tile \" + tile.id);\r\n      } else {\r\n        console.log(\"couldn't move tile \" + tile.id + \"!\");\r\n      }\r\n\r\n    } else {\r\n      console.log(\"nope, snapping back \")\r\n    };\r\n\r\n\r\n\r\n  } else {\r\n\r\n    console.log(\"tile has not been moved at all.\")\r\n\r\n    if (this.config.clickToMove) {\r\n\r\n      if (tile.canMove || (this.config.pushMultiple && !!tile.canPush)) {\r\n\r\n        if (this.utils.isArray(tile.canPush.tiles)) {\r\n\r\n          console.log(\"..but since clickToMove is active, I'm moving tiles anyway: tile \" + tile.id + \" can push \" + tile.canPush.tiles.length + \" other tiles\");\r\n\r\n          for (var i = tile.canPush.tiles.length; i > 0; i--) {\r\n            tileMoved = this.moveTile(\r\n              tile.canPush.tiles[i - 1], {\r\n                transitions: true,\r\n                force: false,\r\n                refresh: false\r\n              }\r\n            );\r\n            if (tileMoved) {\r\n              tilesMoved++;\r\n              console.log(\"moved tile \" + tile.canPush.tiles[i - 1].id);\r\n            } else {\r\n              console.log(\"couldn't move tile \" + tile.canPush.tiles[i - 1].id + \"!\");\r\n            }\r\n            //    this.utils.removeClass(tile.canPush.tiles[i - 1].htmlElement, this.config.labels.SELECTED_LABEL);\r\n          };\r\n        }\r\n\r\n        tileMoved = this.moveTile(\r\n          tile, {\r\n            transitions: true,\r\n            force: false,\r\n            refresh: false\r\n          }\r\n        );\r\n        if (tileMoved) {\r\n          tilesMoved++;\r\n          console.log(\"moved tile \" + tile.id);\r\n        } else {\r\n          console.log(\"couldn't move tile \" + tile.id + \"!\");\r\n        }\r\n\r\n      };\r\n\r\n    }\r\n\r\n  };\r\n\r\n\r\n  console.log(\"tiles moved: \" + tilesMoved);\r\n\r\n  this.refresh({\r\n    saveGame: !!tilesMoved\r\n  });\r\n\r\n};\r\n","game.dragTile = function(event) {\r\n  \"use strict\";\r\n\r\n  if (!this.runtime.running) {\r\n    this.deselectTile();\r\n    return false;\r\n  }\r\n\r\n  var tile = this.isTile(this.runtime.selectedTile),\r\n    direction,\r\n    newPosX,\r\n    newPosY,\r\n    otherTile,\r\n    otherTileNewPos,\r\n    CSSstyleDeclaration = \"\",\r\n    p;\r\n\r\n  if (!tile ||\r\n    (!!!tile.canMove && !tile.canPush.n) ||\r\n    (typeof tile.offset === \"undefined\") ||\r\n    (typeof tile.newPosition === \"undefined\")\r\n  ) {\r\n    this.deselectTile();\r\n    return false;\r\n  };\r\n\r\n  newPosX = event.pageX - this.metrics.borderSize.pixels - this.metrics.left - tile.offset.left;\r\n  newPosY = event.pageY - this.metrics.borderSize.pixels - this.metrics.top - tile.offset.top;\r\n\r\n  direction = (this.config.pushMultiple && tile.canPush) ? tile.canPush.direction : tile.canMove;\r\n\r\n  if (newPosY < tile.newPosition.top.min.pixels) {\r\n    newPosY = tile.newPosition.top.min.pixels;\r\n  };\r\n  if (newPosY > tile.newPosition.top.max.pixels) {\r\n    newPosY = tile.newPosition.top.max.pixels;\r\n  };\r\n  if (newPosX < tile.newPosition.left.min.pixels) {\r\n    newPosX = tile.newPosition.left.min.pixels;\r\n  };\r\n  if (newPosX > tile.newPosition.left.max.pixels) {\r\n    newPosX = tile.newPosition.left.max.pixels;\r\n  };\r\n\r\n\r\n\r\n  if (\r\n    event.pageX - this.metrics.left - this.metrics.borderSize.pixels + this.metrics.tileWidth * (this.config.touchTolerance) < newPosX ||\r\n    event.pageX - this.metrics.left - this.metrics.borderSize.pixels - this.metrics.tileWidth * (1 + this.config.touchTolerance) > newPosX ||\r\n    event.pageY - this.metrics.top - this.metrics.borderSize.pixels + this.metrics.tileHeight * (this.config.touchTolerance) < newPosY ||\r\n    event.pageY - this.metrics.top - this.metrics.borderSize.pixels - this.metrics.tileHeight * (1 + this.config.touchTolerance) > newPosY\r\n  ) {\r\n\r\n    this.vibrate(\"bump\");\r\n    this.deselectTile();\r\n\r\n    // console.log(\"dropped!\");\r\n\r\n    return false;\r\n  }\r\n\r\n  var prefix = \"\";\r\n\r\n  switch (direction) {\r\n\r\n    case this.config.labels.LEFT:\r\n    case this.config.labels.RIGHT:\r\n\r\n      tile.newPosition.top.newValue.pixels = tile.oldPosition.top.pixels;\r\n      tile.newPosition.left.newValue.pixels = newPosX;\r\n\r\n      tile.newPosition.left.newValue.percent = newPosX * 100 / game.metrics.tileWidth;\r\n\r\n      // write the css for tile html element\r\n\r\n      for (p = 0; p < this.config.browserPrefixes.css.length; p++) {\r\n        prefix = this.config.browserPrefixes.css[p];\r\n        CSSstyleDeclaration += prefix + \"transform:translate\" + this.metrics.transforms3Dsupport[0] + \"(\" + tile.newPosition.left.newValue.percent + \"%,\" + tile.oldPosition.top.percent + \"%\" + this.metrics.transforms3Dsupport[1] + \"); \" + prefix + \"transition:none; \";\r\n      }\r\n      break;\r\n\r\n\r\n    case this.config.labels.UP:\r\n    case this.config.labels.DOWN:\r\n\r\n      tile.newPosition.top.newValue.pixels = newPosY;\r\n      tile.newPosition.left.newValue.pixels = tile.oldPosition.left.pixels;\r\n\r\n      tile.newPosition.top.newValue.percent = newPosY * 100 / this.metrics.tileHeight;\r\n\r\n      // write the css for tile html element\r\n      for (p = 0; p < this.config.browserPrefixes.css.length; p++) {\r\n        prefix = this.config.browserPrefixes.css[p];\r\n        CSSstyleDeclaration += prefix + \"transform:translate\" + this.metrics.transforms3Dsupport[0] + \"(\" + tile.oldPosition.left.percent + \"%,\" + tile.newPosition.top.newValue.percent + \"%\" + game.metrics.transforms3Dsupport[1] + \"); \" + prefix + \"transition:none; \";\r\n      }\r\n      break;\r\n\r\n  }\r\n\r\n  if (!!this.config.useReqAnimFrame) {\r\n    this.addMovingTile(tile, CSSstyleDeclaration);\r\n    window.requestAnimationFrame(game.renderMovingTiles);\r\n  } else {\r\n    tile.htmlElement.style.cssText = CSSstyleDeclaration;\r\n  }\r\n\r\n  if (!this.config.pushMultiple || typeof tile.canPush.tiles === \"undefined\") {\r\n    return;\r\n  }\r\n\r\n  for (var i = 0; i < tile.canPush.tiles.length; i++) {\r\n\r\n    otherTile = tile.canPush.tiles[i];\r\n    prefix = \"\";\r\n\r\n    switch (direction) {\r\n      case this.config.labels.UP:\r\n\r\n        otherTileNewPos = (tile.newPosition.top.newValue.pixels - (this.metrics\r\n          .tileHeight * (i + 1)));\r\n\r\n        if (\r\n          otherTileNewPos < tile.canPush.tiles[i].max ||\r\n          tile.canPush.tiles[i].max == null) {\r\n          tile.canPush.tiles[i].max = otherTileNewPos;\r\n        } else {\r\n          return false;\r\n        }\r\n\r\n        // write the css for tile html element\r\n\r\n        for (p = 0; p < this.config.browserPrefixes.css.length; p++) {\r\n          prefix = this.config.browserPrefixes.css[p];\r\n          CSSstyleDeclaration += prefix + \"transform:translate\" + this.metrics\r\n            .transforms3Dsupport[0] + \"(\" + tile.oldPosition.left.percent +\r\n            \"%,\" + otherTileNewPos + \"px\" + this.metrics.transforms3Dsupport[\r\n              1] + \"); \" + prefix + \"transition:none; \";\r\n        }\r\n\r\n        break;\r\n\r\n      case this.config.labels.RIGHT:\r\n\r\n        otherTileNewPos = (tile.newPosition.left.newValue.pixels +\r\n          (\r\n            this.metrics.tileWidth * (i + 1)));\r\n        if (otherTileNewPos > tile.canPush.tiles[i].max || tile.canPush\r\n          .tiles[i].max == null) {\r\n          tile.canPush.tiles[i].max = otherTileNewPos;\r\n        } else {\r\n          return false;\r\n        }\r\n\r\n        // write the css for tile html element\r\n        for (p = 0; p < this.config.browserPrefixes.css.length; p++) {\r\n          prefix = this.config.browserPrefixes.css[p];\r\n          CSSstyleDeclaration += prefix + \"transform:translate\" +\r\n            this.metrics\r\n            .transforms3Dsupport[0] + \"(\" + otherTileNewPos + \"px,\" +\r\n            tile.oldPosition.top.percent + \"%\" + this.metrics.transforms3Dsupport[\r\n              1] + \"); \" + prefix + \"transition:none; \";\r\n        }\r\n        break;\r\n\r\n      case this.config.labels.DOWN:\r\n\r\n        otherTileNewPos = (tile.newPosition.top.newValue.pixels + (\r\n          game\r\n          .metrics.tileHeight * (i + 1)));\r\n        if (otherTileNewPos > tile.canPush.tiles[i].max || tile.canPush\r\n          .tiles[i].max == null) {\r\n          tile.canPush.tiles[i].max = otherTileNewPos;\r\n        } else {\r\n          return false;\r\n        }\r\n\r\n        // write the css for tile html element\r\n        for (p = 0; p < this.config.browserPrefixes.css.length; p++) {\r\n          prefix = this.config.browserPrefixes.css[p];\r\n          CSSstyleDeclaration += prefix + \"transform:translate\" +\r\n            this.metrics\r\n            .transforms3Dsupport[0] + \"(\" + tile.oldPosition.left.percent +\r\n            \"%,\" + otherTileNewPos + \"px\" + this.metrics.transforms3Dsupport[\r\n              1] + \"); \" + prefix + \"transition:none; \";\r\n        }\r\n\r\n\r\n        break;\r\n\r\n      case this.config.labels.LEFT:\r\n\r\n        otherTileNewPos = (tile.newPosition.left.newValue.pixels -\r\n          (\r\n            this.metrics.tileWidth * (i + 1)));\r\n        if (otherTileNewPos < tile.canPush.tiles[i].max || tile.canPush\r\n          .tiles[i].max == null) {\r\n          tile.canPush.tiles[i].max = otherTileNewPos;\r\n        } else {\r\n          return false;\r\n        }\r\n\r\n        // write the css for tile html element\r\n        for (p = 0; p < this.config.browserPrefixes.css.length; p++) {\r\n          prefix = this.config.browserPrefixes.css[p];\r\n          CSSstyleDeclaration += prefix + \"transform:translate\" +\r\n            this.metrics\r\n            .transforms3Dsupport[0] + \"(\" + otherTileNewPos + \"px,\" +\r\n            tile.oldPosition.top.percent + \"%\" + this.metrics.transforms3Dsupport[\r\n              1] + \"); \" + prefix + \"transition:none; \";\r\n        }\r\n\r\n        break;\r\n\r\n    }\r\n\r\n    if (!!this.config.useReqAnimFrame) {\r\n      this.addMovingTile(otherTile, CSSstyleDeclaration);\r\n      window.requestAnimationFrame(game.renderMovingTiles);\r\n    } else {\r\n      otherTile.htmlElement.style.cssText = CSSstyleDeclaration;\r\n    }\r\n\r\n    if (\r\n      (Math.abs(tile.newPosition.left.newValue.pixels - tile.oldPosition.left.pixels) >= this.metrics.tileWidth * this.config.minDistanceToMoveTile) ||\r\n      (Math.abs(tile.newPosition.top.newValue.pixels - tile.oldPosition.top.pixels) >= this.metrics.tileHeight * this.config.minDistanceToMoveTile)\r\n    ) {\r\n      otherTile.revert = false;\r\n    } else {\r\n      otherTile.revert = true;\r\n    }\r\n\r\n  }\r\n\r\n};\r\n","game.getMovableTiles = function(params) {\r\n  \"use strict\";\r\n  var direction = params.direction,\r\n    pushing = params.pushing,\r\n    moving = params.moving,\r\n    t;\r\n\r\n  this.runtime.movableTiles = [];\r\n\r\n  if (this.runtime.running || params.force === true) {\r\n    for (var i = 0; i < this.config.size.n; i++) {\r\n      t = this.runtime.tiles[\"tile-\" + i];\r\n\r\n      if (!!t.canMove && moving && (typeof direction === \"undefined\" ||\r\n          direction === t.canMove)) {\r\n        this.runtime.movableTiles.push(this.getTile(this.config.labels.TILE_PREFIX +\r\n          t.i));\r\n      };\r\n\r\n      if (this.config.pushMultiple && pushing && !!t.canPush && !t.canMove &&\r\n        (typeof direction === \"undefined\" || direction === t.canPush.direction)\r\n      ) {\r\n        this.runtime.movableTiles.push(this.getTile(this.config.labels.TILE_PREFIX +\r\n          t.i));\r\n      };\r\n    }\r\n\r\n  };\r\n  return this.runtime.movableTiles;\r\n};\r\n","game.getTile = function(param) {\r\n  \"use strict\";\r\n\r\n  var target = null,\r\n    maxLevels = 5,\r\n    tiles = this.runtime.tiles,\r\n    col = parseInt(param.col),\r\n    row = parseInt(param.row),\r\n    prefix = this.config.labels.TILE_PREFIX,\r\n    i;\r\n\r\n  switch (typeof param) {\r\n\r\n    case \"object\":\r\n\r\n      if (param.srcElement) {\r\n        target = param.srcElement;\r\n      } else if (param.pageX && param.pageY) {\r\n        target = document.elementFromPoint(param.pageX, param.pageY);\r\n      } else if (!isNaN(parseInt(param.col)) && !isNaN(parseInt(\r\n          param.row))) {\r\n\r\n        for (i = 0; i < this.config.size.n; i++) {\r\n          if (tiles[prefix + i].col === col && tiles[prefix + i].row === row) {\r\n            return tiles[prefix + i];\r\n          }\r\n        }\r\n        return false;\r\n      } else {\r\n        return false;\r\n      }\r\n\r\n      if (target === null) {\r\n        return false;\r\n      }\r\n\r\n      for (i = 0; i < maxLevels; i++) {\r\n\r\n        if (\r\n          typeof target === \"undefined\" ||\r\n          typeof target.parentNode === \"undefined\" ||\r\n          target === null ||\r\n          target.parentNode === null\r\n        ) {\r\n          return false;\r\n        } else if (target.parentNode.id === this.config.labels.BOARD_ID) {\r\n          return this.runtime.tiles[target.id];\r\n        } else {\r\n          target = target.parentNode;\r\n        }\r\n      }\r\n      return false;\r\n\r\n      break;\r\n\r\n    case \"string\":\r\n      if (param.indexOf(prefix) === 0) {\r\n        return tiles[param];\r\n      }\r\n      return false;\r\n\r\n    case \"number\":\r\n      if (param < this.config.size.n) {\r\n        return tiles[prefix + param];\r\n      }\r\n      return false;\r\n\r\n\r\n  }\r\n};\r\n","game.init = function() {\r\n  \"use strict\";\r\n\r\n  this.runtime = {\r\n    started: false, // false before running, a date obj when started\r\n    running: false, // true if the game is started (and user can win)    \r\n    ended: false, // false while running, a date obj when ended\r\n    timePlaying: 0, // tbd\r\n    movesCount: false, // number of moves the user has made since the start\r\n    dragging: false, // true when any tile is being dragged\r\n    resizeTimer: -1, // variable needed for the resize timer\r\n    selectedTile: null, // the selected tile object (extends normal tile objects \r\n    tiles: {}, // tiles (associative) array\r\n    latestSelection: 0, // used to ignore doubleclicks\r\n    eventListeners: {},\r\n  };\r\n\r\n  this.checkFeatures();\r\n  this.createBoard(); // creates the board, the tiles objects and the html       \r\n  this.metricsUpdate();\r\n  this.changeBg(); // will load a random background image   \r\n  this.initListeners(); // create event listeners enabling user interaction\r\n  this.refresh({\r\n    transitions: false\r\n  }); // position each tile according to the game runtime      \r\n  if (!this.loadGame()) {\r\n    this.newGame(); // repeatedly changes random tiles \r\n  } else {\r\n    this.animate({\r\n      element: document.getElementById(this.config.labels.GAME_ID),\r\n      animation: \"load\",\r\n      duration: 1000\r\n    });\r\n    this.start(); // set the game as started. from this moment on the game checks if the user has won\r\n  }\r\n\r\n};\r\n","game.initListeners = function() {\r\n  \"use strict\";\r\n\r\n  // BEGIN TOUCH/CLICK EVENTS\r\n\r\n  // start/down\r\n  // board\r\n  this.utils.listenTo(\r\n    document.getElementById(this.config.labels.BOARD_ID), (this.config.useTouch ? \"touchstart\" : \"mousedown\"),\r\n    function(event, context) {\r\n\r\n      // ignore doubleclicks  \r\n      if (event.timeStamp - context.runtime.latestSelection < 300) {\r\n        return false;\r\n      }\r\n      context.runtime.latestSelection = event.timeStamp;\r\n\r\n      context.selectTile(context.getTile(event), event);\r\n\r\n    },\r\n    this.runtime.eventListeners,\r\n    this);\r\n\r\n  // ignore swipes outside the board\r\n  this.utils.listenTo(\r\n    document.getElementById(this.config.labels.WRAPPER_ID), (this.config.useTouch ? \"touchmove\" : \"mousemove\"),\r\n    function(event, context) {\r\n      return false;\r\n    },\r\n    this.runtime.eventListeners,\r\n    this);\r\n\r\n  // swipes on the board;\r\n  this.utils.listenTo(\r\n    document.getElementById(this.config.labels.BOARD_ID), (this.config.useTouch ? \"touchmove\" : \"mousemove\"),\r\n    function(event, context) {\r\n\r\n\r\n      if (!!context.runtime.selectedTile) {\r\n        context.dragTile(event);\r\n      } else if (event.type !== \"mousemove\") {\r\n\r\n        // ignore doubleclicks  \r\n        if (event.timeStamp - context.runtime.latestSelection < 300) {\r\n          return false;\r\n        }\r\n        context.runtime.latestSelection = event.timeStamp;\r\n\r\n        context.selectTile(context.getTile(event), event);\r\n      }\r\n\r\n\r\n    },\r\n    this.runtime.eventListeners,\r\n    this);\r\n\r\n  //  end/up\r\n  this.utils.listenTo(\r\n    document.getElementById(this.config.labels.WRAPPER_ID), (this.config.useTouch ? \"touchend\" : \"mouseup\"),\r\n    function(event, context) {\r\n\r\n      if (typeof context.runtime.selectedTile === \"undefined\" || context.runtime.selectedTile === null) {\r\n        return false;\r\n      }\r\n\r\n      if (context.config.useTouch && ((event.timeStamp - context.runtime.selectedTile.timeStamp) > context.config.maxTimeForClickMove)) {\r\n\r\n        if (\r\n          context.runtime.selectedTile.newPosition.top.newValue.pixels === null &&\r\n          context.runtime.selectedTile.newPosition.left.newValue.pixels === null\r\n        ) {\r\n          context.runtime.selectedTile.newPosition = undefined;\r\n        }\r\n      };\r\n\r\n      context.deselectTile();\r\n\r\n    },\r\n    this.runtime.eventListeners,\r\n    this);\r\n\r\n  // mouseout\r\n  this.utils.listenTo(\r\n    document.getElementById(this.config.labels.GAME_ID),\r\n    \"mouseout\",\r\n    function(event, context) {\r\n      event = event ? event : window.event;\r\n      var from = event.relatedTarget || event.toElement;\r\n      if (!from || from.nodeName === \"HTML\") {\r\n        context.deselectTile();\r\n      }\r\n    },\r\n    this.runtime.eventListeners,\r\n    this);\r\n\r\n\r\n  // END TOUCH/MOUSE EVENTS\r\n\r\n  if (this.config.useKeyboard) {\r\n    this.utils.listenTo(\r\n      document.body,\r\n      \"keyup\",\r\n      function(event, context) {\r\n\r\n        switch (event.which) {\r\n          case context.config.keycodes.KEY_ARROW_LEFT:\r\n            context.moveAnyTile({\r\n              direction: context.config.labels.LEFT,\r\n              pushing: event.ctrlKey\r\n            });\r\n            break;\r\n\r\n          case context.config.keycodes.KEY_ARROW_UP:\r\n            context.moveAnyTile({\r\n              direction: context.config.labels.UP,\r\n              pushing: event.ctrlKey\r\n            });\r\n            break;\r\n\r\n          case context.config.keycodes.KEY_ARROW_RIGHT:\r\n            context.moveAnyTile({\r\n              direction: context.config.labels.RIGHT,\r\n              pushing: event.ctrlKey\r\n            });\r\n            break;\r\n\r\n          case context.config.keycodes.KEY_ARROW_DOWN:\r\n            context.moveAnyTile({\r\n              direction: context.config.labels.DOWN,\r\n              pushing: event.ctrlKey\r\n            });\r\n            break;\r\n\r\n        }\r\n\r\n      },\r\n      this.runtime.eventListeners,\r\n      this);\r\n  }\r\n\r\n  // resize event will fire a layoutChange event\r\n  this.utils.listenTo(window,\r\n    \"resize\",\r\n    function(event, context) {\r\n\r\n      var event = new Event('layoutChange');\r\n      window.dispatchEvent(event);\r\n    },\r\n    this.runtime.eventListeners,\r\n    this\r\n  );\r\n\r\n  // resize event will fire a layoutChange event\r\n  this.utils.listenTo(window,\r\n    \"orientationchange\",\r\n    function(event, context) {\r\n\r\n      var event = new Event('layoutChange');\r\n      window.dispatchEvent(event);\r\n    },\r\n    this.runtime.eventListeners,\r\n    this\r\n  );\r\n\r\n\r\n  // layoutChange custom event: fired when resized or rotated\r\n  this.utils.listenTo(window,\r\n    \"layoutChange\",\r\n    this.utils.throttle(function(event, context) {\r\n\r\n      if (context.config.useOptimizeRedraws) {\r\n\r\n        console.log(\"layout change detected handling it using optimizeRedraws...\");\r\n        context.optimizeRedraws(\"on\");\r\n        context.layoutChange();\r\n\r\n        if (context.runtime.resizeTimer !== -1) {\r\n          clearTimeout(context.runtime.resizeTimer);\r\n        }\r\n\r\n        context.runtime.resizeTimer = window.setTimeout(function(context) {\r\n\r\n          if (typeof context !== \"undefined\") {\r\n\r\n            context.optimizeRedraws(\"off\");\r\n          }\r\n\r\n        }, 500, context);\r\n\r\n      } else {\r\n\r\n        console.log(\"layout change detected, handling it ...\");\r\n        context.layoutChange();\r\n\r\n      }\r\n\r\n    }, 200, true),\r\n    this.runtime.eventListeners,\r\n    this\r\n  );\r\n\r\n};\r\n","game.isTile = function(tile) {\r\n  \"use strict\";\r\n\r\n  if (tile === null || tile === undefined) {\r\n    return false;\r\n  }\r\n\r\n  switch (typeof tile) {\r\n    case \"object\":\r\n      if (tile.id.indexOf(this.config.labels.TILE_PREFIX) < 0) {\r\n        return false;\r\n      }\r\n      break;\r\n\r\n    case \"string\":\r\n      tile = this.runtime.tiles[tile];\r\n      if (typeof tile === \"undefined\") {\r\n        return false;\r\n      };\r\n      if (tile.id.indexOf(this.config.labels.TILE_PREFIX) < 0) {\r\n        return false;\r\n      };\r\n      break;\r\n\r\n    default:\r\n      return false;\r\n      break;\r\n  }\r\n  return tile;\r\n};\r\n","game.layoutChange = function() {\r\n  \"use strict\";\r\n\r\n  this.deselectTile();\r\n  this.metricsUpdate();\r\n  this.refresh();\r\n\r\n  console.log(\"Tiles deselected, metrics updated and game refreshed after a layout change.\");\r\n};\r\n","game.loadGame = function(type) {\r\n  \"use strict\";\r\n  if (!this.config.useLstorage) {\r\n    return false;\r\n  }\r\n  if (typeof type === \"undefined\") {\r\n    type = this.config.labels.AUTOSAVE_LABEL;\r\n  }\r\n\r\n  var loadedGames = JSON.parse(localStorage.getItem(this.config.labels.SAVEDGAMES_LABEL));\r\n  var loadedGame = null;\r\n  var tileID;\r\n\r\n  if (loadedGames !== null) {\r\n    if (typeof loadedGames[type] !== \"undefined\" && loadedGames[type] !==\r\n      null) {\r\n      loadedGame = loadedGames[type];\r\n\r\n      loadedGame.saveDate = new Date(Date.UTC.apply(this,\r\n        loadedGame.saveDate.match(/\\d+\\.{0,1}\\d+/g)));\r\n\r\n\r\n      if (loadedGame.startedDate) {\r\n        loadedGame.startedDate = new Date(Date.UTC.apply(this,\r\n          loadedGame.startedDate.match(/\\d+\\.{0,1}\\d+/g)));\r\n      }\r\n\r\n      if (loadedGame.size !== this.config.size.n) {\r\n        console.log(\"cannot load game: different sizes:\",\r\n          loadedGame.size, this.config.size.n);\r\n        return false;\r\n      }\r\n\r\n      this.runtime.tiles = loadedGame.tiles;\r\n\r\n\r\n      for (var i = 0; i < this.config.size.n; i++) {\r\n\r\n        tileID = this.config.labels.TILE_PREFIX + i;\r\n        loadedGame.tiles[tileID].htmlElement = document.getElementById(\r\n          tileID);\r\n      }\r\n\r\n      this.runtime.started = loadedGame.startedDate;\r\n      this.runtime.movesCount = parseInt(loadedGame.movesCount);\r\n      this.refresh({\r\n        transitions: (type === \"user\")\r\n      });\r\n\r\n      console.log(\"game loaded\");\r\n      return true;\r\n    }\r\n\r\n    console.log(\"cannot find saved game '\" + type + \"'\");\r\n    return false;\r\n\r\n  }\r\n\r\n  console.log(\"cannot find any saved game\");\r\n  return false;\r\n};\r\n","game.metricsUpdate = function() {\r\n  \"use strict\";\r\n\r\n  this.metrics = this.metrics || {};\r\n\r\n  var wrapperHTML = document.getElementById(this.config.labels.WRAPPER_ID); // main wrapper html element\r\n  var gameHTML = document.getElementById(this.config.labels.GAME_ID); // game div html element\r\n  var wrapperWidth = wrapperHTML.offsetWidth;\r\n  var wrapperHeight = wrapperHTML.offsetHeight;\r\n  var cssPrefix = \"#\" + this.config.labels.BOARD_ID;\r\n\r\n  // save values in metrics obj\r\n  this.metrics.transforms3Dsupport = (this.config.use3Dtransforms) ? [\"3d\", \",0\"] : [\"\", \"\"]; // allows transformations 2d and 3d \r\n  this.metrics.wrapperOrientation = (wrapperWidth >= wrapperHeight) ? this.config.labels.LANDSCAPE : this.config.labels.PORTRAIT;\r\n  this.metrics.wrapperRatio = wrapperWidth / wrapperHeight;\r\n  this.metrics.pixelRatio = (window.devicePixelRatio > 1) ? window.devicePixelRatio : 1;\r\n\r\n\r\n  // if it doesn't exists yet, create wrapperSize obj\r\n  if (typeof this.metrics.wrapperSize === \"undefined\") {\r\n    this.metrics.wrapperSize = {};\r\n  };\r\n\r\n  // if it doesn't exist yet, create a sub-obj for storing metric sinformation for each screen orientation    \r\n  this.metrics.wrapperSize[this.metrics.wrapperOrientation] = {\r\n    width: wrapperWidth,\r\n    height: wrapperHeight,\r\n  };\r\n\r\n  // this is info about the board configuration\r\n  this.metrics.boardLayout = (this.config.size.h >= this.config.size.v) ? this.config.labels.LANDSCAPE : this.config.labels.PORTRAIT;\r\n  this.metrics.boardRatio = this.config.size.h / this.config.size.v;\r\n\r\n  // this is a pragmatic way to calculate a good font size for tile numbers\r\n  this.metrics.fontSize = parseInt((document.body.currentStyle || (window.getComputedStyle && getComputedStyle(document.body, null)) || document.body.style).fontSize);\r\n\r\n  // initialize the margin around the game board\r\n  this.metrics.marginH = {\r\n    percent: this.config.margin.h,\r\n    pixels: 0\r\n  };\r\n\r\n  // initialize the margin around the game board\r\n  this.metrics.marginV = {\r\n    percent: this.config.margin.v,\r\n    pixels: 0\r\n  };\r\n\r\n  // initialize the bezel around the game board\r\n  this.metrics.borderSize = {\r\n    percent: this.config.borderSize,\r\n    pixels: 0\r\n  };\r\n\r\n  // depending on orientation, calculate board size to optimize space\r\n  // board will always be a square, so calculate width first\r\n  if (this.metrics.wrapperOrientation === this.config.labels.LANDSCAPE) {\r\n\r\n    this.metrics.height = this.utils.roundTo(wrapperHeight / 100 * (100 - this.config.borderSize * 2 - this.metrics.marginV.percent * 2), this.config.size.h);\r\n    this.metrics.width = this.metrics.height;\r\n\r\n    this.metrics.borderSize.pixels = Math.round(wrapperHeight / 100 * this.config.borderSize);\r\n    this.metrics.marginH.pixels = Math.round(wrapperHeight / 100 * this.metrics.marginH.percent);\r\n    this.metrics.marginV.pixels = Math.round(wrapperHeight / 100 * this.metrics.marginV.percent);\r\n\r\n    this.metrics.left = Math.round((wrapperWidth - this.metrics.width - this.metrics.borderSize.pixels - this.metrics.marginH.pixels) / 2);\r\n    this.metrics.top = Math.round((this.metrics.wrapperSize[this.metrics.wrapperOrientation].height - this.metrics.height - this.metrics.borderSize.pixels - this.metrics.marginV.pixels) / 2);\r\n\r\n  } else {\r\n\r\n    this.metrics.width = this.utils.roundTo(wrapperWidth / 100 * (100 - this.config.borderSize * 2 - this.metrics.marginH.percent * 2), this.config.size.v);\r\n    this.metrics.height = this.metrics.width;\r\n\r\n    this.metrics.borderSize.pixels = Math.round(wrapperWidth / 100 * this.config.borderSize);\r\n    this.metrics.marginH.pixels = Math.round(wrapperWidth / 100 * this.metrics.marginH.percent);\r\n    this.metrics.marginV.pixels = Math.round(wrapperWidth / 100 * this.metrics.marginV.percent);\r\n\r\n    this.metrics.left = Math.round((wrapperWidth - this.metrics.width - this.metrics.borderSize.pixels - this.metrics.marginH.pixels) / 2);\r\n    this.metrics.top = Math.round((this.metrics.wrapperSize[this.metrics.wrapperOrientation].height - this.metrics.height - this.metrics.borderSize.pixels - this.metrics.marginV.pixels) / 2);\r\n\r\n  }\r\n\r\n  // with the board size, get the tile size\r\n  this.metrics.tileWidth = Math.round(this.metrics.width / this.config.size.h);\r\n  this.metrics.tileHeight = Math.round(this.metrics.height / this.config.size.v);\r\n\r\n\r\n  // WRITING PHASE\r\n\r\n  // write the css for game html element\r\n\r\n  var CSSstyleDeclaration = \"\" + \"padding:\" + Math.round(this.metrics.borderSize.pixels) + \"px;\" + \"width:\" + this.metrics.width + \"px; \" + \"height:\" + this.metrics.height + \"px; \" + \"left:\" + this.metrics.left + \"px; \" + \"top:\" + this.metrics.top + \"px; \";\r\n\r\n  if (typeof game.runtime.backgroundImage !== \"undefined\") {\r\n    var rgb = game.runtime.backgroundImage.averageRGB_brighter;\r\n    if (typeof rgb === \"object\") {\r\n      CSSstyleDeclaration += \"background-color: rgb(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \");\"\r\n    };\r\n  };\r\n\r\n  gameHTML.style.cssText = CSSstyleDeclaration;\r\n\r\n  // font size (used both for numbers, spacing and borders)\r\n\r\n  document.getElementById(this.config.labels.GAME_ID).style.fontSize = \"\" + document.getElementById(this.config.labels.BOARD_ID).offsetHeight / this.config.size.v / 2 + \"px\";\r\n\r\n\r\n  // css for tile\r\n  var tileWpc = (100 / this.config.size.h) + \"%\";\r\n  var tileHpc = (100 / this.config.size.v) + \"%\";\r\n\r\n  // if the class rule is not present..\r\n  if (this.utils.editCSSRule(cssPrefix + \" .\" + this.config.labels.TILE_CLASS) === null) {\r\n\r\n    // ...create it\r\n    this.utils.createCSSClass(cssPrefix + \" .\" + this.config.labels.TILE_CLASS,\r\n      \"width: \" + tileWpc + \"; height: \" + tileHpc + \";\"\r\n    );\r\n\r\n  } else {\r\n\r\n    // ...or updated it\r\n    this.utils.editCSSRule(cssPrefix + \" .\" + this.config.labels.TILE_CLASS, \"width\", tileWpc);\r\n    this.utils.editCSSRule(cssPrefix + \" .\" + this.config.labels.TILE_CLASS, \"height\", tileHpc);\r\n\r\n  };\r\n\r\n  // same for inner class\r\n  var bgSize = \"auto \" + this.metrics.height + \"px\";\r\n\r\n  if (this.utils.editCSSRule(cssPrefix + \" .\" + this.config.labels.TILE_INNER_CLASS) === null) {\r\n    this.utils.createCSSClass(cssPrefix + \".\" + this.config.labels.TILE_INNER_CLASS, \"background-size: \" + bgSize + \";\");\r\n  } else {\r\n    this.utils.editCSSRule(cssPrefix + \" .\" + this.config.labels.TILE_INNER_CLASS, \"backgroundSize\", bgSize);\r\n  }\r\n\r\n};\r\n","game.moveAnyTile = function(params) {\r\n  \"use strict\";\r\n\r\n  var tiles = (params.pushing === true) ? this.getMovableTiles({\r\n      pushing: false,\r\n      moving: true,\r\n      direction: params.direction\r\n    }).concat(this.getMovableTiles({\r\n      pushing: true,\r\n      moving: false,\r\n      direction: params.direction\r\n    }).sort(function(t1, t2) {\r\n      return t1.canPush.n - t2.canPush.n;\r\n    })) :\r\n    this.getMovableTiles({\r\n      pushing: false,\r\n      moving: true,\r\n      direction: params.direction\r\n    });\r\n  for (var i = 0; i < tiles.length; i++) {\r\n    this.moveTile(tiles[i], {\r\n      transitions: false,\r\n      force: false,\r\n      refresh: false\r\n    });\r\n  }\r\n  this.refresh({\r\n    transitionDuration: this.config.transitionDuration.byKeyboard\r\n  });\r\n\r\n  return tiles;\r\n};\r\n","game.moveTile = function(tile, params) {\r\n  \"use strict\";\r\n\r\n  tile = this.isTile(tile);\r\n\r\n  if (!tile) {\r\n    return false;\r\n  };\r\n\r\n  var params = params || {};\r\n\r\n  var hole = this.runtime.tiles[this.config.labels.TILE_PREFIX + this.config.labels.HOLE_INDEX];\r\n  var temp = {};\r\n\r\n  if (!this.canMove(tile)) {\r\n    return false;\r\n  }\r\n\r\n  if (params.force !== true) {\r\n    if (!this.runtime.running) {\r\n      return false;\r\n    }\r\n    this.countMove();\r\n  }\r\n\r\n  temp.col = tile.col;\r\n  temp.row = tile.row;\r\n\r\n  tile.col = hole.col;\r\n  tile.row = hole.row;\r\n\r\n  hole.col = temp.col;\r\n  hole.row = temp.row;\r\n\r\n  if (params.refresh === true) {\r\n    this.refresh({\r\n      transitions: params.transitions,\r\n      saveGame: !params.force,\r\n      redraw: !!!params.force\r\n    });\r\n  }\r\n\r\n  return true;\r\n};\r\n","game.newGame = function() {\r\n  \"use strict\";\r\n\r\n  var animationDuration = 2000;\r\n\r\n  if (this.runtime.running) {\r\n    console.log(\"user reset\");\r\n\r\n    this.stop();\r\n\r\n    setTimeout(function(context) {\r\n\r\n      context.loadGame(context.config.labels.SORTEDSAVE_LABEL);\r\n\r\n      context.refresh({\r\n        transitions: false\r\n      });\r\n\r\n      context.saveGame(context.config.labels.SORTEDSAVE_LABEL);\r\n\r\n\r\n    }, animationDuration * 0.34, this);\r\n\r\n    this.animate({\r\n      element: document.getElementById(this.config.labels.GAME_ID),\r\n      animation: \"resetboard\",\r\n      duration: animationDuration,\r\n      easing: \"ease-in-out\"\r\n    });\r\n\r\n  } else {\r\n    console.log(\"first launch\");\r\n\r\n    this.refresh({\r\n      transitions: false\r\n    });\r\n\r\n    this.saveGame(this.config.labels.SORTEDSAVE_LABEL);\r\n\r\n    this.animate({\r\n      element: document.getElementById(this.config.labels.GAME_ID),\r\n      animation: \"intro\",\r\n      duration: animationDuration\r\n    });\r\n\r\n  }\r\n\r\n  setTimeout(function(context) {\r\n\r\n    context.shuffle(context.config.size.n * context.config.size.n);\r\n    context.saveGame(context.config.labels.SHUFFLEDSAVE_LABEL);\r\n    context.start();\r\n\r\n  }, animationDuration * 0.85, this);\r\n};\r\n","game.optimizeRedraws = function(state) {\r\n  \"use strict\";\r\n\r\n  var elements = [\r\n    this.config.labels.WRAPPER_ID,\r\n    this.config.labels.BACKGROUND_CONTAINER_ID,\r\n    this.config.labels.GAME_ID\r\n  ];\r\n\r\n  var i = 0;\r\n\r\n\r\n  if (state == \"on\") {\r\n\r\n    console.log(\"hiding elements during layout change...\")\r\n    for (i = 0; i < elements.length; i++) {\r\n      document.getElementById(elements[i]).style.visibility = \"hidden\";\r\n    }\r\n\r\n  } else {\r\n\r\n    console.log(\"...showing back again elements after layout change.\")\r\n    for (i = 0; i < elements.length; i++) {\r\n      document.getElementById(elements[i]).style.visibility = \"visible\";\r\n\r\n    }\r\n\r\n  };\r\n\r\n\r\n}\r\n","game.refresh = function(params) {\r\n  \"use strict\";\r\n\r\n  var tileID,\r\n    tile,\r\n    CSSstyleDeclaration = \"\",\r\n    win = true;\r\n\r\n  if (typeof params === \"undefined\") {\r\n    params = {\r\n      transitions: true,\r\n      saveGame: false\r\n    };\r\n  };\r\n\r\n  if (params.transitions === false) {\r\n    params.transitionDuration = 0;\r\n  } else // transitions = true\r\n  {\r\n    if (typeof params.transitionDuration !== \"number\") {\r\n      params.transitionDuration = this.config.transitionDuration.generic;\r\n    }\r\n  };\r\n\r\n  console.log(\"refresh\", params);\r\n  game.runtime.movingTiles = {};\r\n\r\n  for (var i = 0; i < this.config.size.n; i++) {\r\n\r\n    tileID = this.config.labels.TILE_PREFIX + i;\r\n    tile = this.runtime.tiles[tileID];\r\n\r\n    // write the css for tile html element\r\n    var prefix = \"\";\r\n    for (var p = 0; p < this.config.browserPrefixes.css.length; p++) {\r\n\r\n      prefix = this.config.browserPrefixes.css[p];\r\n\r\n      CSSstyleDeclaration += prefix + \"transform:translate\" + this.metrics.transforms3Dsupport[0] + \"(\" + (tile.col * 100) + \"%,\" + (tile.row * 100) + \"%\" + this.metrics.transforms3Dsupport[1] + \"); \";\r\n      CSSstyleDeclaration += prefix + \"transition-property:\" + prefix + \"transform;\";\r\n      CSSstyleDeclaration += prefix + \"transition-duration:\" + parseInt(Math.abs(params.transitionDuration)) + \"ms !important;\";\r\n      CSSstyleDeclaration += prefix + \"transition-timing-function:\" + this.config.easings.EASING_TILES_MOVEMENT + \";\";\r\n    }\r\n\r\n\r\n    if (params.redraw !== false) {\r\n      tile.htmlElement.style.cssText = CSSstyleDeclaration;\r\n    }\r\n\r\n    tile.htmlElement.childNodes[0].style.backgroundPosition = \"-\" + (tile.correctCol * this.metrics.tileWidth) + \"px -\" + (tile.correctRow * this.metrics.tileHeight) + \"px\";\r\n\r\n    tile.canMove = this.canMove(tileID);\r\n    tile.canPush = this.canPush(tileID);\r\n\r\n    // clean up data created when dragging or moving a tile\r\n    tile.offse = undefined;\r\n    tile.newPosition = undefined;\r\n    tile.oldPosition = undefined;\r\n    tile.timeStamp = undefined;\r\n    tile.revert = undefined;\r\n    tile.max = undefined;\r\n\r\n    // check if the user has won\r\n    if (tile.correctCol !== tile.col || tile.correctRow !== tile.row) {\r\n      win = false;\r\n    }\r\n\r\n  };\r\n\r\n  if (this.runtime.running && win /* && this.runtime.movesCount > 0 */ ) {\r\n    setTimeout(function() {\r\n      window.alert(\"Hai vinto!\");\r\n    }, 500);\r\n    this.stop();\r\n\r\n    this.newGame();\r\n  }\r\n\r\n  if (params.saveGame === true) {\r\n    this.saveGame();\r\n  }\r\n};\r\n","game.addMovingTile = function(tileObj, cssString) {\r\n  \"use strict\";\r\n\r\n  if (typeof this.runtime.movingTiles !== \"object\") {\r\n    this.runtime.movingTiles = {};\r\n  }\r\n\r\n  this.runtime.movingTiles[tileObj.id] = cssString;\r\n  return this.runtime.movingTiles;\r\n\r\n};\r\n\r\n\r\ngame.renderMovingTiles = function() {\r\n\r\n  var movingTiles = game.runtime.movingTiles;\r\n\r\n  for (tileId in movingTiles) {\r\n    if (!!movingTiles[tileId]) {\r\n      console.log(\"--- moving \" + tileId)\r\n      game.runtime.tiles[tileId].htmlElement.style.cssText = movingTiles[tileId];\r\n    }\r\n  }\r\n  game.runtime.movingTiles = {};\r\n\r\n  return game.runtime.movingTiles;\r\n\r\n}\r\n","game.saveGame = function(type) {\r\n  \"use strict\";\r\n  if (!this.config.useLstorage) {\r\n    return false;\r\n  }\r\n  if (this.runtime.ended !== false) {\r\n    return false;\r\n  }\r\n  if (typeof type === \"undefined\") {\r\n    type = this.config.labels.AUTOSAVE_LABEL;\r\n  }\r\n\r\n  var savedGames = {};\r\n  var savedGame = {\r\n    saveDate: new Date().toUTCString(),\r\n    type: type,\r\n    size: this.config.size.n,\r\n    tiles: {},\r\n    movesCount: this.runtime.movesCount\r\n  };\r\n  var tileID;\r\n\r\n  if (JSON.parse(localStorage.getItem(this.config.labels.SAVEDGAMES_LABEL)) != null) {\r\n    savedGames = JSON.parse(localStorage.getItem(this.config.labels.SAVEDGAMES_LABEL));\r\n  }\r\n\r\n  if (this.runtime.started) {\r\n    savedGame.startedDate = this.runtime.started.toUTCString();\r\n  }\r\n\r\n  for (var i = 0; i < this.config.size.n; i++) {\r\n\r\n    tileID = this.config.labels.TILE_PREFIX + i;\r\n    savedGame.tiles[tileID] = this.utils.cloneObj(this.runtime.tiles[tileID]);\r\n  }\r\n\r\n  savedGames[type] = savedGame;\r\n\r\n  localStorage.setItem(this.config.labels.SAVEDGAMES_LABEL, JSON.stringify(savedGames));\r\n\r\n  console.log(\"game saved (\" + type + \")\");\r\n};\r\n","game.selectTile = function(tile, event) {\r\n  \"use strict\";\r\n\r\n  if (!this.runtime.running) {\r\n    return false;\r\n  }\r\n\r\n  tile = this.isTile(tile);\r\n\r\n  if (!tile) {\r\n    return false;\r\n  };\r\n\r\n  var direction = (this.config.pushMultiple && tile.canPush) ? tile.canPush.direction : tile.canMove;\r\n\r\n  this.runtime.selectedTile = tile;\r\n\r\n  if (this.canMove(tile) || this.config.pushMultiple) {\r\n\r\n    this.runtime.selectedTile.timeStamp = (typeof event !== \"undefined\") ? event.timeStamp : new Date();\r\n\r\n    this.runtime.selectedTile.oldPosition = {\r\n\r\n      left: {\r\n        percent: 100 * tile.col,\r\n        pixels: this.metrics.tileWidth * tile.col\r\n      },\r\n      top: {\r\n        percent: 100 * tile.row,\r\n        pixels: this.metrics.tileHeight * tile.row\r\n      }\r\n\r\n    };\r\n    this.runtime.selectedTile.offset = (typeof event !== \"undefined\") ? {\r\n      top: ((event.pageY - this.metrics.top - this.metrics.borderSize.pixels) % this.metrics.tileHeight),\r\n      left: ((event.pageX - this.metrics.left - this.metrics.borderSize.pixels) % this.metrics.tileWidth)\r\n    } : {\r\n      top: this.metrics.tileHeight / 2,\r\n      left: this.metrics.tileWidth / 2\r\n    };\r\n\r\n    this.runtime.selectedTile.newPosition = {\r\n      top: {\r\n        min: {\r\n          pixels: null,\r\n          percent: null\r\n        },\r\n        newValue: {\r\n          pixels: null,\r\n          percent: null\r\n        },\r\n        max: {\r\n          pixels: null,\r\n          percent: null\r\n        }\r\n      },\r\n      left: {\r\n        min: {\r\n          pixels: null,\r\n          percent: null\r\n        },\r\n        newValue: {\r\n          pixels: null,\r\n          percent: null\r\n        },\r\n        max: {\r\n          pixels: null,\r\n          percent: null\r\n        }\r\n      }\r\n    };\r\n\r\n    switch (direction) {\r\n\r\n      case this.config.labels.UP:\r\n        this.runtime.selectedTile.newPosition.top.min.pixels = Math.round(this.runtime.selectedTile.oldPosition.top.pixels - this.metrics.tileHeight);\r\n        this.runtime.selectedTile.newPosition.top.max.pixels = Math.round(this.runtime.selectedTile.oldPosition.top.pixels);\r\n        this.runtime.selectedTile.newPosition.left.min.pixels = Math.round(this.runtime.selectedTile.oldPosition.left.pixels);\r\n        this.runtime.selectedTile.newPosition.left.max.pixels = Math.round(this.runtime.selectedTile.oldPosition.left.pixels);\r\n        break;\r\n\r\n      case this.config.labels.DOWN:\r\n        this.runtime.selectedTile.newPosition.top.min.pixels = Math.round(this.runtime.selectedTile.oldPosition.top.pixels);\r\n        this.runtime.selectedTile.newPosition.top.max.pixels = Math.round(this.runtime.selectedTile.oldPosition.top.pixels + this.metrics.tileHeight);\r\n        this.runtime.selectedTile.newPosition.left.min.pixels = Math.round(this.runtime.selectedTile.oldPosition.left.pixels);\r\n        this.runtime.selectedTile.newPosition.left.max.pixels = Math.round(this.runtime.selectedTile.oldPosition.left.pixels);\r\n        break;\r\n\r\n      case this.config.labels.LEFT:\r\n        this.runtime.selectedTile.newPosition.left.min.pixels = Math.round(this.runtime.selectedTile.oldPosition.left.pixels - this.metrics.tileWidth);\r\n        this.runtime.selectedTile.newPosition.left.max.pixels = Math.round(this.runtime.selectedTile.oldPosition.left.pixels);\r\n        this.runtime.selectedTile.newPosition.top.min.pixels = Math.round(this.runtime.selectedTile.oldPosition.top.pixels);\r\n        this.runtime.selectedTile.newPosition.top.max.pixels = Math.round(this.runtime.selectedTile.oldPosition.top.pixels);\r\n        break;\r\n\r\n      case this.config.labels.RIGHT:\r\n        this.runtime.selectedTile.newPosition.left.min.pixels = Math.round(this.runtime.selectedTile.oldPosition.left.pixels);\r\n        this.runtime.selectedTile.newPosition.left.max.pixels = Math.round(this.runtime.selectedTile.oldPosition.left.pixels + this.metrics.tileWidth);\r\n        this.runtime.selectedTile.newPosition.top.min.pixels = Math.round(this.runtime.selectedTile.oldPosition.top.pixels);\r\n        this.runtime.selectedTile.newPosition.top.max.pixels = Math.round(this.runtime.selectedTile.oldPosition.top.pixels);\r\n        break;\r\n    }\r\n\r\n    if (!this.runtime.dragging) {\r\n      this.utils.addClass(tile.htmlElement, this.config.labels.PRESSED_LABEL +\r\n        \" \" +\r\n        this.config.labels.SELECTED_LABEL);\r\n    }\r\n\r\n    if (tile.canPush !== false && this.config.pushMultiple) {\r\n\r\n      tile.canPush.tiles = [];\r\n\r\n      for (var i = 1; i <= tile.canPush.n; i++) {\r\n\r\n        switch (tile.canPush.direction) {\r\n\r\n          case this.config.labels.UP:\r\n            tile.canPush.tiles.push(this.getTile({\r\n              col: tile.col,\r\n              row: tile.row - i\r\n            }));\r\n            break;\r\n\r\n          case this.config.labels.RIGHT:\r\n            tile.canPush.tiles.push(this.getTile({\r\n              col: tile.col + i,\r\n              row: tile.row\r\n            }));\r\n            break;\r\n\r\n          case this.config.labels.DOWN:\r\n            tile.canPush.tiles.push(this.getTile({\r\n              col: tile.col,\r\n              row: tile.row + i\r\n            }));\r\n            break;\r\n\r\n          case this.config.labels.LEFT:\r\n            tile.canPush.tiles.push(this.getTile({\r\n              col: tile.col - i,\r\n              row: tile.row\r\n            }));\r\n            break;\r\n\r\n        }\r\n\r\n        tile.canPush.tiles[i - 1].max = null;\r\n\r\n      }\r\n\r\n    }\r\n\r\n    this.vibrate(\"select\");\r\n\r\n    if (!!tile.canMove || !!tile.canPush) {\r\n      this.runtime.dragging = true;\r\n    }\r\n\r\n    //console.log(\"selected\",tile);\r\n\r\n  }\r\n};\r\n","game.getClosestColor = getClosestColor; /* Bower dependency included in the main .js */\r\n\r\ngame.setBgImage = function(params) {\r\n  \"use strict\";\r\n\r\n  if (!document.createElement ||\r\n    typeof params.imgUrl !== \"string\"\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  var img = document.getElementById(this.config.labels.BACKGROUND_IMAGE_ID) || document.createElement(\"img\");\r\n  var rgb = {};\r\n\r\n  console.log(\"loading image \" + params.imgUrl + \"...\");\r\n  img.crossOrigin = '';\r\n  img.src = params.imgUrl;\r\n  img.crossOrigin = \"\";\r\n  img.id = this.config.labels.BACKGROUND_IMAGE_ID;\r\n\r\n  this.utils.listenTo(img, \"load\", game.handleBgImageLoaded, this.runtime.eventListeners, this);\r\n\r\n  return true;\r\n\r\n};\r\n\r\ngame.handleBgImageLoaded = function(event, context) {\r\n\r\n  console.log(\"background image loading complete\")\r\n  context.utils.stopListeningTo(event.target, \"load\", context.runtime.eventListeners);\r\n\r\n  var averageRGB = context.utils.getAverageRGB(event.target);\r\n\r\n  if (context.utils.getAverage([averageRGB.r, averageRGB.g, averageRGB.b]) > 100) {\r\n    context.applyBgColor(averageRGB);\r\n    context.applyBgImage(event.target);\r\n  } else {\r\n    console.log(\"The average color for this image is too dark (\" + averageRGB.r + \",\" + averageRGB.g + \",\" + averageRGB.b + \"), better to load another...\");\r\n  }\r\n\r\n};\r\n\r\ngame.applyBgImage = function(img) {\r\n\r\n  \"use strict\";\r\n\r\n  var i;\r\n  var tileName;\r\n  var tile;\r\n\r\n  this.runtime.backgroundImage = this.runtime.backgroundImage || {};\r\n  this.runtime.backgroundImage.src = img.src;\r\n\r\n\r\n  for (tileName in this.runtime.tiles) {\r\n    tile = this.getTile(tileName).htmlElement;\r\n    for (i = 0; i < tile.childNodes.length; i++) {\r\n      if (tile.childNodes[i].className === this.config.labels.TILE_INNER_CLASS) {\r\n        tile.childNodes[i].style.backgroundImage = \"url(\" + this.runtime.backgroundImage.src + \")\";\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (typeof this.runtime.eventListeners[img.id][\"load\"] == \"undefined\") {\r\n    document.getElementById(this.config.labels.BACKGROUND_CONTAINER_ID).innerHTML = \"\";\r\n    document.getElementById(this.config.labels.BACKGROUND_CONTAINER_ID).appendChild(img);\r\n  } else {\r\n    console.log(\"Couldn't change bg image because still has a listener attached.\", this.runtime.eventListeners[img.id][\"load\"])\r\n  }\r\n\r\n};\r\n\r\ngame.adjustColor = function(rgb, mode, amount) {\r\n  \"use strict\";\r\n\r\n  if (typeof rgb === \"undefined\") {\r\n    console.log(\"which color?\");\r\n    return false;\r\n  }\r\n  if (typeof amount !== \"number\") {\r\n    amount = 0.25;\r\n  }\r\n\r\n  function limit(n, min, max) {\r\n\r\n    n = Math.round(n);\r\n\r\n    if (n < min) {\r\n      return min;\r\n    }\r\n    if (n > max) {\r\n      return max;\r\n    }\r\n    return n;\r\n  }\r\n\r\n  switch (mode) {\r\n\r\n    case \"brighter\":\r\n      return {\r\n        r: limit(rgb.r * (1 + amount), 0, 255),\r\n        g: limit(rgb.g * (1 + amount), 0, 255),\r\n        b: limit(rgb.b * (1 + amount), 0, 255)\r\n      };\r\n\r\n    case \"darker\":\r\n      return {\r\n        r: limit(rgb.r * (1 - amount), 0, 255),\r\n        g: limit(rgb.g * (1 - amount), 0, 255),\r\n        b: limit(rgb.b * (1 - amount), 0, 255)\r\n      };\r\n\r\n    default:\r\n      console.log(\"color not changed\", rgb);\r\n      return rgb;\r\n\r\n  };\r\n\r\n};\r\n\r\ngame.applyBgColor = function(rgb) {\r\n\r\n  \"use strict\";\r\n\r\n  var rgbVal = \"rgb(\" + rgb.r + \",\" + rgb.g + \",\" + rgb.b + \")\";\r\n  var hexVal = \"#\" + rgb.r.toString(16) + rgb.g.toString(16) + rgb.b.toString(16);\r\n\r\n  var rgbDark = this.adjustColor(rgb, \"darker\", 0.65);\r\n  var rgbDarkVal = \"rgb(\" + rgbDark.r + \",\" + rgbDark.g + \",\" + rgbDark.b + \")\";\r\n  var hexDarkVal = \"#\" + rgbDark.r.toString(16) + rgbDark.g.toString(16) + rgbDark.b.toString(16);\r\n\r\n\r\n  var rgbBright = this.adjustColor(rgb, \"brighter\", 0.2);\r\n  var rgbBrightVal = \"rgb(\" + rgbBright.r + \",\" + rgbBright.g + \",\" + rgbBright.b + \")\";\r\n  var hexBrightVal = \"#\" + rgbBright.r.toString(16) + rgbBright.g.toString(16) + rgbBright.b.toString(16);\r\n\r\n\r\n  this.runtime.backgroundImage = this.runtime.backgroundImage || {};\r\n\r\n  this.runtime.backgroundImage.averageRGB = rgbVal;\r\n  this.runtime.backgroundImage.averageRGB_darker = rgbDarkVal;\r\n  this.runtime.backgroundImage.averageRGB_brighter = rgbBrightVal;\r\n\r\n  this.runtime.backgroundImage.averageHEX = hexVal;\r\n  this.runtime.backgroundImage.averageHEX_darker = hexDarkVal;\r\n  this.runtime.backgroundImage.averageHEX_brighter = hexBrightVal;\r\n\r\n  this.runtime.backgroundImage.blackish = (getClosestColor(hexVal, [\"#000\", \"#FFF\"]) == \"#000\");\r\n  this.runtime.backgroundImage.whiteish = !this.runtime.backgroundImage.blackish;\r\n\r\n  document.getElementById(this.config.labels.BACKGROUND_CONTAINER_ID).style.backgroundColor = rgbVal;\r\n  document.getElementById(this.config.labels.GAME_ID).style.backgroundColor = hexBrightVal;\r\n\r\n\r\n  var currentBoxShadow = this.utils.editCSSRule(\"#\" + this.config.labels.BOARD_ID + \" .\" + this.config.labels.TILE_INNER_CLASS, \"boxShadow\");\r\n\r\n  if (!!currentBoxShadow) {\r\n\r\n    var boxShadowProps = currentBoxShadow.replace(/,\\s+/g, \",\").split(\" \");\r\n\r\n    for (var i = 0; i < boxShadowProps.length; i++) {\r\n      if (boxShadowProps[i].indexOf(\"rgb\") > -1 || boxShadowProps[i].indexOf(\"#\") > -1) {\r\n        boxShadowProps[i] = rgbDarkVal;\r\n      };\r\n      break;\r\n    }\r\n\r\n    this.utils.editCSSRule(\"#\" + this.config.labels.BOARD_ID + \" .\" + this.config.labels.TILE_INNER_CLASS, \"boxShadow\", boxShadowProps.join(\" \"));\r\n\r\n    document.getElementById(this.config.labels.BOARD_ID).style.backgroundColor = hexDarkVal;\r\n\r\n  };\r\n\r\n};\r\n","game.shuffle = function(n, refresh) {\r\n  \"use strict\";\r\n\r\n  console.log(\"shuffle\");\r\n  this.vibrate(\"shuffle\");\r\n\r\n  if (typeof n === \"undefined\") {\r\n    n = 10 * this.config.size.n;\r\n  }\r\n  if (typeof refresh === \"undefined\") {\r\n    refresh = true;\r\n  }\r\n\r\n  var directions = [\r\n    this.config.labels.UP,\r\n    this.config.labels.RIGHT,\r\n    this.config.labels.DOWN,\r\n    this.config.labels.LEFT\r\n  ];\r\n\r\n  var movableTiles = [];\r\n\r\n  var d;\r\n\r\n  for (var i = 0; i < n; i++) {\r\n    d = directions[Math.round(Math.random() * (directions.length - 1))];\r\n\r\n    movableTiles = this.getMovableTiles({\r\n      direction: d,\r\n      pushing: false,\r\n      moving: true,\r\n      force: true\r\n    });\r\n\r\n    this.moveTile(\r\n      movableTiles[0], {\r\n        transitions: false,\r\n        force: true,\r\n        refresh: true\r\n      }\r\n    );\r\n  }\r\n\r\n  if (refresh) {\r\n    this.refresh({\r\n      transitions: true,\r\n      transitionDuration: 100\r\n    });\r\n  }\r\n\r\n};\r\n","game.start = function() {\r\n  \"use strict\";\r\n  this.runtime.started = new Date(); //   - - saves the time of game start\r\n  this.runtime.ended = false;\r\n  this.runtime.running = true; //   - - when true the game checks if the user has won at every move during refresh\r\n  this.runtime.movesCount = 0;\r\n  console.log(\"game started\");\r\n};\r\n","game.stop = function() {\r\n  \"use strict\";\r\n  //    - reverse start()\r\n  this.runtime.ended = new Date(); //   - - saves the time of game end\r\n  this.runtime.running = false; //    - - the game won't check if the user has won\r\n  console.log(\"game stopped\");\r\n};\r\n","game.vibrate = function(reasonToVibrate) {\r\n  \"use strict\";\r\n\r\n  if (this.config.vibration) {\r\n\r\n    var pattern = 20\r\n\r\n    switch (reasonToVibrate) {\r\n\r\n      case \"select\":\r\n        pattern = 20;\r\n        break;\r\n\r\n      case \"bump\":\r\n        pattern = 40;\r\n        break;\r\n\r\n      case \"deselect\":\r\n        pattern = 5;\r\n        break;\r\n\r\n      case \"suffle\":\r\n        pattern = [Math.round(Math.random() * 300), Math.round(Math.random() * 300), Math.round(Math.random() * 300), Math.round(Math.random() * 300), Math.round(Math.random() * 300), Math.round(Math.random() * 300), Math.round(Math.random() * 300), Math.round(Math.random() * 300)];\r\n        break;\r\n\r\n      case \"move\":\r\n        pattern = 0;\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    console.log(\"vibrate\", reasonToVibrate, pattern);\r\n\r\n    if (window.navigator && window.navigator.vibrate) {\r\n      window.navigator.vibrate(pattern);\r\n    };\r\n\r\n  }\r\n\r\n};\r\n"]}